\chapter{The Universal Enveloping Algebra}


\begin{convention}
  The following holds for this section alone:
  We fix an arbitrary field~$\kf$.
  By a~{\algebra{$\kf$}} we always mean an associative and unitary one, and homomorphisms of~{\algebras{$\kf$}} have to respect the units.
  The resulting category of~{\algebras{$\kf$}} with homomorphisms of~{\algebra{$\kf$}} between them will be denoted by~$\cAlg{\kf}$.
  All Lie~algebras considered will have~$\kf$ as their ground field, unless otherwise stated.
  
  If~$A$ is a~{\algebra{$\kf$}} then by an~\defemph{\module{$A$}}\index{module} we mean a left unitial~{\module{$A$}}.
  The resulting category of~{\modules{$A$}} is denoted by~\gls*{module category}.
\end{convention}





\section{Tensor Algebra and Symmetric Algebra}


% \begin{example}[Monoid algebra]
%   In the following all monoids will be written multiplicaitvely unless otherwise mentioned.
%   The neutral element of a monoid~$M$ will be denoted by~$1$ or~$1_M$.
%   Given two monoids~$M$ and~$N$ a map~$f \colon M \to N$ is a homomorphism of monids if~$f(m \cdot m') = f(m) \cdot f(m')$ for all~$m, m' \in M$ and~$f(1_M) = 1_N$.
%   If~$M$ is any monoid then the identity~$\id_M$ is a homomorphism and if~$f \colon M \to N$ and~$g \colon N \to P$ are composable homomorphisms of monoids then their composition~$g \circ f \colon M \to P$ is again a homomorphism of monoids.
%   The resulting category of monoids is denoted by~$\cMon$.
%   
%   \begin{description}
%     \item[Construction:]
%       If~$M$ is a monoid then the monoid algebra~\gls*{monoid algebra} is the (free) vector space with basis~$M$ together with the unique bilinear extension~$\kf[M] \times \kf[M] \to \kf[M]$ of the multiplication~$M \times M \to M$ as its multiplication.
%   
%       This means that the elements of~$\kf[M]$ are formal {\linear{$\kf$}} combinations~$\sum_{m \in M} a_m m$ with~$a_m = 0$ for all but finitely many~$m \in M$.
%       The multiplication of two such elements is given by
%       \[
%         \left(
%           \sum_{m \in M} a_m m
%         \right)
%         \left(
%           \sum_{n \in M} b_n n
%         \right)
%         =
%         \sum_{m, n \in M} (a_m b_n) m n  \,.
%       \]
%       We identify every element~$m \in M$ with the corresponding element~$1 \cdot m \in \kf[M]$.
%       The product~$m \cdot n$ of two elements~$m, n \in M$ in~$\kf[M]$ is then the same as their product in~$M$.
%       The associativity of the multiplication of~$\kf[M]$ follows from the associativity of the multiplication of~$M$, and the neutral element of~$M$ is given by the multiplicative neutral element for~$\kf[M]$.
%       
%     \item[Universal Property:]
%       If~$A$ is any~{\algebra{$\kf$}} then~$(A, \cdot)$ is a multiplicative monoid, which we will denote by~$A^-$.
%       If~$M$ is any monoid and~$f \colon M \to A^-$ is a monoid hommorphism then~$f$ extends uniquely to an algebra homomorphism~$F \colon \kf[M] \to A$.
%       The algebra homomorphism~$F$ is given on elements by
%       \[
%         F\left( \sum_{m \in M} a_m m \right)
%         =
%         \sum_{m \in M} a_m f(m) \,.
%       \]
%       On the other hand every algebra homomorphism~$\kf[M] \to A$ restricts to a monoid homomorphism~$M \to A^-$.
%       This construction results in a {\onetoone} correspondence
%       \[
%         \{
%           \text{monoid homomorphisms~$M \to A^-$}
%         \}
%         \longonetoone
%         \{
%           \text{algebra homomorphisms~$\kf[M] \to A$}
%         \}  \,.
%       \]
%     
%     \item[Uniqueness:]
%       The monoid algebra~$\kf[M]$ together with the inclusion~$i \colon M \to \kf[M]$ is uniquely determined by its universal property up to isomorphism:
%   \end{description}
% \end{example}


% \begin{recall}[Free algebra]
%   Let~$I$ be any set.
%   The \defemph{noncommutative polynomial algebra}~$\kf\gen{X_i \suchthat i \in I}$\index{noncommutative polynomial algebra} has as a basis the set of all monomials
%   \[
%     X_{i_1} \dotsm X_{i_n}
%     \qquad
%     \text{with~$i_1, \dotsc, i_n$}
%   \]
%   and the multiplication is on these basis elements given by
%   \[
%     X_{i_1} \dotsm X_{i_n}
%     \cdot
%     X_{j_1} \dotsm X_{j_m}
%     =
%     X_{i_1} \dotsm X_{i_n} X_{j_1} \dotsm X_{j_m} \,.
%   \]
%   In contrast to the usual (commutative) polynomial algebra~$\kf[X_i \suchthat i \in I]$ the variables~$X_i$ are not required to commute with each other.
%   
%   We can alternatively construct~$\kf\gen{X_i \suchthat i \in I}$ as the monomial algebra of the free monoid on~$I$:
%   Let~$M$ be the set of all words in~$I$, i.e.\ the set of all finite sequences
%   \[
%     (i_1, \dotsc, i_n)
%     \qquad
%     \text{with~$i_1, \dotsc, i_n \in I$}  \,.
%   \]
%   Then~$M$ is a monoid with respect to concatenation of words given by
%   \[
%     (i_1, \dotsc, i_n) (j_1, \dotsc, j_m)
%     =
%     (i_1, \dotsc, i_n, j_1, \dotsc, j_m)
%   \]
%   for all words~$(i_1, \dotsc, i_n), (j_1, \dotsc, j_m) \in M$.
%   The neutral element of~$M$ is given by the empty word~$()$.
% \end{recall}


\begin{recall}[Tensor algebra]
  Let~$V$ be a vector space.
  \begin{description}
    \item[Construction:]
      For all~$v_1, \dotsc, v_d \in V$ we denote the resulting simple tensor~$v_1 \tensor \dotsb \tensor v_d$ in~$V^{\tensor d}$ by~$(v_1, \dotsc, v_d)$.
      Observe that for~$d = 0$ the tensor power~$V^{\tensor d} = V^{\tensor 0}$ has as a basis the emtpy simple tensor~$()$.
      We will therefore identify the tensor power~$V^{\tensor 0}$ with the ground field~$\kf$, so that empty simple tensor~$()$ corresponds to~$1 \in \kf$.
      
      For all~$p, q \geq 0$ we define a multiplication
      \[
        \mu_{p,q}
        \colon
        V^{\tensor p} \times V^{\tensor q}
        \to
        V^{\tensor (p+q)} \,,
        \quad
        (x,y)
        \mapsto
        x y
      \]
      that is on simple tensors~$(v_1, \dotsc, v_p) \in V^{\tensor p}$ and~$(v_{p+1}, \dotsc, v_{p+q}) \in V^{\tensor q}$ given by
      \[
        (v_1, \dotsc, v_p) \cdot (v_{p+1}, \dotsc, v_{p+q})
        =
        (v_1, \dotsc, v_{p+q})  \,.
      \]
      Note that for~$p = 0$ or~$q = 0$ this multiplication is just scalar multiplication.  
      These multiplications fit together associatively in the sense that for all~$p, q, r \geq 0$ and simple tensors~$x \in V^{\tensor p}$,~$y \in V^{\tensor q}$ and~$z \in V^{\tensor r}$ the equality
      \[
        x \cdot (y \cdot z)
        =
        (x \cdot y) \cdot z
      \]
      holds.
      
      Let~$\Tensor(V) \defined \bigoplus_{d \geq 0} V^{\tensor d}$.
      We can fit together the multiplications~$\mu_{p,q}$ with~$p, q \geq 0$ to a single multiplication
      \[
        \mu
        \colon
        \Tensor(V) \times \Tensor(V)
        \to
        \Tensor(V)  \,,
        \quad
        (x,y)
        \mapsto
        xy 
      \]
      that is given on elements~$x, y \in \Tensor(V)$ with~$x = (x_d)_{d \geq 0}$ and~$y = (y_d)_{d \geq 0}$ by
      \[
        x y
        =
        \left(
          \sum_{p+q = d} x_p y_q
        \right)_{d \geq 0} \,.
      \]
      This multiplication is built precisely so that it follows from the bilinearity of the multiplications~$\mu_{p,q}$ that the multipliation~$\mu$ is again bilinear.
      It follows from the associativities of the multiplications~$\mu_{p,q}$ that the multiplication~$\mu$ is associative.
      We may identify the ground field~$\kf = V^{\tensor 0}$ with the corresponding direct summand in~$\Tensor(V)$ to regard~$\kf$ as a linear subspace of~$\Tensor(V)$.
      We have seen above that~$1 \in \kf$ is then unital for the multiplication of~$\Tensor(V)$.
      We have thus altogether constructed a~{\algebra{$\kf$}}~$\Tensor(V)$.
      
      We may identify~$V = V^{\tensor 1}$ with the corresponding direct summand of~$\Tensor(V)$ to regard~$V$ as a linear subspace of~$\Tensor(V)$.
      We then have for all~$v_1, \dotsc, v_n \in V$ that
      \[
        v_1 \dotsm v_n
        =
        (v_1) \dotsm (v_n)
        =
        (v_1, \dotsc, v_n)
        =
        v_1 \tensor \dotsb \tensor v_n  \,.
      \]
      It follows in particular that~$\Tensor(V)$ is then generated by~$V$ as an algebra.
      The algebra~\gls*{tensor algebra} is the \defemph{tensor algebra of~$V$}
      
      We will more generally identify for all~$d \geq 0$ the tensor power~$V^{\tensor d}$ with the corresponding summand in~$\Tensor(V)$.
      The tensor algebra~$\Tensor(V)$ hence consists of linear combinations simple tensors~$v_1 \tensor \dotsb \tensor v_n$.
    
    \item[Universal Property:]
      The tensor algebra~$\Tensor(V)$ can be though of as the \enquote{free~{\algebra{$\kf$}} on~$V$}, in at least two ways:
      \begin{itemize}
        \item(Informal)
          The tensor algebra~$\Tensor(V)$ arises from~$V$ by starting with the elements of~$V$ and adding to~$V$ all kinds of expressions that can be constructed from the elements of~$V$ by algebra operations.
          But it follows from the axioms that many of these expressions have to be the same, so that we only end up with expressions of a certain form.
          
          Let us be a bit more explicit:
          Suppose that a~{\algebra{$\kf$}}~$A$ contains~$V$ as a linear subspace.
          Then it also contains products of the form~$v_1 \dotsm v_n$ with~$v_i \in V$ and hence sums of such products, i.e.\ elements of the form
          \[
            \sum_{i=k}^r v_{i_1} \dotsm v_{i_{n_k}}
          \]
          with~$r \geq 0$ and~$v_{ij} \in V$.
          If we continue to combine elements of this form with algebra operations then we do not gain any new elements, since by the axioms of an algebra they must already be of the above form.
          
          But in an arbitrary~{\algebra{$\kf$}} it may happen that some of these expressions are equal even though this does not follow pureley from the axioms of a~{\algebra{$\kf$}}.
          Consider for example the polynomial ring~$A = \kf[x, y]$ and the linear subspace~$V = \gen{x, y}_{\kf}$.
          It follows from the axioms of a~{\algebra{$\kf$}} that the expressions~$x (x+y)$ and~$x^2 + xy$ are the same, but it does not follow just from the axioms that~$xy = yx$, even though this holds in~$A$.
          There are hence certain additional \emph{relations} between the elements~$x$ and~$y$ of~$V$ in the ambient {\algebra{$\kf$}}~$A$.
          
          In the tensor algebra~$\Tensor(V)$ this does not happen:
          Whenever two expressions~$x$ and~$y$ that are built from elements of~$V$ via algebra operations coincide, then this equality can be derived from the algebra axioms alone.
          Hence there exist no additional relations between the elements of~$V$ in~$\Tensor(V)$.
          The only required condition is that~$V$ is a linear subspace of~$\Tensor(V)$, i.e.\ that addition and scalar multiplication in~$V$ does coincide with the one coming from~$\Tensor(V)$.
          
          The tensor algebra~$\Tensor(V)$ is in this way the \enquote{freest} way of expanding~$V$ into a~{\algebra{$\kf$}}.
        \item(Formal)
          Let~$\iota \colon V \to \Tensor(V)$ be the inclusion map, which is~{\linear{$\kf$}}.
          Then if~$A$ is any other~{\algebra{$\kf$}} and~$f \colon V \to A$ any~{\linear{$\kf$}} map (which one can think of as somewhat of an inclusion, albeit not injective), then~$f$ extends uniquely to an algebra homomorphism~$f^+ \colon \Tensor(V) \to A$, i.e.\ there exists a unique algebra homomorphism~$f^+ \colon \Tensor(V) \to A$ that makes the triangular diagram
          \[
            \begin{tikzcd}
              V
              \arrow{r}[above]{f}
              \arrow{d}[left]{i}
              &
              A
              \\
              \Tensor(V)
              \arrow[dashed]{ur}[below right]{f^+}
              &
              {}
            \end{tikzcd}
          \]
          commute.
          The algebra homomorphism~$f^+$ is given by
          \[
            f^+(v_1 \tensor \dotsb \tensor v_d)
            =
            f(v_1) \dotsm f(v_d)
          \]
          for all~$d \geq 0$ and simple tensors~$v_1 \tensor \dotsb \tensor v_d \in V^{\tensor d}$.
          This construction results in a {\onetoone} correspondence
          \begin{align*}
            \{ \text{\linear{$\kf$} maps~$V \to A$} \}
            &\longonetoone
            \{ \text{algebra homomorphisms~$\Tensor(V) \to A$} \} \,,
            \\
            f
            &\longmapsto
            f^+ \,,
            \\
            \restrict{F}{V}
            &\longmapsfrom
            F \,.
          \end{align*}
          Hence~$(\Tensor(V), i)$ is the \enquote{universal way} of mapping the vector space~$V$ into a~{\algebra{$\kf$}}.
          
          This formal explanation relates to the previous informal explanation in the following way:
          If~$A$ is any~{\algebra{$\kf$}} that contains~$V$ as a linear subspace then the inclusion~$V \to A$ extend uniquely to an algebra homomorphism~$\Tensor(V) \to A$.
          Every relation between expressions built from the elements of~$V$ that holds in~$\Tensor(V)$ must then also hold in~$A$.
          Therefore the only relations that hold in~$\Tensor(V)$ between such expressions are the one that hold in \emph{every}~{\algebra{$\kf$}} containing~$V$.
      \end{itemize}
      
    \item[Uniqueness]
      The above universal property determines the tensor algebra~$\Tensor(V)$ together with the inclusion~$i \colon V \to \Tensor(V)$ uniquely up to unique isomorphism, in the following sense:
      Let~$A$ be another~{\algebra{$\kf$}} and let~$j \colon V \to T$ be a~{\linear{$\kf$}} map such that for every~{\algebra{$\kf$}}~$A$ and every~{\linear{$\kf$}} map~$f \colon V \to A$ there exists a unique algebra homomorphism~$F \colon T \to A$ that makes the triangular diagram
      \[
        \begin{tikzcd}
          V
          \arrow{r}[above]{f}
          \arrow{d}[left]{j}
          &
          A
          \\
          T
          \arrow{ur}[below right]{F}
          &
          {}
        \end{tikzcd}
      \]
      commute.
      
      Then there exist unique algebra homomorphisms~$f \colon A \to T$ and~$g \colon T \to A$ that make the triangular diagrams
      \[
        \begin{tikzcd}[column sep = small]
          {}
          &
          V
          \arrow{dl}[above left]{i}
          \arrow{dr}[above right]{j}
          &
          {}
          \\
          \Tensor(V)
          \arrow[dashed]{rr}[below]{f}
          &
          {}
          &
          T
        \end{tikzcd}
        \qquad\text{and}\qquad
        \begin{tikzcd}[column sep = small]
          {}
          &
          V
          \arrow{dl}[above left]{j}
          \arrow{dr}[above right]{i}
          &
          {}
          \\
          T
          \arrow[dashed]{rr}[below]{g}
          &
          {}
          &
          \Tensor(V)
        \end{tikzcd}
      \]
      commute.
      It then follows that the compositions~$g \circ f \colon \Tensor(V) \to \Tensor(V)$ and~$f \circ g \colon T \to T$ make the triangular diagrams
      \[
        \begin{tikzcd}[column sep = small]
          {}
          &
          V
          \arrow{dl}[above left]{i}
          \arrow{dr}[above right]{i}
          &
          {}
          \\
          \Tensor(V)
          \arrow[dashed]{rr}[below]{g \circ f}
          &
          {}
          &
          \Tensor(V)
        \end{tikzcd}
        \qquad\text{and}\qquad
        \begin{tikzcd}[column sep = small]
          {}
          &
          V
          \arrow{dl}[above left]{j}
          \arrow{dr}[above right]{j}
          &
          {}
          \\
          T
          \arrow[dashed]{rr}[below]{f \circ g}
          &
          {}
          &
          T
        \end{tikzcd}
      \]
      commute.
      The algebra homomorphisms~$g \circ f$ and~$f \circ g$ are unique with this propert by the universal properties of~$(\Tensor(V), i)$ and~$(T, j)$.
      But the identities~$\id_{\Tensor(V)}$ and~$\id_T$ also make these diagrams commute.
      We therefore find that~$g \circ f = \id_{\Tensor(V)}$ and~$f \circ g = \id_{\Tensor(V)}$, so that~$f$ and~$g$ are mutually inverse algebra isomorphisms.
    
    \item[Functoriality:]
      If~$f \colon V \to W$ is any~{\linear{$\kf$}} map then we can consider the following diagram:
      \[
        \begin{tikzcd}
          V
          \arrow{r}[above]{f}
          \arrow{d}
          &
          W
          \arrow{d}
          \\
          \Tensor(V)
          &
          \Tensor(W)
        \end{tikzcd}
      \]
      By applying the universal property of the tensor algebra~$\Tensor(V)$ to the composition~$V \to W \to \Tensor(W)$ it follows that there exists a unique algebra homomorphism~$f_* \colon \Tensor(V) \to \Tensor(W)$ that makes the square diagram
      \[
        \begin{tikzcd}
          V
          \arrow{r}[above]{f}
          \arrow{d}
          &
          W
          \arrow{d}
          \\
          \Tensor(V)
          \arrow[dashed]{r}[below]{f_*}
          &
          \Tensor(W)
        \end{tikzcd}
      \]
      commute.
      This induced algebra homorphism is functorial in the following sense:
      \begin{itemize}
        \item
          It holds that~$(\id_V)_* = \id_{\Tensor(V)}$.
          Indeed, the commutativity of the square 
          \[
            \begin{tikzcd}[column sep = large]
              V
              \arrow{r}[above]{f}
              \arrow{d}
              &
              V
              \arrow{d}
              \\
              \Tensor(V)
              \arrow[dashed]{r}[below]{(\id_V)_*}
              &
              \Tensor(V)
            \end{tikzcd}
          \]
          shows that the identity~$\id_{\Tensor(V)}$ satifies the defining property of the induced algebra homomorphism~$(\id_V)_*$.
        \item
          It holds for all linear maps~$f \colon U \to V$ and~$g \colon V \to W$ that~$(g \circ f)_* = g_* \circ f_*$.
          Indeed, it follows from the commutativity of the diagram
          \[
            \begin{tikzcd}
              U
              \arrow[dashed, bend left=45]{rr}[above]{g \circ f}
              \arrow{r}[above]{f}
              \arrow{d}
              &
              V
              \arrow{r}[above]{g}
              \arrow{d}
              &
              W
              \arrow{d}
              \\
              \Tensor(U)
              \arrow{r}[below]{f_*}
              \arrow[dashed, bend right=45]{rr}[below]{g_* \circ f_*}
              &
              \Tensor(V)
              \arrow{r}[below]{g_*}
              &
              \Tensor(W)
            \end{tikzcd}
          \]
          that the subdiagram
          \[
            \begin{tikzcd}[column sep = large]
              U
              \arrow{r}[above]{g \circ f}
              \arrow{d}
              &
              W
              \arrow{d}
              \\
              \Tensor(U)
              \arrow[dashed]{r}[below]{g_* \circ f_*}
              &
              \Tensor(W)
            \end{tikzcd}
          \]
          commutes.
          This shows that the composition~$g_* \circ f_*$ satisfies the defining property of the induced algebra homomorphism~$(g \circ f)_*$.
      \end{itemize}
      
      This shows that the assignment~$V \mapsto \Tensor(V)$ extends to a (covariant) functor~$\Tensor \colon \cVect{\kf} \to \cAlg{\kf}$.
      The universal property of the tensor algebra states that the functor~$\Tensor$ is left adjoint to the forgetful functor~$\cAlg{\kf} \to \cVect{\kf}$ that assigns to each~{\algebra{$\kf$}} its underlying~{\vectorspace{$\kf$}}.
    
    \item[Description via a basis:]
      If a basis~$(v_i)_{i \in I}$ of~$V$ is choosen then every tensor power~$V^{\tensor d}$ inherits a basis that is given by all simple tensors
      \[
        v_{i_1} \tensor \dotsb \tensor v_{i_d}
      \]
      with~$i_1, \dotsc, i_d \in I$.
      It follows that the tensor power has as a basis of all such simple tensors with~$d \geq 0$ and~$i_{i_1, \dotsc, i_d} \in I$.
      The product of two such basis vectors is again a basis vector.
      So we may think about the basis vectors as finite words~$i_1 \dotsm i_d$ in the alphabet~$I$, and as the multiplication of two basis vectors as the concatenation of the corresponding words.
      
      If we think about the basis vector~$v_i$ of~$V$ as a formal variable~$X_i$ then we see that the tensor algebra~$\Tensor(V)$ is isomorphic to the noncommutative polynomial ring~$\kf\gen{X_i \suchthat i \in I}$.
      This noncommutative polynomial ring is also the free~{\algebra{$\kf$}} on the generators~$X_i$ with~$i \in I$, while~$V$ is the free~{\vectorspace{$\kf$}} on the letters~$i \in I$.
      This gives another explanation for why~$\Tensor(V)$ is the free~{\algebra{$\kf$}} on the vector space~$V$.
      More exicitely, we have the following commutative diagram of forgetful functors:
      \[
        \begin{tikzcd}
          \cVect{\kf}
          \arrow{d}
          &
          \cAlg{\kf}
          \arrow{l}
          \arrow{dl}
          \\
          \cSet
          &
          {}
        \end{tikzcd}
      \]
      It then follows that the resulting diagram of left adjoint functors
      \[
        \begin{tikzcd}
          \cVect{\kf}
          \arrow{r}[above]{\Tensor}
          &
          \cAlg{\kf}
          \\
          \cSet
          \arrow{u}[left]{F}
          \arrow{ur}[below right]{\kf\gen{X_i \suchthat i \in (-)}}
          &
          {}
        \end{tikzcd}
      \]
      commutes up to natural isomorphism.
      Hence~$\Tensor(V) \cong \Tensor(F(I)) \cong \kf\gen{X_i \suchthat i \in I}$.
  \end{description}
\end{recall}


\begin{recall}[Symmetric power]
  Let~$V$ be a vector space and let~$d \geq 0$.
  The~{\howmanyth{$d$}} \defemph{symmetric power}\index{symmetric!power}~$\Symm^d(V)$ is the quotient vector space of the tensor power~$\Symm^d(V)$ by the~{\linear{$\kf$}} subspace~$U_d$ that is generated by all all differences
  \[
      v_1 \tensor \dotsb \tensor v_d
    - v_{\sigma(1)} \tensor \dotsb \tensor v_{\sigma(d)}
  \]
  where~$v_1 \tensor \dotsb \tensor v_d \in V^{\tensor d}$ is a simple tensor and~$\sigma \in S_n$ is a permuation.
  Hence
  \begin{align*}
    \Symm^d(V)
    &=
    V^{\tensor d} / U_d
    \\
    &=
    V^{\tensor d}
    /
    \gen{
        v_1 \tensor \dotsb \tensor v_d
      - v_{\sigma(1)} \tensor \dotsb \tensor v_{\sigma(d)} 
    \suchthat
      v_1, \dotsc, v_n \in V,
      \sigma \in S_n
    }_{\kf} \,.
  \end{align*}
  Observe that~$\Symm^0(V) = V^{\tensor 0} = \kf$ because~$U_0 = 0$.
  For~$v_1, \dotsc, v_n \in V$ we denote the residue class of the simple tensor~$v_1 \tensor \dotsb \tensor v_d$ in~$\Symm^d(V)$ by~$v_1 \dotsm v_d$, and call this a \defemph{symmetric simple tensor}\index{symmetric!simple tensor}.
  
  We have by construction of~$\Symm^d(V)$ that
  \[
    v_1 \dotsm v_d
    =
    v_{\sigma(1)} \dotsm v_{\sigma(d)}
  \]
  for all simple symmetric tensors~$v_1 \dotsm v_n \in \Symm^d(V)$ and permutations~$\sigma \in S_d$, and for~$d \geq 1$ the symmetric power~$\Symm^d(V)$ is universal with this property in the following sense:
  The map
  \[
    V^{\times d}
    \to
    \Symm^d(V)  \,,
    \quad
    (v_1, \dotsc, v_d)
    \mapsto
    v_1 \dotsm v_d
  \]
  is symmetric and multilinear, and if~$f \colon V^{\times d} \to W$ is any other symmetric multilinear map into any vector space~$W$ then there exists a unique linear map~$g \colon \Symm^d(V) \to W$ that makes the triangular diagram
  \[
    \begin{tikzcd}
      V^{\times d}
      \arrow{d}
      \arrow{dr}[above right]{f}
      &
      {}
      \\
      \Symm^d(V)
      \arrow[dashed]{r}[below]{g}
      &
      W
    \end{tikzcd}
  \]
  commute.
  A linear map~$\Symm^d(V) \to W$ is in this sense the same as a symmetric bilinear map~$V^{\times d} \to W$.
  
  If~$(v_i)_{i \in I}$ is a basis of~$V$ such that~$(I, \leq)$ is a linearly ordered set then the ordered monomials
  \[
    v_{i_1} \dotsm v_{i_d}
    \qquad
    \text{with~$i_1 \leq \dotsb \leq i_d$}
  \]
  form a basis of the symmetric power~$\Symm^d(V)$.
  If~$V$ is of finite dimension~$n$ then it follows that
  \[
    \dim \Symm^d(V)
    =
    \binom{n+d-1}{d}  \,.
  \]
\end{recall}


\begin{recall}[Symmetric algebra]
  Let~$V$ be a vector space.
  Just as the tensor algebra~$\Tensor(V)$ is the free~{\algebra{$\kf$}} on~$V$ and can be constructed by using the tensor powers~$V^{\tensor d}$ we can use the symmetric powers~$\Symm^d(V)$ to construct the \defemph{symmetric algebra}\index{symmetric algebra}~\gls*{symmetric algebra}.
  The argumentation is analogous to that for the tensor algebra, so we will skip some of the details this time.
  
  \begin{description}
    \item[Construction:]
      For all~$v_1, \dotsc, v_d \in V$ we denote the corresponding simple symmetric tensor in~$\Symm^d(V)$ by~$v_1 \dotsm v_d$.
      We can define on~$\Symm(V) \defined \bigoplus_{d \geq 0} \Symm^d(V)$ a multiplication such that
      \[
        (v_1 \dotsm v_p) \cdot (v_{p+1} \dotsm v_{p+q})
        =
        v_1 \dotsm v_p v_{p+1} \dotsm v_{p+q}
      \]
      for all~$p, q \geq 0$ and all simple symmetric tensors~$v_1 \dotsm v_p \in \Symm^p(V)$ and~$v_{p+1}, \dotsc, v_{p+q} \in \Symm^q(V)$.
      By identifying~$\Symm^0(V)$ with the ground field~$\kf$ this makes~$\Symm(V)$ into an associative~{\algebra{$\kf$}}.
      This is already a commutative~{\algebra{$\kf$}} because
      \begin{align*}
        (v_1 \dotsm v_p) \cdot (v_{p+1} \dotsm v_{p+q})
        &=
        v_1 \dotsm v_p v_{p+1} \dotsm v_{p+q}
        \\
        &=
        v_{p+1} \dotsm v_{p+q} v_1 \dotsm v_p
        \\
        &=
        (v_{p+1} \dotsm v_{p+q}) \cdot (v_1 \dotsm v_p)
      \end{align*}
      for all~$p, q \geq 0$ and all simple symmetric tensors~$v_1 \dotsm v_p \in \Symm^p(V)$ and~$v_{p+1}, \dotsc, v_{p+q} \in \Symm^q(V)$. 
      We can identify~$V = \Symm^1(V)$ with the corresponding direct summand of~$\Symm(V)$, and more generally every symmetric power~$\Symm^d(V)$ with the corresponding direct summand of~$\Symm(V)$.
      The algebra~$\Symm(V)$ thus consists of linear combinations of simple symmetric tensors.
      
    \item[Universal property:]
      The symmetric algebra~$\Symm(V)$ is the \enquote{free commutative~{\algebra{$\kf$}}} on the vector space~$V$ in the following sense:
      If~$i \colon V \to \Symm(V)$ is the inclusion then there exists for every~{\algebra{$\kf$}}~$A$ and every linear map~$f \colon V \to A$ a unique algebra homomorphism~$f^+ \colon \Symm(V) \to A$ that makes the triangular diagram
      \[
        \begin{tikzcd}
          V
          \arrow{r}[above]{f}
          \arrow{d}[left]{i}
          &
          A
          \\
          \Symm(V)
          \arrow{ur}[below right]{f^+}
          &
          {}
        \end{tikzcd}
      \]
      commute.
      The algebra homomorphism~$f^+$ is given by
      \[
        f^+(v_1 \dotsm v_d)
        =
        f(v_1) \dotsm f(v_d)
      \]
      for all~$d \geq 0$ and simple symmetric tensors~$v_1, \dotsc, v_d \in V$.
      This construction results in a {\onetoone} correspondence
      \begin{align*}
        \{ \text{\linear{$\kf$} maps~$V \to A$} \}
        &\longonetoone
        \{ \text{algebra homomorphisms~$\Symm(V) \to A$} \} \,,
        \\
        f
        &\longmapsto
        f^+ \,,
        \\
        \restrict{F}{V}
        &\longmapsfrom
        F \,.
      \end{align*}
      
      It follows that a relations between elements of~$V$ holds in the symmetric algebra~$\Symm(V)$ if and only if it holds in every commutative algebra that contains~$V$.
      
    \item[Uniqueness]
      If~$S$ is a commutative~{\algebra{$\kf$}} and~$j \colon V \to S$ is a~{\linear{$\kf$}} such that~$(S, j)$ satisfies the same universal property as the symmetric algebra~$(\Symm(V), i)$  then there exists unique algebra homomorphisms~$f \colon \Symm(V) \to S$ and~$g \colon S \to \Symm(V)$ that make the triangular diagrams
      \[
        \begin{tikzcd}[column sep = small]
          {}
          &
          V
          \arrow{dl}[above left]{i}
          \arrow{dr}[above right]{j}
          &
          {}
          \\
          \Symm(V)
          \arrow[dashed]{rr}[below]{f}
          &
          {}
          &
          S
        \end{tikzcd}
        \qquad\text{and}\qquad
        \begin{tikzcd}[column sep = small]
          {}
          &
          V
          \arrow{dl}[above left]{j}
          \arrow{dr}[above right]{i}
          &
          {}
          \\
          S
          \arrow[dashed]{rr}[below]{g}
          &
          {}
          &
          \Symm(V)
        \end{tikzcd}
      \]
      commute.
      Then~$f$ and~$g$ are mutually inverse algebra isomorphisms.
      
    \item[Functoriality]
      For every linear map~$f \colon V \to W$ there exists a unique induced algebra homomorphism~$f_* \colon \Symm(V) \to \Symm(W)$ that makes the square diagram
      \[
        \begin{tikzcd}
          V
          \arrow{r}[above]{f}
          \arrow{d}
          &
          W
          \arrow{d}
          \\
          \Symm(V)
          \arrow[dashed]{r}[below]{f_*}
          &
          \Symm(W)
        \end{tikzcd}
      \]
      commmute.
      It holds that~$(\id_V)_* = \id_{\Symm(V)}$ and it holds for all composable~{\linear{$\kf$}} maps~$f \colon U \to V$ and~$g \colon V \to W$ that~$(g \circ f)_* = g_* \circ f_*$.
      This construction promotes the assignment~$V \mapsto \Symm(V)$ to a (covariant) functor~$\Symm \colon \cVect{\kf} \to \cCAlg{\kf}$, where~$\cCAlg{\kf}$ denotes the category of commutative~{\algebras{$\kf$}}.
      
    \item[Description via a basis]
      If~$(v_i)_{i \in I}$ is a basis of$~V$ where~$(I, \leq)$ is a linearly ordered set then the symmetric power~$\Symm^d(V)$ inherits a basis that is given by all simple symmetric tensors
      \[
        v_{i_1} \dotsm v_{i_d}
        \qquad
        \text{where~$i_1 \leq \dotsb \leq i_d$} \,.
      \]
      It follows that the symmetric algebra~$\Symm(V)$ has as a basis all simple symmetric tensors~$v_{i_1} \dotsm v_{i_d}$ with~$d \geq 0$ and~$i_1, \dotsc, i_d \in I$ with~$i_1 \leq \dotsb \leq i_d$.
      This basis may also be written as
      \[
        v_{i_1}^{\nu_1} \dotsm v_{i_r}^{\nu_r}
      \]
      with~$r \geq 0$,~$i_1, \dotsc, i_r \in I$ such that~$i_1 < \dotsb < i_r$ and~$\nu_1, \dotsc, \nu_r \geq 0$ (which is connected to the above description via~$d = \nu_1 + \dotsb + \nu_r$).
      
      We see from this description that the symmetric algebra~$\Symm(V)$ is isomorphic to the commutative polynomial ring~$\kf[X_i \suchthat i \in I]$, which is the free commutative~{\algebra{$\kf$}} on the generators~$i \in I$
      This can again be explained by considering the commutative diagram of forgetful functors
      \[
        \begin{tikzcd}
          \cVect{\kf}
          \arrow{d}
          &
          \cCAlg{\kf}
          \arrow{l}
          \arrow{dl}
          \\
          \cSet
          &
          {}
        \end{tikzcd}
      \]
      from which we see that the resulting diagram of left adjoints
      \[
        \begin{tikzcd}
          \cVect{\kf}
          \arrow{r}[above]{\Symm}
          &
          \cCAlg{\kf}
          \\
          \cSet
          \arrow{u}[left]{F}
          \arrow{ur}[below right]{\kf[X_i \suchthat i \in (-)]}
          &
          {}
        \end{tikzcd}
      \]
      commutes up to natural isomorphism.
      
    \item[Contruction via the tensor algbra]
      The symmetric algebra~$\Symm(V)$ can also be constructed as a quotient of the tensor algebra~$\Tensor(V)$.
      We give multiple ways how to see and think about this.
      Let in the following~$i \colon V \to \Tensor(V)$ and~$j \colon V \to \Symm(V)$ denote the 
      \begin{itemize}
        \item
          Let~$I$ be the commutator ideal of~$\Tensor(V)$, i.e.\ the two-sided ideal generated by all commutators
          \[
            x \tensor y - y \tensor x
          \]
          with~$x, y \in \Tensor(V)$.
          Let~$\pi \colon \Tensor(V) \to \Tensor(V)/I$ be the canonical projection.
          Then the quotient~$\Tensor(V)/I$ is commutative, and hence there exists by the universal property of the symmetric algebra a unique algebra homomorphism~$f \colon \Symm(V) \to \Tensor/I$ that makes the diagram
          \[
            \begin{tikzcd}
              {}
              &
              V
              \arrow[bend right]{ddl}[above left]{i}
              \arrow[bend left]{dr}[above right]{j}
              &
              {}
              \\
              {}
              &
              {}
              &
              \Tensor(V)
              \arrow{d}[right]{\pi}
              \\
              \Symm(V)
              \arrow[dashed]{rr}[above]{f}
              &
              {}
              &
              \Tensor(V)/I
            \end{tikzcd}
          \]
          commute.
          The homomorphism~$f$ is on the genareting set~$V$ of~$\Symm(V)$ given by~$f(v) = \class{v}$.
          On the other hand we get from the universal property of the tensor algebra~$\Tensor(V)$ a unique algebra homomorphism~$\tilde{g} \colon \Tensor(V) \to \Symm(V)$ that makes the diagram
          \[
            \begin{tikzcd}
              {}
              &
              V
              \arrow[bend right]{dl}[above left]{j}
              \arrow[bend left]{ddr}[above right]{i}
              &
              {}
              \\
              \Tensor(V)
              \arrow[bend left, dashed]{drr}[above right]{\tilde{g}}
              \arrow{d}[left]{\pi}
              &
              {}
              &
              {}
              \\
              \Tensor(V)/I
              &
              {}
              &
              \Symm(V)
            \end{tikzcd}
          \]
          commute.
          The commutator~$I$ is contained in the kernel of~$\tilde{g}$ because the algebra~$\Symm(V)$ is commutative.
          Hence there exists a unique algebra homomorphism~$g \colon \Tensor(V)/I \to \Symm(V)$ that makes the diagram
          \[
            \begin{tikzcd}
              {}
              &
              V
              \arrow[bend right]{dl}[above left]{j}
              \arrow[bend left]{ddr}[above right]{i}
              &
              {}
              \\
              \Tensor(V)
              \arrow[bend left]{drr}[above right]{\tilde{g}}
              \arrow{d}[left]{\pi}
              &
              {}
              &
              {}
              \\
              \Tensor(V)/I
              \arrow[dashed]{rr}[below]{g}
              &
              {}
              &
              \Symm(V)
            \end{tikzcd}
          \]
          commute.
          The algebra homomorphism~$g$ is given on the generators~$\class{v}$ with~$v \in V$ of~$\tensor(V)/I$ given by~$g(\class{v}) = v$.
          
          It follows from the explicit descriptions of~$f$ and~$g$ on generators that their are mutually inverse algebra isomorphisms.
          Thus~$\Symm(V) \cong \Tensor(V)/I$ via the isomorphism~$f$.
          
          Observe also that the commutator ideal~$I$ is already generated by the commutators~$v \tensor w - w \tensor v$ with~$v, w \in V$.
          Indeed, the ideal~$J$ generated by these elements is contained in~$I$.
          But on the other hand the quotient~$\Tensor(V)/J$ is already commutative because it is generated by the residue classes~$\class{v}$ with~$v \in V$, all of which commute with each other.
          The commutator ideal~$I$ is therefore contained in the kernel of the canonical projection~$\Tensor(V) \to \Tensor(V)/J$, i.e.\ it is containted in~$J$.
          
        \item
          The above argumentatio is not surprising if we remember that~$\Tensor(V)$ is the universal~{\algebra{$\kf$}} on~$V$ and that quotiening out the commutator ideal is the universal way of making an algebra commutative.
          The quotient~$\Tensor(V)/I$ therefore ought to be the universal commutative~{\algebra{$\kf$}}.
          
          This motivation can be formalized by observing that the diagram of forgetful functors
          \[
            \begin{tikzcd}
              \cAlg{\kf}
              \arrow{d}
              &
              \cCAlg{\kf}
              \arrow{l}
              \arrow{dl}
              \\
              \cVect{\kf}
              &
              {}
            \end{tikzcd}
          \]
          commutes.
          It follows that the resulting diagram of left adjoints
          \[
            \begin{tikzcd}
              \cAlg{\kf}
              \arrow{r}[above]{C}
              &
              \cCAlg{\kf}
              \\
              \cVect{\kf}
              \arrow{u}[left]{\Tensor}
              \arrow{ur}[below right]{\Symm}
              &
              {}
            \end{tikzcd}
          \]
          commutes up to natural isomorphism.
          The adjoint~$C$ of the forgetful functor~$\cCAlg{\kf} \to \cAlg{\kf}$ is given by quotiening out the commutator ideal, and hence~$\Symm(V) \cong \Tensor(V)/I$ as before.
        \item
          The above argumentation be also expressed by observing that for every commutative~{\algebra{$\kf$}}~$A$ there exist natural bijections
          \begin{align*}
            {}&
            \{ \text{algebra homomorphisms~$\Symm(V) \to A$} \}
            \\
            \cong{}&
            \{ \text{{\linear{$\kf$}} maps~$V \to A$} \}
            \\
            \cong{}&
            \{ \text{algebra homomorphisms~$\Tensor(V) \to A$} \}
            \\
            \cong{}&
            \{ \text{algebra homomorphisms~$\Tensor(V)/I \to A$} \} \,,
          \end{align*}
          where the last bijection uses that the algebra~$A$ is commutative and therefore every algebra homomorphism~$\Tensor(V) \to A$ contains the commutator ideal~$I$ in its kernel.
          It now follows from Yonedaâ€™s~lemma that~$\Symm(V) \cong \Tensor(V)/I$.
      \end{itemize}
  \end{description}
\end{recall}


\begin{remark}  % TODO: Fix glossary and bigwedge
  One can similarly construct the \emph{exterior algebra}~$\gls*{exterior algebra} = \bigoplus_{d \geq 0} \Exterior^d(V)$ of a vector space~$V$ by replacing the use of the tensor powers~$V^{\tensor d}$ or symmetric powers~$\Symm^d(V)$ by the exterior powers~$\Exterior^d(V)$.
  For any other~{\algebra{$\kf$}}~$A$ an algebra homomorphism~$F \colon \Exterior(V) \to A$ is then the same as a~{\linear{$\kf$}}~$f \colon V \to A$ with~$f(v)^2 = 0$ for every~$v \in V$.
% TODO: Do we have to worry about char(k) = 2?
  It thus follows from a similar argumentation as for the symmetric algebra that~$\Exterior(V) \cong \Tensor(V)/I$ for the two-sided ideal~$I$ in~$\Tensor(V)$ generated by all~$v \tensor v$ with~$v \in V$.
  
  
  If~$V$ is finite dimensional then the exterior algebra~$\Exterior(V)$ is again finite dimensional, namely with~$\dim \Exterior(V) = 2^{\dim V}$.
  This is different to both the tensor algebra~$\Tensor(V)$ and symmetric algebra~$\Symm(V)$, which are infinite dimensional whenever~$V \neq 0$.
\end{remark}






\section{Definition and Construction of the UEA}


\begin{definition}
  A \defemph{universal enveloping algebra}\index{universal enveloping algebra} of a Lie~algebra~$\glie$ is a~\algebra{$\kf$}~\gls*{universal enveloping algebra} together with a homomorphism of Lie~algebras~$\iota \colon \glie \to \Univ(\glie)$ such that for every other~{\algebra{$\kf$}}~$A$ and homomorphism of Lie~algebras~$\phi \colon \glie \to A$ there exists a unique homomorphism of~\algebras{$\kf$}~$\Phi \colon \Univ(\glie) \to A$ that makes the triangular diagram
  \[
    \begin{tikzcd}
      \glie
      \arrow{r}[above]{\phi}
      \arrow{d}[left]{\iota}
      &
      A
      \\
      \Univ(\glie)
      \arrow[dashed]{ur}[below right]{\Phi}
      &
      {}
    \end{tikzcd}
  \]
  commute, i.e.\ such that~$\phi = \Phi \circ \iota$.
\end{definition}


\begin{remark}[Uniqueness of universal enveloping algebras]
  \label{uniqueness of universal enveloping algebras}
  Suppose that a Lie~algebra~$\glie$ admits two {\uas}~$(\Univ(\glie)_1, \iota_1)$ and~$(\Univ(\glie)_2, \iota_2)$.
  Then there exists unique algebra homomorphisms~$\phi \colon \Univ(\glie)_1 \to \Univ(\glie)_2$ and~$\psi \colon \Univ(\glie)_2 \to \Univ(\glie)_1$ that make the triangular diagrams
  \[
    \begin{tikzcd}[column sep = small]
      {}
      &
      \glie
      \arrow{dl}[above left]{\iota_1}
      \arrow{dr}[above right]{\iota_2}
      &
      {}
      \\
      \Univ(\glie)_1
      \arrow[dashed]{rr}[below]{\phi}
      &
      {}
      &
      \Univ(\glie)_2
    \end{tikzcd}
    \qquad\text{and}\qquad
    \begin{tikzcd}[column sep = small]
      {}
      &
      \glie
      \arrow{dl}[above left]{\iota_1}
      \arrow{dr}[above right]{\iota_2}
      &
      {}
      \\
      \Univ(\glie)_2
      \arrow[dashed]{rr}[below]{\phi}
      &
      {}
      &
      \Univ(\glie)_1
    \end{tikzcd}
  \]
  commute.
  It follows that the compositions~$\phi \circ \psi \colon \Univ(\glie)_1 \to \Univ(\glie)_1$ and~$\psi \circ \phi \colon \Univ(\glie)_2 \to \Univ(\glie)_2$ make the triangular diagrams
  \[
    \begin{tikzcd}[column sep = small]
      {}
      &
      \glie
      \arrow{dl}[above left]{\iota_1}
      \arrow{dr}[above right]{\iota_1}
      &
      {}
      \\
      \Univ(\glie)_1
      \arrow[dashed]{rr}[below]{\psi \circ \phi}
      &
      {}
      &
      \Univ(\glie)_1
    \end{tikzcd}
    \qquad\text{and}\qquad
    \begin{tikzcd}[column sep = small]
      {}
      &
      \glie
      \arrow{dl}[above left]{\iota_2}
      \arrow{dr}[above right]{\iota_2}
      &
      {}
      \\
      \Univ(\glie)_2
      \arrow[dashed]{rr}[below]{\phi \circ \psi}
      &
      {}
      &
      \Univ(\glie)_2
    \end{tikzcd}
  \]
  commutes.
  The algebra homomorphisms~$\phi \circ \psi$ and~$\psi \circ \phi$ are unique with this property by the universal property of the {\uas}~$(\Univ(\glie)_1, \iota_1)$ and~$(\Univ(\glie)_2, \iota_2)$.
  But the identities~$\id_{\Univ(\glie)_1}$ and~$\id_{\Univ(\glie)_2}$ also makes these diagrams commute.
  We thus find that~$\psi \circ \phi = \id_{\Univ(\glie)_1}$ and~$\phi \circ \psi = \id_{\Univ(\glie)_2}$, so that~$\phi$ and~$\psi$ are mutually inverse isomorphisms of~{\algebras{$\kf$}}.
  
  This shows that the {\ua} (if it exists) is \enquote{unique up to unique isomorphisms}.
  We will therefore talk about \emph{the} {\ua} of~$\glie$.
  We will often also surpress the algebra homorphism~$\iota \colon \glie \to \Univ(\glie)$ from our notation.
\end{remark}


% \begin{remark}
%   One can also formulate the above argument is a more categorical way:
%   Consider the category~$\catC$ where
%   \begin{itemize}
%     \item
%       objects of~$\catC$ is a pairs~$(A, i)$ consisting of a~{\algebra{$\kf$}}~$A$ and a Lie~algebra homomorphism~$i \colon \glie \to A$,
%     \item
%       a morphism~$\phi \colon (A, i) \to (B, j)$ is an algebra homomorphism~$\phi \colon A \to B$ that makes the triangular diagram
%       \[
%         \begin{tikzcd}[column sep = small]
%         {}
%         &
%         \glie
%         \arrow{dl}[above left]{i}
%         \arrow{dr}[above right]{j}
%         &
%         {}
%         \\
%         A
%         \arrow[dashed]{rr}[below]{\phi}
%         &
%         {}
%         &
%         B
%       \end{tikzcd}
%     \]
%       commute, and
%     \item
%       the composition of two morphisms is just their usual set-theoretic composition.
%   \end{itemize}
%   A {\ua} of~$\glie$ is nothing but an inital object in this category~$\catC$.
%   The argumentation from \cref{uniqueness of universal enveloping algebras} is then the usual argument for the uniqueness of inital objects up to unique isomorphism.
% \end{remark}


\begin{proposition}
  \label{representations are modules}
  Let~$V$ be a~{\vectorspace{$\kf$}}.
  Let~$\glie$ be a Lie~algebra and let~$\iota \colon \glie \to \Univ(\glie)$ be the canonical Lie~algebra homomorphism.
  Then the assignments
  \begin{align*}
    \left\{
    \begin{tabular}{@{}c@{}}
      representations of~$\glie$, \\
      $\rho \colon \glie \to \gllie(V)$
    \end{tabular}
    \right\}
    &\longonetoone
    \left\{
    \begin{tabular}{@{}c@{}}
      $\Univ(\glie)$-module structures \\
      $\theta \colon \Univ(\glie) \to \End_{\kf}(V)$
    \end{tabular}
    \right\}  \,,
    \\
    \rho
    &\longmapsto
    \hat{\rho} \,,
    \\
    \theta \circ \iota
    &\longmapsfrom
    \theta  \,,
  \end{align*}
  constitute a {\onetoone} correspondence,~where $\hat{\rho} \colon \Univ(\glie) \to \End_{\kf}(V)$ is the unique~\algebra{$\kf$} homomorphism induced by the homomorphism of Lie~algebras~$\rho \colon \glie \to \gllie(V)$ via the universal property of the~{\ua}~$\Univ(\glie)$.
  \qed
\end{proposition}


\begin{remark}
  \Cref{representations are modules} shows that representations of~$\glie$ are the same as~{\modules{$\Univ(\glie)$}}.
  The categories~$\cRep{\glie}$ and~$\cMod{\Univ(\glie)}$ are hence isomorphic.
\end{remark}


\begin{lemma}[Functoriality of the universal enveloping algebra]
  \label{functoriality of universal enveloping algebra}
  Let~$\glie$,~$\hlie$ and~$\klie$ be Lie~algebras.
  \begin{enumerate}
    \item
      For every homomorphism of Lie~algebras~$\phi \colon \glie \to \hlie$ there exists a unique induced homomorphism of~\algebras{$\kf$}~$\phi^* \colon \Univ(\glie) \to \Univ(\hlie)$ that makes the following square diagram commute:
      \[
        \begin{tikzcd}[column sep = large]
          \glie
          \arrow{r}[above]{\phi}
          \arrow{d}
          &
          \hlie
          \arrow{d}
          \\
          \Univ(\glie)
          \arrow[dashed]{r}[below]{\phi_*}
          &
          \Univ(\hlie)
        \end{tikzcd}
      \]
    \item
      It holds that~$(\id_{\glie})_* = \id_{\Univ(\glie)}$.
    \item
      It holds for all composable homomorphisms of Lie~algebras~$\phi \colon \glie \to \hlie$ and~$\psi \colon \hlie \to \klie$ that
      \[
        (\psi \circ \phi)_*
        =
        \psi_* \circ \phi_* \,.
      \]
  \end{enumerate}
\end{lemma}


\begin{proof}
  \leavevmode
  \begin{enumerate}
    \item
      This follows from the universal property of the universal enveloping algebra~$\Univ(\glie)$ by applying it to the composition~$\glie \to \hlie \to \Univ(\hlie)$.
    \item
      The square diagram
      \[
        \begin{tikzcd}[column sep = huge]
          \glie
          \arrow{r}[above]{\id_{\glie}}
          \arrow{d}
          &
          \glie
          \arrow{d}
          \\
          \Univ(\glie)
          \arrow[dashed]{r}[below]{\id_{\Univ(\glie)}}
          &
          \Univ(\glie)
        \end{tikzcd}
      \]
      commutes, which shows that~$\id_{\Univ(\glie)}$ satisfies the defining property of the induced algebra homomorphism~$(\id_{\glie})_*$.
    \item
      We have the following commutative diagram:
      \[
        \begin{tikzcd}[column sep = large]
          \glie
          \arrow[dashed, bend left = 40]{rr}[above]{\psi \circ \phi}
          \arrow{r}[above]{\phi}
          \arrow{d}
          &
          \hlie
          \arrow{r}[above]{\psi}
          \arrow{d}
          &
          \klie
          \arrow{d}
          \\
          \Univ(\glie)
          \arrow{r}[below]{\phi_*}
          \arrow[dashed, bend right = 40]{rr}[below]{\psi_* \circ \phi_*}
          &
          \Univ(\hlie)
          \arrow{r}[below]{\psi_*}
          &
          \Univ(\klie)
        \end{tikzcd}
      \]
      The commutativity of the outer square diagram
      \[
        \begin{tikzcd}[column sep = huge]
          \glie
          \arrow{r}[above]{\psi \circ \phi}
          \arrow{d}
          &
          \klie
          \arrow{d}
          \\
          \Univ(\glie)
          \arrow[dashed]{r}[below]{\psi_* \circ \phi_*}
          &
          \Univ(\klie)
        \end{tikzcd}
      \]
      shows that~$\psi_* \circ \phi_*$ satisfies the defining property of the induced algebra homomorphism~$(\psi \circ \phi)_*$.
    \qedhere
  \end{enumerate}
\end{proof}


\begin{remark}
  \Cref{functoriality of universal enveloping algebra} shows that the assignment~$\glie \mapsto \Univ(\glie)$ of a Lie~algebra~$\glie$ to its universal eveloping algebra~$\Univ(\glie)$ can be extended to a (covariant) functor~$\Univ \colon \cLie{\kf} \to \cAlg{\kf}$.
  The universal property of the {\ua} states that the functor~$\Univ$ is left adjoint to the forgetful functor~$\cAlg{\kf} \to \cLie{\kf}$ that assigns to each~{\algebra{$\kf$}} its underlying Lie~algebra.
\end{remark}


\begin{remark}
  Let~$\glie$ be a Lie~algebra.
  It follows from the universal propery of the {\ua} that~$\Univ(\glie)$ is generated by the image of the canonical homomorphism~$\iota \colon \glie \to \Univ(\glie)$:
  
  Indeed, let~$U$ be the subalgebra of~$\Univ(\glie)$ that is generated by the image of~$\iota$, and let~$i \colon \glie \to U$ be the restriction of~$\iota$.
  Then for every~{\algebra{$\kf$}}~$A$ and every Lie~algebra homomorphism~$\phi \colon \glie \to A$ the induced algebra homomorphism~$\Phi' \colon \Univ(\glie) \to A$ restricts to an algebra homomorphism~$\Phi \colon U \to A$ that makes the triangular diagram
  \[
    \begin{tikzcd}
      \glie
      \arrow{r}[above]{\phi}
      \arrow{d}[left]{j}
      &
      A
      \\
      U
      \arrow[dashed]{ur}[below right]{\Phi}
      &
      {}
    \end{tikzcd}
  \]
  commute.
  The homomorphism~$\Phi$ is unique with this property because it is uniquely determined by the restriction~$\Phi \circ j = \phi$, since~$U$ is generated by the image of~$j$.
  This shows that~$(U, j)$ is again a {\ua} for~$\glie$.
  
  It follows from the uniqueness of the {\ua}, as discussed in \cref{uniqueness of universal enveloping algebras}, that the unique algebra homomorphism~$i \colon U \to \Univ(\glie)$ that makes the triangular diagram
  \[
    \begin{tikzcd}[column sep = small]
      {}
      &
      \glie
      \arrow{dl}[above left]{j}
      \arrow{dr}[above right]{\iota}
      &
      {}
      \\
      U
      \arrow[dashed]{rr}[below]{i}
      &
      {}
      &
      \Univ(\glie)
    \end{tikzcd}
  \]
  commute is already an isomorphism.
  This homomorphism is necessarily the inclusion of~$U$ into~$\Univ(\glie)$, and that it is an isomorphism means that already~$U = \Univ(\glie)$.
  
  The canonical homomorphism~$\iota \colon \glie \to \Univ(\glie)$ is in particular~{\linear{$\kf$}} and hence induces an algebra homomorphism~$\phi \colon \Tensor(\glie) \to \Univ(\glie)$ that makes the triangular diagram
  \[
    \begin{tikzcd}[column sep = small]
      {}
      &
      \glie
      \arrow{dl}
      \arrow{dr}[above right]{\iota}
      &
      {}
      \\
      \Tensor(\glie)
      \arrow[dashed]{rr}[below]{\phi}
      &
      {}
      &
      \Univ(\glie)
    \end{tikzcd}
  \]
  commute.
  That~$\Univ(\glie)$ is generated by the image of~$\iota$ means that~$\phi$ is surjective.
  Therefore~$\phi$ induces an algebra isomorphism
  \[
    \Phi
    \colon
    \Tensor(\glie)/I
    \to
    \Univ(\glie)
  \]
  for~$I = \ker \phi$, that makes the resulting diagram
   \[
    \begin{tikzcd}[column sep = small]
      {}
      &
      \glie
      \arrow[bend right]{dl}
      \arrow[bend left]{ddr}[above right]{\iota}
      &
      {}
      \\
      \Tensor(\glie)
      \arrow[bend left]{drr}[below left]{\phi}
      \arrow{d}
      &
      {}
      &
      {}
      \\
      \Tensor(\glie)/I
      \arrow[dashed]{rr}[below]{\Phi}
      &
      {}
      &
      \Univ(\glie)
    \end{tikzcd}
  \]
  commute.
  
  If~$A$ is any other~{\algebra{$\kf$}} then we know on the one hand that algebra homorphisms~$\Univ(\glie) \to A$ correspond to Lie~algebra homomorphisms~$\glie \to A$.
  We know find on the other hand that~{\algebra{$\kf$}} homomorphisms~$\Tensor(V)/I \to A$ correspond to algebra homomorphisms~$\Tensor(V) \to A$ that annihilate~$I$, with the algebra homorphisms~$\Tensor(V) \to A$ corresponding to~{\linear{$\kf$}} maps~$\glie \to A$.
  A linear map~$f \colon \glie \to A$ is a homorphism of Lie~algebras if and only if
  \[
      f(x)f(y)
    - f(y)f(x)
    - f([x,y])
    =
    0 \,,
  \]
  so it seems reasonable to assume that the corresponding ideal~$I$ of~$\Tensor(V)$ ought to be given by
  \[
    I
    =
    (x \tensor y - y \tensor x - [x,y] \suchthat x, y \in \glie)
  \]
  We will now show that this is indeed the case.
\end{remark}


\begin{proposition}[Existence of the universal enveloping algebra]
  Let~$\glie$ be a Lie~algebra.
  Let~$\Tensor(\glie)$ be the tensor algebra of the underlying vector space of~$\glie$ and let~$I$ the two-sided ideal in~$\Tensor(\glie)$ generated by the elements $x \tensor y - y \tensor x - [x,y]$ with~$x,y \in \glie$.
  The the quotient algebra~$U \defined T(\glie)/I$ together with the~{\linear{$\kf$}} map
  \[
    i
    \colon
    \glie
    \to
    \Univ(\glie) \,,
    \quad
    x
    \mapsto
    \class{x}
  \]
  is a {\ua} for~$\glie$.
\end{proposition}


\begin{proof}
  The map~$i$ is~{\linear{$\kf$}} and it compatible with the Lie brackets because
  \[
    [i(x), i(y)]
    =
    [\class{x}, \class{y}]
    =
    \class{x} \, \class{y} - \class{y} \, \class{x}
    =
    \class{x \tensor y - y \tensor x}
    =
    \class{[x,y]}
    =
    i([x,y]) \,.
  \]
  Given any~{\algebra{$\kf$}}~$A$ and Lie algebra homomorphism~$\phi \colon \glie \to A$ there exists a unique homorphism of~{\algebras{$\kf$}}~$\Phi' \colon \Tensor(\glie) \to A$ that makes the triangular diagram
  \[
    \begin{tikzcd}
      \glie
      \arrow{r}[above]{\phi}
      \arrow{d}[left]{\iota}
      &
      A
      \\
      \Tensor(V)
      \arrow[dashed]{ur}[below right]{\Phi'}
      &
      {}
    \end{tikzcd}
  \]
  commute, where~$\iota \colon \glie \to \Tensor(\glie)$ is the inclusion.
  The homomorphism~$\Phi'$ is given by~$\Phi'(x) = \phi(x)$ for every~$x \in \glie$.
  It follows that
  \begin{align*}
    \Phi'(x \tensor y - y \tensor x)
    &=
    \Phi'(x \tensor y) - \Phi'(y \tensor x)
    \\
    &=
    \Phi'(x) \Phi'(y) - \Phi'(y) \Phi'(x)
    \\
    &=
    \phi(x) \phi(y) - \phi(y) \phi(x)
    \\
    &=
    [\phi(x), \phi(y)]
    \\
    &=
    \phi([x,y])
    \\
    &=
    \Phi'([x,y])
  \end{align*}
  for all~$x, y \in \glie$, so that the ideal~$I$ is contained in the kernel of~$\Phi'$.
  It follows that there exists a unique algebra homomorphism~$\Phi \colon \Tensor(\glie)/I \to A$ that makes the triangular diagram
  \[
    \begin{tikzcd}
      \glie
      \arrow{r}[above]{\phi}
      \arrow{d}[left]{\iota}
      \arrow[bend right = 55]{dd}[left]{i}
      &
      A
      \\
      \Tensor(\glie)
      \arrow[bend right= 20]{ur}[above left]{\Phi'}
      \arrow{d}[left]{\pi}
      &
      {}
      \\
      \Tensor(\glie)/I
      \arrow[dashed, bend right = 30]{uur}[below right]{\Phi}
      &
      {}
    \end{tikzcd}
  \]
  commute, where~$\pi \colon \Tensor(V) \to \Tensor(V)/I$ denotes the canonical projection.
  Then the subdiagram
  \[
    \begin{tikzcd}
      \glie
      \arrow{r}[above]{\phi}
      \arrow{d}[left]{i}
      &
      A
      \\
      \Tensor(\glie)/I
      \arrow{ur}[below right]{\Phi}
      &
      {}
    \end{tikzcd}
  \]
  commutes.
  That~$\Phi$ is unique with this property follows from the uniqueness of~$\Phi'$.
\end{proof}


\begin{remark}
  The above proof may be reorganized by observing that we have bijections
  \begin{align*}
    {}&
    \{ \text{algebra homomorphisms~$\Phi \colon \Tensor(\glie)/I \to A$} \}
    \\
    \cong{}&
    \{ \text{algebra homomorphisms~$\Phi' \colon \Tensor(\glie) \to A$ with~$\Phi'(I) = 0$} \}
    \\
    \cong{}&
    \left\{
      \begin{tabular}{@{}c@{}}
        algebra homomorphisms~$\Phi' \colon \Tensor(\glie) \to A$ with  \\
        $\Phi'(x \tensor y - y \tensor x - [x,y]) = 0$ for all~$x, y \in \glie$
      \end{tabular}
    \right\}
    \\
    \cong{}&
    \left\{
      \begin{tabular}{@{}c@{}}
        algebra homomorphisms~$\Phi' \colon \Tensor(\glie) \to A$ with  \\
        $\Phi'(x) \Phi'(y) - \Phi'(y) \Phi'(x) - \Phi'([x,y]) = 0$ for all~$x, y \in \glie$
      \end{tabular}
    \right\}
    \\
    \cong{}&
    \left\{
      \begin{tabular}{@{}c@{}}
        algebra homomorphisms~$\Phi' \colon \Tensor(\glie) \to A$ with  \\
        $\Phi'(x) \Phi'(y) - \Phi'(y) \Phi'(x) = \Phi'([x,y])$ for all~$x, y \in \glie$
      \end{tabular}
    \right\}
    \\
    \cong{}&
    \left\{
      \begin{tabular}{@{}c@{}}
        {\linear{$\kf$}} maps~$\phi \colon \glie \to A$ with  \\
        $\phi(x) \phi(y) - \phi(y) \phi(x) = \phi([x,y])$ for all~$x, y \in \glie$
      \end{tabular}
    \right\}
    \\
    \cong{}&
    \left\{
      \begin{tabular}{@{}c@{}}
        {\linear{$\kf$}} maps~$\phi \colon \glie \to A$ with  \\
        $[\phi(x), \phi(y)] = \phi([x,y])$ for all~$x, y \in \glie$ 
      \end{tabular}
    \right\}
    \\
    ={}&
    \{ \text{Lie~algebra homomorphisms~$\phi \colon \glie \to A$} \}
  \end{align*}
  that are natural in~$A$.
  This shows that the~{\algebra{$\kf$}}~$\Tensor(\glie)/I$ represented the right kind of functor;
  and the identity~$\Tensor(\glie)/I \to \Tensor(\glie)/I$ corresponds under the above bijections to the map~$\iota \colon \glie \to \Tensor(\glie)/I$ as desired.
\end{remark}





\subsection{Examples}



\subsubsection{Abelian Lie~Algebras}


\begin{examples}
  Let~$\glie$ be an abelian Lie~algebra.
  It follows from the explicit construction of the universal enveloping algebra~$\Univ(\glie)$ that
  \[
    \Univ(\glie)
    \cong
    \Tensor(\glie)/(x \tensor y - y \tensor x \suchthat x, y \in \glie)
    \cong
    \Symm(\glie)
  \]
  with the canonical Lie~algebra homomorphism~$\glie \to \Univ(\glie)$ corresponding to the inclusion~$\glie \to \Symm(\glie)$.
  This can also be seen more abstractly:
  
  We observe that if~$V$ is a vector space and~$A$ is an algebra then a linear map~$f \colon V \to A$ extends to an algebra homomorphism~$\Symm(V) \to A$ (necessarily uniquely) if and only if the image of~$f$ is contained in a commutative subalgebra of~$A$, if and only if the image of~$f$ is commutative.
  It hence follows that for any~{\algebra{$\kf$}} we have bijections
  \begin{align*}
    {}&
    \{ \text{Lie~algebra homomorphisms~$\glie \to A$} \}
    \\
    \cong{}&
    \{ \text{{\linear{$\kf$}} maps~$\glie \to A$ with commutative image} \}
    \\
    \cong{}&
    \{ \text{algebra homomorphisms~$\Symm(\glie) \to A$} \}
  \end{align*}
  that are natural in~$A$.
  This shows that the symmetric algebra~$\Symm(\glie)$ together with the inclusion~$\glie \to \Symm(\glie)$ satisfies the universal property of the universal enveloping algebra of~$\glie$.
\end{examples}



\subsubsection{Products of Lie~Algebras}


\begin{recall}
  \label{homomorphism out of a tensor product}
  Let~$A$ and~$B$ be two~{\algebras{$\kf$}}.
  Then the inclusions~$i \colon A \to A \tensor B$ and~$j \colon B \to A \tensor B$ are injective algebra homomorphisms.
  We may therefore identify~$A$ and~$B$ with the subalgebras~$A \tensor 1$ and~$1 \tensor B$ of~$A \tensor B$.
  Note that~$A$ and~$B$ commute in~$A \tensor B$ because
  \[
    i(a) j(b)
    =
    (a \tensor 1) (b \tensor 1)
    =
    a \tensor b
    =
    (b \tensor 1) (a \tensor 1)
    =
    j(b) i(a)
  \]
  for all~$a \in A$ and~$b \in B$.
  
  Let~$C$ be another~{\algebra{$\kf$}}.
  
  If~$f \colon A \tensor B \to C$ is an algebra homomorphism then the restrictions~$\phi = f \circ i$ and~$\psi = f \circ j$ are again algebra homomorphisms~$\phi \colon A \to C$ and~$\psi \colon B \to C$.
  The images of~$\phi$ and~$\psi$ in~$C$ commute with each other because~$A$ and~$B$ commute in~$A \tensor B$.
  More explicitely,
  \begin{align*}
    \phi(a) \psi(b)
    &=
    f(a \tensor 1) f(1 \tensor b)
    \\
    &=
    f((a \tensor 1) (1 \tensor b))
    \\
    &=
    f(a \tensor b)
    \\
    &=
    f((1 \tensor b) (a \tensor 1))
    \\
    &=
    f(1 \tensor b) f(a \tensor 1)
    \\
    &=
    \psi(b) \phi(a)
  \end{align*}
  for all~$a \in A$ and~$b \in B$.
  
  If on the other hand~$\phi \colon A \to C$ and~$\psi \colon B \to C$ are two algebra homomorphisms whose images commute with each other then the map
  \[
    f'
    \colon
    A \times B
    \to
    C \,,
    \quad
    (a,b)
    \mapsto
    \phi(a) \psi(b)
  \]
  is~{\bilinear{$\kf$}} and hence induces a~{\linear{$\kf$}} map
  \[
    f
    \colon
    A \tensor B
    \to
    C \,,
    \quad
    a \tensor b
    \mapsto
    \phi(a) \psi(b) \,.
  \]
  The map~$f$ is again an algebra homomorphism because
  \begin{align*}
    f(a_1 \tensor b_1) f(a_2 \tensor b_2)
    &=
    \phi(a_1) \psi(b_1) \phi(a_2) \psi(b_2)
    \\
    &=
    \phi(a_1) \phi(a_2) \psi(b_1) \psi(b_2)
    \\
    &=
    \phi(a_1 a_2) \psi(b_1 b_2)
    \\
    &=
    f( (a_1 a_2) \tensor (b_1 b_2) )
    \\
    &=
    f( (a_1 \tensor b_1) (a_2 \tensor b_2) )
  \end{align*}
  for all simple tensors~$a \tensor b \in A \tensor B$.
  
  These constructions are mutually inverse and hence result in a {\onetoone} correspondence
  \begin{align*}
    \left\{
      \begin{tabular}{@{}c@{}}
        algebra homomorphisms \\
        $f \colon A \tensor B \to C$
      \end{tabular}
    \right\}
    &\longonetoone
    \left\{
      (\phi, \psi)
    \suchthat*
      \begin{tabular}{@{}c@{}}
        algebra homomorphisms \\
        $\phi \colon A \to C$ and~$\psi \colon B \to C$ \\
        whose images commute with each other
      \end{tabular}
    \right\}  \,,
    \\
    f
    &\longmapsto
    (f \circ i, f \circ j)  \,,
    \\
    \biggl( a \tensor b \mapsto \phi(a)\psi(b) \biggr)
    &\longmapsfrom
    (\phi, \psi)  \,.
  \end{align*}
\end{recall}


\begin{example}
  If~$\glie$ and~$\hlie$ be two Lie~algebras then
  \[
    \Univ(\glie \times \hlie)
    \cong
    \Univ(\glie) \tensor \Univ(\hlie) \,.
  \]
  This can be seen in various ways:
  \begin{itemize}
    \item
      It follows from \cref{homomorphism out of a product} and \cref{homomorphism out of a tensor product} that we get for every~{\algebra{$\kf$}}~$A$ bijections
      \begin{align*}
        {}&
        \{ \text{algebra homomorphisms~$F \colon \Univ(\glie \times \hlie) \to A$} \}
        \\
        \cong{}&
        \{ \text{Lie~algebra homomorphisms~$f \colon \glie \times \hlie \to A$} \}
        \\
        \cong{}&
        \left\{
          \begin{tabular}{@{}c@{}}
            Lie~algebra homomorphisms \\
            $\phi \colon \glie \to A$ and~$\psi \colon \hlie \to A$ \\
            whose images commute with each other
          \end{tabular}
        \right\}
        \\
        \cong{}&
        \left\{
          \begin{tabular}{@{}c@{}}
            algebra homomorphisms \\
            $\Phi \colon \Univ(\glie) \to A$ and~$\Psi \colon \Univ(\hlie) \to A$ \\
            whose images commute with each other
          \end{tabular}
        \right\}
        \\
        \cong{}&
        \{ \text{algebra homomorphims~$F \colon \Univ(\glie) \tensor \Univ(\hlie) \to A$} \}  \,.
      \end{align*}
      The claimed isomorphism therefore follows from Yonedaâ€™s lemma.
    \item
      More explicitely let~$i \colon \glie \to \glie \times \hlie$ and~$j \colon \hlie \to \glie \times \hlie$ be the canonical inclusions.
      Then for the induced algebra homomorphisms~$i_* \colon \Univ(\glie) \to \Univ(\glie \times \hlie)$ and~$j_* \colon \Univ(\hlie) \to \Univ(\glie \times \hlie)$ the images of~$i_*$ of~$j_*$ commute with each other.
      Indeed, the algebra~$\Univ(\glie \times \hlie)$ is generated by the image of~$\glie \times \hlie$ in~$\Univ(\glie \times \hlie)$, and~$i(\glie)$ and~$j(\hlie)$ commute in~$\glie \times \hlie$.
      Therefore
      \[
        i_*(\class{x}) j_*(\class{y})
        =
        \class{(x,0)} \class{(0,y)}
        =
        \class{(0,y)} \class{(x,0)}
        =
        j_*(\class{y}) i_*(\class{x}) \,,
      \]
      for all~$x \in \glie$ and~$y \in \hlie$, where we denote by~$\class{(-)}$ the corresponding elements of the {\uas}.
      We used for the middle equality that~$(x,0)$ and~$(0,y)$ commute in~$\glie \times \hlie$ and hence also in~$\Univ(\glie \times \hlie)$.
      
      It follows that~$i_*$ and~$j_*$ induce a common algebra homomorphism
      \[
        \phi
        \colon
        \Univ(\glie) \tensor \Univ(\hlie)
        \to
        \Univ(\glie \times \hlie) \,,
      \]
      that is given on elements by
      \[
        \phi(x \tensor y)
        =
        i_*(x) j_*(y)
      \]
      for all simple tensors~$x \tensor y \in \Univ(\glie) \tensor \Univ(\hlie)$.
      It holds in particular for all~$x \in \glie$ and~$y \in \glie$ that
      \[
        \phi(\class{x} \tensor \class{y})
        =
        i_*(\class{x}) j_*(\class{y})
        =
        \class{i(x)} \cdot \class{j(y)}
        =
        \class{(x,0)} \cdot \class{(0,y)}  \,,
      \]
      We observe that the map
      \[
        \psi'
        \colon
        \glie \times \hlie
        \to
        \Univ(\glie) \tensor \Univ(\hlie) \,,
        \quad
        (x,y)
        \mapsto
        \class{(x,0)} \tensor 1 + 1 \tensor \class{(0,y)} \,.
      \]
      To construct the inverse~$\psi$ of~$\phi$ we observe that the equalities
      \[
        \psi( \class{(x,0)} )
        =
        \psi( \class{(x,0)} \cdot 1 )
        =
        \psi( i_*(\class{x}) \cdot j_*(1) )
        =
        \psi( \phi(\class{x} \tensor 1) )
        =
        \class{x} \tensor 1
      \]
      and similarly~$\psi( \class{(0,y)} ) = 1 \tensor \class{y}$ have to hold for all~$x \in \glie$ and~$y \in \glie$.
      It then follows that more generally
      \[
        \psi( \class{(x,y)} )
        =
        \psi( \class{(x,0)} + \class{(0,y)} )
        =
        \class{x} \tensor 1 + 1 \tensor \class{y}
      \]
      for all~$(x,y) \in \glie \times \hlie$.
      
      Motivated by these observations we consider the map
      \[
        \psi'
        \colon
        \glie \times \hlie
        \to
        \Univ(\glie) \tensor \Univ(\hlie)
      \]
      that is given by
      \[
        \psi'((x,y))
        =
        \class{x} \tensor 1 + 1 \tensor \class{y} \,.
      \]
      This map is~{\linear{$\kf$}} and it is a homomorphism of Lie~algebras because
      \begin{align*}
        {}&
        [\psi'((x_1, y_1)), \psi'((x_2, y_2))]
        \\
        ={}&
        [
          \class{x_1} \tensor 1 + 1 \tensor \class{y_1},
          \class{x_2} \tensor 1 + 1 \tensor \class{y_2}
        ]
        \\
        ={}&
          [\class{x_1} \tensor 1, \class{x_2} \tensor 1]
        + \underbrace{ [\class{x_1} \tensor 1, 1 \tensor \class{y_2}] }_{=0}
        + \underbrace{ [1 \tensor \class{y_1}, \class{x_2} \tensor 1] }_{=0}
        + [1 \tensor \class{y_1}, 1 \tensor \class{y_2}]
        \\
        ={}&
          [\class{x_1}, \class{x_2}] \tensor 1
        + 1 \tensor [\class{y_1}, \class{y_2}]
        \\
        ={}&
          \class{[x_1, x_2]} \tensor 1
        + 1 \tensor \class{[y_1, y_2]}  \,.
        \\
        ={}&
        \psi'( ( [x_1, x_2], [y_1, y_2] ) )
        \\
        ={}&
        \psi'( [(x_1, y_1), (x_2, y_2)] ) \,.
      \end{align*}
      It hence follows from the universal property of the {\ua}~$\Univ(\glie \times \hlie)$ that there exists a unique algebra homomorphism~$\psi \colon \Univ(\glie \times \hlie) \to \Univ(\glie) \tensor \Univ(\hlie)$ that makes the triangular diagram
      \[
        \begin{tikzcd}[row sep = large]
          \glie \times \hlie
          \arrow{r}[above]{\psi'}
          \arrow{d}[left]{\class{(-)}}
          &
          \Univ(\glie) \tensor \Univ(\hlie)
          \\
          \Univ(\glie \times \hlie)
          \arrow[dashed]{ur}[below right]{\psi}
          &
          {}
        \end{tikzcd}
      \]
      commute.
      This homomorphism~$\psi$ is given for all~$(x, y) \in \glie \times \hlie$ by
      \[
        \psi( \class{(x,y)} )
        =
        \class{x} \tensor 1 + 1 \tensor \class{y} \,.
      \]
      
      The homomorphisms~$\phi$ and~$\psi$ are mutually inverse:
      It sufficies to check this on the generators~$\class{x} \tensor \class{y}$ of~$\Univ(\glie) \tensor \Univ(\hlie)$ with~$x \in \glie$ and~$y \in \hlie$, and on the generators~$\class{(x,y)}$ of~$\Univ(\glie \times \hlie)$ with~$(x,y) \in \glie \times \hlie$.
      And indeed, we find that
      \begin{align*}
        \phi( \psi( \class{(x,y)} ) )
        &=
        \phi( \class{x} \tensor 1 + 1 \tensor \class{y} )
        \\
        &=
        \phi( \class{x} \tensor 1 ) + \phi( 1 \tensor \class{y} )
        \\
        &=
        i_*(\class{x}) j_*(1) + i_*(1) j_*(\class{y})
        \\
        &=
        \class{i(x)} + \class{j(y)}
        \\
        &=
        \class{(x,0)} + \class{(0,y)}
        \\
        &=
        \class{(x,y)}
      \end{align*}
      and
      \begin{align*}
        \psi( \phi( \class{x} \tensor \class{y} ) )
        &=
        \psi( i_*(\class{x}) j_*(\class{y}) )
        \\
        &=
        \psi( \class{(x,0)} \class{(0,y)} )
        \\
        &=
        \psi( \class{(x,0)} ) \psi( \class{(0,y)} )
        \\
        &=
        ( \class{x} \tensor 1 + 1 \tensor 0 ) ( 0 \tensor 1 + 1 \tensor \class{y} )
        \\
        &=
        (\class{x} \tensor 1) (1 \tensor \class{y})
        \\
        &=
        \class{x} \tensor \class{y} \,.
      \end{align*}
  \end{itemize}
\end{example}



\subsubsection{Free Lie~Algebras}


\begin{definition}
  Let~$X$ be a set.
  A~\defemph{free~{\liealgebra{$\kf$}} on~$X$}\index{free Lie algebra}\index{Lie algebra!free} is a~{\liealgebra{$\kf$}}~$F(X)$ together with a map~$\iota \colon X \to F(X)$ such that for every~{\liealgebra{$\kf$}}~$\glie$ and every map~$\phi \colon X \to \glie$ there exists a unique homomorphism of Lie~algebras~$\Phi \colon F(X) \to \glie$ with~$\phi = \Phi \circ \iota$, i.e.\ that makes the following triangular diagram commute:
  \[
    \begin{tikzcd}
      X
      \arrow{dr}[above right]{\phi}
      \arrow{d}[left]{\iota}
      &
      {}
      \\
      F(X)
      \arrow[dashed]{r}[below]{\Phi}
      &
      \glie
    \end{tikzcd}
  \]
\end{definition}


\begin{remark}
  \leavevmode
  \begin{enumerate}
    \item
      One may reformulate the above definition as saying that there exists for every~$x \in X$ an associated element~$\class{x} \in F(X)$ and that whenever~$\hlie$ is any Lie~algebra then there exist for every choice of images~$y_x \in \hlie$ with~$x \in X$ a unique homomorphism of Lie~algebras~$F(X) \to \hlie$ that maps~$\class{x}$ to~$y_x$.
    \item
      As usual with free objects it follows that any two free Lie~algebras over a set~$X$ are unique up to unique isomorphism:
      If~$F_1$ with~$\iota_1 \colon X \to F_1$ and~$F_2$ with~$\iota_2 \colon X \to F_2$ are two~free~{\liealgebras{$\kf$}} over~$X$ then there exist unique homomorphisms of Lie~algebras~$\phi \colon F_1 \to F_2$ and~$\psi \colon F_2 \to F_1$ that make the triangular diagrams
      \[
        \begin{tikzcd}[column sep = small]
          {}
          &
          X
          \arrow{dl}[above left]{\iota_1}
          \arrow{dr}[above right]{\iota_2}
          &
          {}
          \\
          F_1
          \arrow[dashed]{rr}[below]{\phi}
          &
          {}
          &
          F_2
        \end{tikzcd}
        \qquad\text{and}\qquad
        \begin{tikzcd}[column sep = small]
          {}
          &
          X
          \arrow{dl}[above left]{\iota_2}
          \arrow{dr}[above right]{\iota_1}
          &
          {}
          \\
          F_2
          \arrow[dashed]{rr}[below]{\psi}
          &
          {}
          &
          F_1
        \end{tikzcd}
      \]
      commute.
      The homomorphisms~$\phi$ and~$\psi$ are now mutually inverse isomorphisms.
      We will therefore always talk about \emph{the} free~{\liealgebra{$\kf$}} over~$X$.
    \item
      For every map between sets~$f \colon X \to Y$ there exists a unique homomorphism of Lie~algebras~$f_* \colon F(X) \to F(Y)$ that makes the square diagram
      \[
        \begin{tikzcd}
          X
          \arrow{r}[above]{f}
          \arrow{d}[left]{\iota_X}
          &
          Y
          \arrow{d}[right]{\iota_Y}
          \\
          F(X)
          \arrow[dashed]{r}[below]{f_*}
          &
          F(Y)
        \end{tikzcd}
      \]
      commute.
      It holds for every set~$X$ that~$(\id_X)_* = \id_{F(X)}$ and it holds for all composable maps of sets~$f \colon X \to Y$ and~$g \colon Y \to Z$ that~$(g \circ f)_* = g_* \circ f_*$.
      We therefore get a functor~$F \colon \cSet \to \cLie{\kf}$.
      
      The universal property of the free Lie~algebra states that the functor~$F$ is left adjoint to the forgetful functor~$\cLie{\kf} \to \cSet$.
  \end{enumerate}
\end{remark}


\begin{example}[Free Lie~algebras]
  \label{uea of free lie algebra}
  Let~$I$ be a set and let~$F(I)$ be the free~{\liealgebra{$\kf$}} on~$I$.
  We have for every~{\algebra{$\kf$}}~$A$ bijections
  \begin{align*}
    {}&
    \{ \text{algebra homomorphisms~$\Univ(F(I)) \to A$} \}
    \\
    \cong&
    \{ \text{Lie~algebra homomorphisms~$F(I) \to A$} \}
    \\
    \cong&
    \{ \text{set-theoretic maps~$I \to A$} \}
    \\\
    \cong&
    \{ \text{algebra homomorphisms~$\kf\gen{x_i \suchthat i \in I} \to A$} \} \,,
  \end{align*}
  and these bijections are natural in~$A$.
  We hence find by Yonedaâ€™s~lemma that~$\Univ(F(I)) \cong \kf\gen{x_i \suchthat i \in I}$.
  More precisely, there exists for the composition~$I \to F(I) \to \Univ(F(I))$ a unique algebra homomorphism~$\phi \colon \kf\gen{x_i \suchthat i \in I} \to \Univ(F(I))$ that makes the diagram
  \[
    \begin{tikzcd}
        {}
      & I
        \arrow[bend right, out = -45, in=225]{ddl}[above left]{i \mapsto x_i}
        \arrow[bend left]{dr}[above right]{\iota}
      & {}
      \\
        {}
      & {}
      & F(I)
        \arrow{d}
      \\
        \kf\gen{x_i \suchthat i \in I}
        \arrow[dashed]{rr}[below]{\phi}
      & {}
      & \Univ(F(I))
    \end{tikzcd}
  \]
  commute, and~$\phi$ is an isomorphism.
\end{example}









\section{The Poincar\'{e}--Birkhoff--Witt Theorem}



\subsection{Graded \texorpdfstring{$\kf$}{k}-Algebras}


\begin{definition}
  \label{graded algebras}
  A \defemph{grading}\index{grading!of an algebra} or \defemph{gradation} of a~\algebra{$\kf$}~$A$ is a direct sum decomposition
  \[
    A
    =
    \bigoplus_{i \geq 0} A_i
  \]
  into linear subspaces~$A_i$ such that
  \[
    A_i A_j
    \subseteq
    A_{i+j}
  \]
  for all~$i, j \geq 0$.
  A \defemph{graded~\algebra{$\kf$}}\index{graded!algebra} is a~\algebra{$\kf$}~$A$ together with a grading~$A = \bigoplus_{i \geq 0} A_i$.
\end{definition}


\begin{remark}
  We will often just say that~$A$ is a graded algebra without mentioning the grading.
\end{remark}


\begin{remark}
  Given any abelian semigroup~$(S, +)$ an~\defemph{\grading{$S$}}\index{grading} of a~\algebra{$\kf$}~$A$ is a decomposition
  \[
    A
    =
    \bigoplus_{s \in S} A_s
  \]
  into linear subspaces such that
  \[
    A_s A_t
    \subseteq
    A_{s + t}
  \]
  for all~$s,t \in S$.
  An~{\graded{$S$}}~\algebra{$\kf$} is a~\algebra{$\kf$}~$A$ together with an~\grading{$S$}~$A = \bigoplus_{s \in S} A_s$.
  A graded~\algebra{$\kf$} in the sense of \cref{graded algebras} is then the special case of an~{\graded{$\Natural$}}~\algebra{$\kf$}.
  We will restrict our attention to~{\gradings{$\Natural$}} and refer to \cite[II.{\S}11, III.{\S}3]{bourbaki_algebra} for more general gradings.
\end{remark}


\begin{definition}
  Let~$A$ be a graded~{\algebra{$\kf$}} with grading~$A = \bigoplus_{i \geq 0} A_i$.
  \begin{enumerate}
    \item
      An element~$x \in A$ is \defemph{homogeneous}\index{homogeneous!element} of \defemph{degree}~$i$\index{homogeneous!degree}\index{degree!homogeneous} if~$x \in A_i$.
    \item
      If the decomposition of~$x \in A$ with respect to the grading~$A = \bigoplus_{i \geq 0} A_i$ is given by~$x = \sum_{i \geq 0} x_i$ then the summands~$x_i$ are the~\defemph{homogeneous components}\index{homogeneous!component} of~$x$.
  \end{enumerate}
\end{definition}


\begin{lemma}
  If~$A$ is a graded~\algebra{$\kf$} then~$1_A$ is homogeneous of degree~$0$.
\end{lemma}


\begin{proof}
  Let~$1 = \sum_{i \geq 0} e_i$ with respect to the grading~$A = \bigoplus_{i \geq 0} A_i$.
  Then for any~$j \geq 0$ and~$a \in A_j$ we have that
  \[
    a
    =
    1 \cdot a
    =
    \left( \sum_{i \geq 0} e_i \right) \cdot a
    =
    \sum_{i \geq 0} \underbrace{ e_i a }_{\in A_{i+j}}  \,,
  \]
  and it follows from the directness of the decomposition~$A = \bigoplus_{i \geq 0} A_i$ that already~$a = e_0 a$.
  It follows that~$e_0 a = a$ for every~$a \in A$, so that already~$1 = e_0$.
\end{proof}


\begin{corollary}
  If~$A$ is a graded~\algebra{$\kf$} then~$A_0$ is a~{\subalgebra{$\kf$}} of~$A$.
  \qed
\end{corollary}



\begin{examples}
  \label{examples of graded algebras}
  \leavevmode
  \begin{enumerate}
    \item
      Any~\algebra{$\kf$}~$A$ becomes a graded~\algebra{$\kf$} by setting~$A_0 \defined A$ and~$A_i \defined 0$ for every~$i \geq 1$.
    \item
      The polynomial ring~$A = \kf[x_i \suchthat i \in I]$ is a graded~\algebra{$\kf$} by setting
      \[
        A_d
        \defined
        \gen{
          x_{i_1}^{p_1} \dotsm x_{i_n}^{p_n}
        \suchthat
          n \geq 0,
          i_1, \dotsc, i_n \in I,
          p_1 + \dotsb + p_n = d
        }_{\kf}
      \]
      for every~$d \geq 0$.
      Then~$A_d$ consists of the homogeneous polynomials of degree~$d$, and the monomials~$x_{i_1}^{p_1} \dotsm x_{i_n}^{p_n}$ are homogeneous of degree~$p_1 + \dotsb + p_n$.
      
      We can more generally put the variable~$x_i$ is any degree~$d_i$:
      Given any family~$(d_i)_{i \in I}$ of natural numbers~$d_i \geq 0$ we can define a grading on~$A$ via
      \[
        A_d
        \defined
        \gen{
          x_{i_1}^{p_1} \dotsm x_{i_n}^{p_n}
        \suchthat
          n \geq 0,
          i_1, \dotsc, i_n \in I,
          p_1 d_1 + \dotsb + p_n d_n = d
        }_\kf
      \]
      for every~$d \geq 0$.
      Then the monomials~$x_{i_1}^{p_1} \dotsm x_{i_n}^{p_n}$ are homogeneous of degree~$p_1 d_1 + \dotsb + p_n d_n$.
    \item
      Similarly the free~{\algebra{$\kf$}}~$A \defined \kf\gen{x_i \suchthat i \in I}$ can be graded via
      \[
        A_d
        \defined
        \gen{
          x_{i_1}^{p_1} \dotsm x_{i_n}^{p_n}
        \suchthat
          n \geq 0,
          i_1, \dotsc, i_n \in I,
          p_1 + \dotsb + p_n = d
        }_{\kf}
      \]
      for every~$d \geq 0$, and for any family~$(d_i)_{i \in I}$ of natural numbers $d_i \geq 0$ via
      \[
        A_d
        \defined
        \gen{
          x_{i_1}^{p_1} \dotsm x_{i_n}^{p_n}
        \suchthat
          n \geq 0,
          i_1, \dotsc, i_n \in I,
          p_1 d_1 + \dotsb + p_n d_n = d
        }_{\kf} \,.
      \]
      This grading makes the monomials~$x_{i_1}^{p_1} \dotsm x_{i_n}^{p_n}$ homogeneous of degree~$p_1 d_1 + \dotsb + d_n p_n$.
    \item
      The tensor algebra~$\Tensor(V)$ of a vector space~$V$ has a canonical grading with~$\Tensor(V)_d = V^{\tensor d}$ for all~$d \geq 0$.
      Similarly both the symmetric algebra~$\Symm(V)$ and the exterior algebra~$\Exterior(V)$ have canonical gradings given by~$\Symm(V)_d = \Symm^d(V)$ and~$\Exterior(V)_d = \Exterior^d(V)$ for all~$d \geq 0$.
    \item
      Let~$(M, \cdot)$ be a monoid and let~$M = \coprod_{i \geq 0} M_i$ be a grading of~$M$, i.e.\ a decomposition into subsets with~$M_i \cdot M_j \subseteq M_{i+j}$ for all~$i, j \geq 0$.
      Then the monoid algebra~$\kf[M]$ inhericts a grading via
      \[
        \kf[M]_i
        \defined
        \gen{ M_i }_{\kf}
      \]
      for every~$i \geq 0$.
      As special cases of this construction we get the following examples:
      \begin{itemize}
        \item
          If~$I$ is any index set then for~$M = \Natural^{\oplus I}$ a grading~$M = \coprod_{d \geq 0} M_d$ is given by the subsets
          \[
            M_d
            \defined
            \left\{
              (p_i)_{i \in I} \in M
            \suchthat*
              \sum_{i \in I} p_i = d
            \right\}
          \]
          with~$d \geq 0$.
          Then~$\kf[M]$ with the induced grading is the commutative polynomial algebra~$\kf[x_i \suchthat i \in I]$.
        \item
          If~$I$ is any index set then let~$\Sigma \defined \{x_i \suchthat i \in I\}$ be an alphabet with letters~$x_i$ and let~$M = \Sigma^*$ be the monoid of words in the alphabet~$\Sigma$ together with concatenation of words as rule of composition.
          Then~$\kf[M] = \kf\gen{X_i \suchthat i \in I}$ and the grading of~$\kf[M]$ (where every variable~$x_i$ is in degree~$1$) comes from the grading of~$M$ given by
          \[
            M_d
            \defined
            \{
              w \in M
            \suchthat
              \text{$w$ is a word in~$\Sigma$ of length~$d$}
            \}  \,.
          \]
      \end{itemize}
  \end{enumerate}
\end{examples}


\begin{remark}
  \label{external description of graded algebras}
  The grading of the tensor algebra~$\Tensor(V)$, symmetric algebra~$\Symm(V)$ and exterior algebra~$\Exterior(V)$ are basically built into the construction of these algebras.
  This way of constructing graded~{\algebras{$\kf$}} can be generalized as follows:
  
  Suppose that we are given a sequence of vector spaces~$A_i$ with~$i \geq 0$ and bilinear maps
  \[
    \mu_{i,j}
    \colon
    A_i \times A_j
    \to
    A_{i+j} \,,
    \quad
    (x,y)
    \mapsto
    xy
  \]
  for all~$i, j \geq 0$ such that
  \begin{itemize}
    \item
      the~$\mu_{i, j}$ are relatively associative in the sense that
      \[
        x(yz)
        =
        (xy)z
      \]
      for all~$i, j, k \geq 0$ and~$x \in A_i$,~$y \in A_j$ and~$z \in A_k$ and
    \item
      there exists an element~$1 \in A_0$ with
      \[
        1 x
        =
        x
        =
        x 1
      \]
      for all~$i \geq 0$ and every~$x \in A_i$.
  \end{itemize}
  For the direct sum~$A \defined \bigoplus_{i \geq 0} A_i$ we can then fit together the multiplications~$\mu_{i,j}$ to a single multiplication~$\mu \colon A \times A \to A$ that is given on elements~$x, y \in A$ with~$x = (x_i)_{i \geq 0}$ and~$y = (y_i)_{i \geq 0}$ by
  \[
    x y
    =
    \left( \sum_{j=0}^i x_j y_{i-j} \right)_{j \geq 0}  \,.
  \]
  The bilinearity of~$\mu$ follows from the bilinearities of the~$\mu_{i,j}$, it follows from the relative associativity of the multiplications~$\mu_{i,j}$ that the multiplication~$\mu$ is associative, and~$1 \in A_0$ is multiplicative neutral for~$\mu$.
  
  This construction gives an external description of graded~{\algebras{$\kf$}}, in constrast to the previous internal description.
\end{remark}


\begin{definition}
  Let~$A$ and~$B$ be two graded~\algebras{$\kf$}.
  \begin{enumerate}
    \item
      A \defemph{homomorphism of graded~{\algebras{$\kf$}}}~$f \colon A \to B$\index{homomorphism!of graded $\kf$-algebras} is a homomorphism of~{\algebras{$\kf$}} such that~$f(A_i) \subseteq B_i$ for all~$i \geq 0$.
    \item
      If~$f \colon A \to B$ is a homomorphism of graded~{\algebras{$\kf$}} then for every~$i \geq 0$ the restriction of~$f$ to a linear map~$A_i \to B_i$ is denoted by~$f_i$.
  \end{enumerate}
\end{definition}


\begin{remark}
  \leavevmode
  \begin{enumerate}
    \item
      Let~$A$,~$B$ and~$C$ be graded~{\algebra{$\kf$}}.
      \begin{enumerate}
        \item
          The identity~$\id_A \colon A \to A$ is a homomorphism of graded~{\algebras{$\kf$}}.
        \item
          If~$f \colon A \to B$ and~$g \colon B \to C$ are homomorphisms of graded~{\algebras{$\kf$}} then their composition~$g \circ f \colon A \to C$ is again a homomorphism of graded~{\algebras{$\kf$}}.
      \end{enumerate}
      Hence the graded~\algebras{$\kf$} together with the homomorphisms of graded~\algebras{$\kf$} between them form a category, which we will denote by~\gls*{graded algebras}.
    \item
      For a homomorphism of graded~{\algebras{$\kf$}}~$f \colon A \to B$ the following conditions are equivalent:
      \begin{equivalenceslist}
        \item
          $f$ is an isomorphism of graded~{\algebras{$\kf$}}, i.e.\ there exists an inverse homomorphism of graded~{\algebras{$\kf$}}~$g \colon B \to A$ with~$fg = \id_B$ and~$gf = \id_A$.
        \item
          $f$ is bijective.
        \item
          For every~$i \geq 0$ the restriction~$f_i \colon A_i \to B_i$ is bijective.
      \end{equivalenceslist}
  \end{enumerate}
\end{remark}


\begin{example}
  \leavevmode
  \begin{enumerate}
    \item
      For any vector space~$V$ the two maps
      \begin{alignat*}{2}
        \Tensor(V)
        &\to
        \Symm(V) \,,
        &
        \quad
        x_1 \tensor \dotsb \tensor x_n
        &\mapsto
        x_1 \dotsm x_n
      \shortintertext{and}
        \Tensor(V)
        &\to
        \Exterior(V) \,,
        &
        \quad
        x_1 \tensor \dotsb \tensor x_n
        &\mapsto
        x_1 \wedge \dotsb \wedge x_n
      \end{alignat*}
      are homomorphisms of graded~\algebras{$\kf$}.
    \item
      If~$V$ is a finite dimensional vector space with basis~$x_1, \dotsc, x_n$ then the resulting isomorphism of~\algebras{$\kf$}
      \[
        \kf[X_1, \dotsc, X_n]
        \to
        \Symm(V) \,,
        \quad
        X_i
        \mapsto
        x_i
      \]
      is already an isomorphism of graded~\algebras{$\kf$}.
  \end{enumerate}
\end{example}


\begin{lemma}
  \label{characterizations of homogeneous ideals}
  Let~$I$ be some kind of ideal in a graded~{\algebra{$\kf$}} (i.e.\ a left ideal, right ideal or two-sided ideal).
  \begin{enumerate}
    \item
      The linear subspace~$\bigoplus_{i \geq 0} (I \cap A_i)$ is again an ideal in~$A$ of the same kind.
    \item
      The following conditions on~$I$ are equivalent:
      \begin{enumerate}
        \item
          \label{direct sum of linear subspaces}
          There exists linear subspaces~$I_i$ of~$A_i$ with~$i \geq 0$ such that~$I = \bigoplus_{i \geq 0} I_i$.
        \item
          \label{direct sum of intersections}
          It holds that~$I = \bigoplus_{i \geq 0} (I \cap A_i)$.
        \item
          \label{contains all homogeneous components}
          The ideal~$I$ contains the homogeneous components of all its elements.
        \item
          \label{generated by homogeneous}
          The ideal~$I$ is generated by homogeneous elements.
      \end{enumerate}
  \end{enumerate}
\end{lemma}


\begin{proof}
  \leavevmode
  \begin{enumerate}
    \item
      We check that~$I' \defined \bigoplus_{i \geq 0} I \cap A_i$ is again a left ideal if~$I$ is one.
      Indeed, we find that
      \begin{align*}
        A \cdot I'
        &=
              \left( \sum_{j \geq 0} A_j \right)
        \cdot \left( \sum_{i \geq 0} (I \cap A_i) \right)
        \\
        &=
        \sum_{i,j \geq 0} A_j \cdot (I \cap A_i)
        \\
        &\subseteq
        \sum_{i, j \geq 0} (A_j \cdot I) \cap (A_j \cdot A_i)
        \\
        &\subseteq
        \sum_{i,j \geq 0} (I \cap A_{i+j})
        \\
        &=
        \sum_{k \geq 0} (I \cap A_k)
        \\
        &=
        I'  \,.
      \end{align*}
      We find in the same way that~$I'$ is again a right ideal if~$I$ is one.
      It follows from these two cases that~$I'$ is a two-sided ideal if~$I$ is one.
    \item
      \begin{implicationlist}
        \item[\ref*{direct sum of linear subspaces}~$\implies$~\ref*{direct sum of intersections}]
          It follows from the assumption that~$I_i = I \cap A_i$.
        \item[\ref*{direct sum of intersections}~$\implies$~\ref*{direct sum of linear subspaces}]
          We may take~$I_i = I \cap A_i$.
        \item[\ref*{direct sum of linear subspaces}~$\implies$~\ref*{contains all homogeneous components}]
          We may decompose~$x \in I$ with respect to the decomposition~$A = \bigoplus_{i \geq 0} A_i$ into homogeneuos components~$x = \sum_{i \geq 0} x_i$ and with respect to the decomposition~$I = \bigoplus_{i \geq 0} I_i$ as~$x = \sum_{i \geq 0} x'_i$.
          Then~$x'_i \in I_i \subseteq A_i$ and hence~$x_i = x'_i$ by uniqueness of the decomposition in~$A$.
          Thus~$x_i = x'_i \in I_i \subseteq I$ for all~$i \geq 0$.
        \item[\ref*{contains all homogeneous components}~$\implies$~\ref*{generated by homogeneous}]
          We may start with any generating set for~$I$ and then replace each generator by all of its homogeneous components.
        \item[\ref*{generated by homogeneous}~$\implies$~\ref*{direct sum of intersections}]
          Each homogeneous generator in contained in some summand~$I \cap A_i$.
          Hence~$I$ is contained in the ideal~$\bigoplus_{i \geq 0} I \cap A_i$ which is in turn contained in~$I$.
          Hence~$I = \bigoplus_{i \geq 0} I \cap A_i$.
        \qedhere
      \end{implicationlist}
  \end{enumerate}
\end{proof}


\begin{definition}
  An ideal~$I$ (of any kind) in a graded~{\algebra{$\kf$}}~$A$ is \defemph{homogeneous ideal}\index{homogeneous!ideal} if it satisfies the equivalent conditions from \cref{characterizations of homogeneous ideals}.
  We set~$I_i \defined I \cap A_i$ for all~$i \geq 0$.
\end{definition}


\begin{example}
  If~$f \colon A \to B$ is a homomorphism of graded~{\algebras{$\kf$}} then~$\ker f$ is a homogeneous two-sided ideal in~$A$ because~$\ker f = \bigoplus_{i \geq 0} \ker f_i$.
  The converse also holds:
\end{example}


\begin{proposition}
  Let~$A$ be a graded~{\algebra{$\kf$}} and let~$I$ be a two-sided homogeneous ideal in~$A$.
  Let~$\pi \colon A \to A/I$ be the canonical projection.
  \begin{enumerate}
    \item
      The algebra~$A/I$ carries a grading via~$(A/I)_i \defined \pi(A_i)$ for every~$i \geq 0$, making~$A/I$ into a graded~{\algebra{$\kf$}}.
    \item
      This is the unique grading on~$A/I$ that makes~$\pi$ a homomorphism of graded~{\algebras{$\kf$}}.
  \end{enumerate}
\end{proposition}


\begin{proof}
  \leavevmode
  \begin{enumerate}
    \item
      It follows from the usual isomorphism
      \[
        A/I
        =
        \left( \bigoplus_{i \geq 0} A_i \right)
        \bigg/
        \left(\bigoplus_{i \geq 0} I_i \right)
        \cong
        \bigoplus_{i \geq 0} (A_i / I_i)
      \]
      that~$A/I = \bigoplus_{i \in I} (A/I)_i$.
      It holds for all~$i, j \geq 0$ that
      \[
        (A/I)_i (A/I)_j
        =
        \pi(A_i) \pi(A_j)
        =
        \pi(A_i A_j)
        \subseteq
        \pi(A_{i+j})
        =
        (A/I)_{i+j} \,.
      \]
    \item
      Any such grading~$A/I = \bigoplus_{i \geq 0} (A/I)_i$ must satisfy~$\pi(A_i) \subseteq (A/I)_i$ for every~$i \geq 0$.
      It follows from~$A/I = \bigoplus_{i \geq 0} \pi(A_i)$ and~$A/I = \bigoplus_{i \geq 0} (A/I)_i$ that~$\pi(A_i) = (A/I)_i$ for every~$i \geq 0$.
    \qedhere
  \end{enumerate}
\end{proof}


\begin{examples}
  Let~$V$ be a vector space.
  The two-sided ideal~$I$ in~$\Tensor(V)$ generated by the elements~$x \tensor y - y \tensor x$ with~$x,y \in V$ is a homogeneous ideal of~$\Tensor(V)$ because it is generated by homogeneous components.
  The two sided ideal~$J$ in~$\Tensor(V)$ generated by the elements~$x \tensor x$ with~$x \in V$ is homogeneous because it generated by homogeneous elements.
  The resulting quotient graded~{\algebras{$\kf$}} are the symmetric algebra~$\Symm(V) \cong A/I$ and the exterior algebra~$\Exterior(V) \cong A/J$.
\end{examples}


% Grading is on the wrong level.
% 
% \begin{remark}
%   One can also consider graded Lie~algebras, and if~$\glie$ is a graded Lie~algebra then~$\Univ(\glie)$ inherits the structure of a graded~{\algebra{$\kf$}}:
%   \begin{enumerate}
%     \item
%       A \defemph{grading}\index{grading!of a vector space} of a vector space~$V$ is a direct sum decomposition~$V = \bigoplus_{i \geq 0} V_i$.
%       A \defemph{graded vector space}\index{graded!vector space} is a vector space~$V$ together with a grading of~$V$.
%     \item
%       A \defemph{grading}\index{grading!of a Lie algebra} of a Lie~algebra~$\glie$ is a direct sum decomposition~$\glie = \bigoplus_{i \geq 0} \glie_i$ such that~$[\glie_i, \glie_j] \subseteq \glie_{i+j}$ for all~$i, j \geq 0$.
%       A \defemph{graded Lie~algebra}\index{graded!Lie~algebra} is a Lie~algebra~$\glie$ together with a grading of~$\glie$.
%     \item
%       If~$V$ is a graded vector space then the tensor algebra~$\Tensor(V)$ inherits a grading from~$V$:
%       We get for every~$d \geq 0$ a decomposition
%       \[
%         V^{\tensor d}
%         =
%         \left(
%           \bigoplus_{i \geq 0} V_i
%         \right)^{\tensor d}
%         =
%         \bigoplus_{i_1, \dotsc, i_d \geq 0} V_{i_1} \tensor \dotsb \tensor V_{i_d}  \,.
%       \]
%       This overall results for the tensor algebra~$\Tensor(V)$ in a decomposition
%       \[
%         \Tensor(V)
%         =
%         \bigoplus_{r \geq 0}
%         V^{\tensor r}
%         =
%         \bigoplus_{\substack{r \geq 0 \\ i_1, \dotsc, i_r \geq 0}}
%         V_{i_1} \tensor \dotsb \tensor V_{i_r}  \,.
%       \]
%       We define for all~$d \geq 0$ the homogeneous component~$\Tensor(V)_d$ as
%       \[
%         \Tensor(V)_d
%         \defined
%         \bigoplus_{
%           \substack{r \geq 0 \\
%                     i_1, \dotsc, i_r \geq 0 \\
%                     i_1 + \dotsb + i_r = d}
%         }
%         V_{i_1} \tensor \dotsb \tensor V_{i_r}  \,.
%       \]
%       This defines a grading on~$\Tensor(V)$ which makes the inclusion~$V \inclusion \Tensor(V)$ into a homomorphism of graded vector spaces.
%     \item
%       If~$\glie$ is a graded Lie~algebra with grading~$\glie = \bigoplus_{i \neq 0} \glie_i$ then we regard the tensor algebra~$\Tensor(\glie)$ as a graded~{\algebra{$\kf$}} in the above way.
%       Let~$I$ be the two-sided ideal in~$\Tensor(\glie)$ generated by all elements~$c_{x,y} \defined x \tensor y - y \tensor x - [x,y]$ with~$x, y \in \glie$.
%       The ideal~$I$ is already generated by all~$c_{x,y}$ with~$x, y \in \glie$ homogeneous because~$c_{x,y}$ is bilinear in~$x$ and~$y$.
%       The ideal~$I$ is hence graded and so the quotient~$\Univ(\glie) = \Tensor(\glie)/I$ inherits a grading from~$\Tensor(\glie)$.
%       This is the unique grading that makes the canonical homomorphism~$\glie \to \Univ(\glie)$ a homomorphism of graded~{\algebras{$\kf$}}.
%   \end{enumerate}
% \end{remark}




\subsection{Filtered \texorpdfstring{$\kf$}{k}-Algebras}


\begin{definition}
  A \defemph{filtration}\index{filtration} of a~\algebra{$\kf$}~$A$ is an increasing sequence
  \[
    A_{(0)}
    \subseteq
    A_{(1)}
    \subseteq
    A_{(2)}
    \subseteq
    \dotsb
  \]
  of linear subspaces of~$A$ such that~$A = \bigcup_{i \geq 0} A_{(i)}$ and~$A_{(i)} A_{(j)} \subseteq A_{(i+j)}$ for all~$i,j \geq 0$, as well as~$1 \in A_{(0)}$.
  A \defemph{filtered~\algebra{$\kf$}} is a~\algebra{$\kf$}~$A$ together with a filtration of~$A$.
\end{definition}


\begin{remark}
  \label{filtration conventions}
  \leavevmode
  \begin{enumerate}
    \item
      We will just say that~\enquote{$A$ is a filtered algebra} without mentioning the filtration explicitely.
      The parts of the filtration will then be denoted by~$A_{(i)}$ with~$i \geq 0$.
    \item
      If~$A$ is a filtered~{\algebra{$\kf$}} then we set~$A_{(-i)} \defined 0$ for all~$i < 0$ for convenience.
      The relation~$A_{(i)} A_{(j)} \subseteq A_{(i+j)}$ with~$i,j \geq 0$ then extends to all~$i, j \in \Integer$.
  \end{enumerate}
\end{remark}


\begin{definition}
  Let~$A$ and~$B$ be two filtered~\algebras{$\kf$}.
  \begin{enumerate}
    \item
      A~\defemph{homomorphism of filtered~\algebras{$\kf$}}~$A \to B$ is a homomorphism of the underlying~{\algebras{$\kf$}} such that~$f(A_{(i)}) \subseteq B_{(i)}$ for every~$i \geq 0$.
    \item
      If~$f \colon A \to B$ is a homomorphism of filtered~{\algebras{$\kf$}} then for every~$i \geq 0$ the restriction of~$f$ to a linear map~$A_{(i)} \to B_{(i)}$ is denoted by~$f_{(i)}$.
  \end{enumerate}
\end{definition}


\begin{remark}
  Let~$A$,~$B$ and~$C$ be filtered~\algebras{$\kf$}.
  \begin{enumerate}
    \item
      The identity~$\id_A \colon A \to A$ is a homomorphism of filtered~\algebras{$\kf$}.
    \item
      If~$f \colon A \to B$ and~$g \colon B \to C$ are homomorphisms of filtered~\algebras{$\kf$} then their composition~$g \circ f \colon A \to C$ is again a homomorphism of filtered~\algebras{$\kf$}.
  \end{enumerate}
  This shows that filtered~\algebras{$\kf$} together with homomorphisms of filtered~\algebras{$\kf$} between them form a category, which we will denote by~\gls*{filtered algebras}.
  \begin{enumerate}[start=3]
    \item
      A homomorphism of filtered~{\algebras{$\kf$}}~$f \colon A \to B$ is hence an isomorphism if and only if there exists a homomorphism of filtered~{\algebras{$\kf$}}~$g \colon B \to A$ with~$fg = \id_B$ and~$gf = \id_A$.
  \end{enumerate}
\end{remark}


\begin{warning}
  Let~$A$ and~$B$ be two filtered~{\algebras{$\kf$}}.
  A bijective homomorphism of filtered~{\algebras{$\kf$}}~$f \colon A \to B$ is not necessarily an isomorphism of filtered~{\algebras{$\kf$}}.
  Indeed, take any~{\algebra{$\kf$}}~$A$ with~$\kf \neq A$.
  We can endow~$A$ with a filtration
  \[
    A_{(0)}
    =
    \kf
    \subseteq
    A
    =
    A
    =
    A
    =
    \dotsb
  \]
  which results in a filtered~{\algebra{$\kf$}}~$B_1$.
  But we can also endow~$A$ with the filtration
  \[
    A_{(0)}
    =
    A
    =
    A
    =
    A
    =
    \dotsb
  \]
  which results in a filtered~{\algebra{$\kf$}}~$B_2$.
  Then the identity~$\id_A \colon A \to A$  results in a bijective homomorphism of filtered~{\algebras{$\kf$}}~$B_1 \to B_2$.
  But this is not an isomorphism of filtered~{\algebras{$\kf$}} because the inverse~$B_2 \to B_1$ does not respect the filtrations.
\end{warning}


\begin{remark}
  \leavevmode
  \begin{enumerate}
    \item
      Any grading~$A = \bigoplus_{i \geq 0} A_i$ of a~{\algebra{$\kf$}}~$A$ results in a filtration~$A = \bigcup_{i \geq 0} A_{(i)}$ given by
      \[
        A_{(i)}
        =
        \bigoplus_{j \geq i} A_j
      \]
      for every~$i \geq 0$.
      We can therefore regard every graded~{\algebra{$\kf$}} as a filtered~{\algebra{$\kf$}}.
      Every homomorphism of graded~{\algebras{$\kf$}}~$f \colon A \to B$ is then also a homomorphism of filtered \algebras{$\kf$}.
      This construction gives us a forgetful functor~$\cgAlg{\kf} \to \cfAlg{\kf}$.
    \item 
      If~$A$ is a filtered algebra and~$I$ is any two-sided ideal in~$A$ then the quotient algebra~$A/I$ inherits from~$A$ a filtration given by~$(A/I)_{(i)} \defined \pi(A_{(i)})$ for every~$i \geq 0$.
      Here~$\pi \colon A \to A/I$ denotes the canonical projection.
  \end{enumerate}
\end{remark}


\begin{examples}
  \leavevmode
  \begin{enumerate}
    \item
      If~$V$ is any vector space then the tensor algebra~$\Tensor(V)$, the symmetric algebra~$\Symm(V)$ and the exterior algebra~$\Exterior(V)$ admit gradings as explained in \cref{examples of graded algebras} and hence also induced filtrations.
    \item
      If~$\glie$ is a Lie algebra then its universal enveloping algebra~$\Univ(\glie)$ inherits from the tensor algebra~$\Tensor(\glie)$ a filtration~$\Univ(\glie) = \bigcup_{i \geq 0} \Univ(\glie)_{(i)}$ with terms
      \[
        \Univ(\glie)_{(i)}
        =
        \gen{
          \class{x_1 \dotsm x_j}
        \suchthat
          j \leq i,
          x_1, \dotsc, x_j \in \glie
        }_{\kf} \,.
      \]
    \item
      Let~$M$ be a multiplicative monoid and let
      \[
        M_{(0)}
        \subseteq
        M_{(1)}
        \subseteq
        M_{(2)}
        \subseteq
        M_{(3)}
        \subseteq
        \dotsb
      \]
      be a filtration of~$M$, i.e.\ it holds that~$M = \bigcup_{i \geq 0} M_{(i)}$ with~$M_{(i)} M_{(j)} \subseteq M_{(i+j)}$ for all~$i, j \geq 0$ and~$1 \in M_{(0)}$.
      Then the monoid algebra~$A \defined \kf[M]$ inherits a filtration given by
      \[
        A_{(i)}
        =
        \gen{ M_{(i)} }_{\kf}
      \]
      for all~$i \geq 0$.
    \item
      Let us give a special case of the previous example:
      Let~$G$ be a group with generating set~$S$.
      The length of an element~$g \in G$ with respect to the generating set~$S$ is given by
      \[
        l_S(g)
        =
        \min
        \{
          n \in \Natural
        \suchthat
          \text{there exist~$s_1, \dotsc, s_n \in S$ with~$g = s_1^{\pm 1} \dotsm s_n^{\pm 1}$}
        \}  \,.
      \]
      The length function is subadditive in the sense that
      \[
        l_S(gh)
        \leq
        l_S(g) + l_S(h)
      \]
      for all~$g, h \in G$.
      For every~$i \geq 0$ let
      \[
        G_{(i)}
        \defined
        \{
          g \in G
        \suchthat
          l_S(g) \leq i
        \}  \,,
      \]
      which is the ball of length~$i$.
      These subsets given a filtration of~$G$.
      That~$G_{(i)} G_{(j)} \subseteq G_{(i+j)}$ for all~$i, j \geq 0$ follows from the subadditivity of the length function~$l_S$.
      We hence get for the group algebra~$A \defined \kf[G]$ a filtration given by
      \[
        A_{(i)}
        \defined
        \gen{ G_{(i)} }_{\kf}
        =
        \gen{
          g \in G
        \suchthat
          l_S(g) \leq i
        }_{\kf} \,.
      \]
  \end{enumerate}
\end{examples}


\begin{definition}
  The \defemph{degree}\index{degree!filtration} of an element~$x \in A$ is the minimal~$i \geq 0$ with~$x \in A_{(i)}$.
\end{definition}


\begin{example}
  \leavevmode
  \begin{enumerate}
    \item
      Let~$A \defined \kf[t]$ be the polynomial ring in one variable.
      The standard grading~$\kf[t] = \bigoplus_{i \geq 0} \kf t^i$ gives a filtration
      \[
        A_0
        =
        \kf
        =
        \gen{ 1 }_{\kf}
        \subseteq
        \gen{ 1, t }_{\kf}
        \subseteq
        \gen{ 1, t, t^2 }_{\kf}
        \subseteq
        \gen{ 1, t, t^2, t^3 }_{\kf}
        \subseteq
        \dotsb
      \]
      of~$A$.
      The degree of a nonzero polynomial~$p \in A$ with respect to this filtration is the usual degree of a polynomial.
    \item
      If more generally~$A$ is any graded algebra with associated filtration then the degree of any nonzero element~$x \in A$ with homogeneous decomposition~$x = \sum_{i \geq 0} x_i$ is the largest index~$i$ with~$x_i \neq 0$.
  \end{enumerate}
\end{example}



\subsubsection{The Associated Graded Algebra}


\begin{definition}
  Two elements~$x$ and~$y$ of a filtered~{\algebra{$\kf$}}~$A$ are \defemph{equal up to smaller degree}\index{equal up to smaller degree}\index{up to smaller degree}\index{degree!up to smaller} if~$x = y$ or their difference~$x - y$ is of degree strictly smaller than both~$x$ and~$y$.
\end{definition}


\begin{lemma}
  Let~$A$ be a filtered algebra.
  Two elements~$x, y \in A$ are equal up to smaller degree if and only if they have the same degree~$i \geq 0$ and~$x - y \in A_{(i-1)}$.
\end{lemma}


\begin{proof}
  Suppose first that that~$x$ and~$y$ are equal up to smaller degree.
  Let~$x$ be of degree~$i$ and let~$y$ be of degree~$j$ with~$i \geq j$.
  Then~$x - y \in A_{(j)}$ and thus~$x = x' + (x- x') \in A_{(j)}$.
  Hence~$i \leq j$ and thus~$i = j$.  
  If now~$x = y$ then~$x - y = 0 \in A_{(i-1)}$.
  (Recall for the case~$i = 0$ that~$A_{(-1)} = 0$.)
  Otherwise~$x - y \in A_{(k)}$ for some~$0 \leq k < i$ and hence~$x - y \in A_{(k)}$.
  
  If on the other hand~$x$ and~$y$ have the same degree~$i \geq 0$ with~$x - y \in A_{(i-1)}$ then~$x = y$ or the degree of~$x - y$ is at most~$i-1$ and hence strictly smaller than~$i$.
  This means that~$x$ and~$y$ are equal up to smaller degree.
\end{proof}


\begin{corollary}
  If~$A$ is a filtered~{\algebra{$\kf$}} then \enquote{being equal up to smaller degree} is an equivalence relation on~$A$.
  The equivalence class of an element~$x \in A$ of degree~$i$ is given by the coset~$x + A_{(i-1)}$.
  \qed
\end{corollary}


\begin{remark}
  Let~$A$ be a filtered~{\algebra{$\kf$}} and let~$\sim$ be the equivalence relation \enquote{equal up to smaller degree} on~$A$.
  
  When calculating in~$A$ we sometimes want to replace an element~$x \in A$ by another element~$x' \in A$ that is equal to~$x$ up to smaller degree, while hoping that the result ouf our calculation also stays the same up to smaller degree.
  This can be useful if terms of smaller degree are not important in the given situation, or if they can be dealt with by induction.
  
  We would therefore like to have the properties
  \begin{equation}
    \label{wanted compatibility}
    x + y
    \sim
    x' + y' \,,
    \qquad
    x \cdot y
    \sim
    x' \cdot y' \,,
    \qquad
    \lambda x \sim \lambda x'
  \end{equation}
  for all elements~$x, x', y, y' \in A$ with~$x \sim x'$ and~$y \sim y'$ and scalars~$\lambda \in \kf$.
  This would then mean that the quotient set~$A/{\sim}$ inherits from~$A$ the structure of a~{\algebra{$\kf$}}, allowing us do calculations \enquote{up to smaller degree} by switching from~$A$ to~$A/{\sim}$.
  
  But alas the properties~\eqref{wanted compatibility} do not hold in general:%
  \footnote{The equivalence relation~$\sim$ is actually compatible with scalar multiplication:
  Suppose that~$x, x' \in A$ are two element that are equal up to smaller degree, so that~$x$ and~$x'$ are of the same degree~$i$ and~$x - x' \in A_{(i-1)}$.
  If~$\lambda = 0$ then~$\lambda x = 0 = \lambda x'$ and hence~$\lambda x \sim \lambda x'$.
  If~$\lambda \neq 0$ then it follows from~$x \in A_{(i)}$ and~$x \notin A_{(i-1)}$ that also~$\lambda x \in A_{(i)}$ and~$\lambda x' \notin A_{(i-1)}$.
  This means that the element~$\lambda x$ is again of degree~$i$.
  We find in the same way that~$\lambda x'$ is again of degree~$i$.
  We moverover have~$\lambda x - \lambda x' = \lambda (x-x') \in A_{(i-1)}$ because~$x - x' \in A_{(i-1)}$.
  Altogether this shows that~$\lambda x \sim \lambda x'$.}
  \begin{itemize}
    \item
      Suppose that~$x$ and~$x'$ are of degree~$i$ whereas~$y$ and~$y'$ are of degree~$j$.
      We would like to argue that~$x + y$ and~$x' + y'$ have the same degree~$\max(i,j)$ and that their difference
      \[
        (x + y) - (x' + y')
        =
        (x - x') + (y + y')
      \]
      has degree at most~$\max(i-1,j-1)$ and hence strictly smaller than~$i+j$.
      But this argumentation doesnâ€™t work because the sums~$x+y$ and~$x'+y'$ may have smaller degree than~$i+j$, which would mean that the difference~$(x + y) - (x' + y')$ may have too large of a degree.
      
      As a counterexample we can take the polynomial ring~$A = \kf[t]$ wih the filtration induced by the standard grading~$A = \bigoplus_{i \geq 0} \kf t^i$.
      Then~$x = t$ and~$x' = t+1$ are the equal to smaller degree but for~$y = -t$ the sums~$x + y = 0$ and~$x' + y' = 1$ are not equal up to smaller degree.
      
      This shows that the equivalence relation~$\sim$ is not necessarily compatible with addition.
    \item
      The equivalence relation~$\sim$ also hasnâ€™t to be compatible with multiplication.
      
      We take on~$\kf[t]$ the standard grading~$\kf[t] = \bigoplus_{i \geq 0} \kf t^i$.
      The ideal~$(t^2)$ is homogeneous, and the quotient~$A \defined \kf[t]/(t^2)$ therefore inherits a grading given by
      \[
        A
        =
        \kf
        \oplus
        \kf t
        \oplus
        0
        \oplus
        0
        \oplus
        \dotsb
      \]
      The resulting filtration of~$A$ is given by
      \[
        A_0
        =
        \kf
        \subsetneq
        (t)/t^2
        \subsetneq
        A
        =
        A
        =
        A
        =
        \dotsb
      \]
      The elements~$x = t$ and~$x' = t+1$ are equal up to smaller degree but for~$y = y' = t$ the two products~$xy = 0$ and~$x' y' = t$ are not equal up to smaller degree.
  \end{itemize}
  We can also argue more abstractly that this approach to \enquote{working with elements up to smaller degree} cannot work:
  We would have~$A/{\sim} = A/I$ for the then two-sided ideal~$I = \{x \in A \suchthat x \sim 0\}$.
  But the only element that is equal to~$0$ up to smaller degree is~$0$ itself.
  Hence~$I = 0$ and we would have that~$A = A/{\sim}$, meaning that no two elements~$x, y \in A$ with~$x \neq y$ could be equal up to smaller degree.
  
  The following construction gives us a way to circumvent these problems and to calculate \enquote{up to smaller degree} in a rigorous way:
\end{remark}


\begin{construction}[The associated graded algebra]
  \label{construction of associated graded}
  To every filtered~{\algebra{$\kf$}}~$A$ we can associate a graded~{\algebra{$\kf$}} as follows:
  For every~$i \geq 0$ let
  \[
    \gr[i](A)
    \defined
    A_{(i)} / A_{(i-1)}
  \]
  where we use the convention~$A_{(-1)} = 0$ from \cref{filtration conventions}.
  We denote the residue class of~$x \in A_{(i)}$ in~$\gr[i](A)$ by~$[x]_i$.
  
  For all~$i, j \geq 0$ the multiplication~$A \times A \to A$ restricts to a bilinear map~$A_{(i)} \times A_{(j)} \to A_{(i+j)}$ that in turn induces a well-defined bilinear map
  \[
    \mu_{i,j}
    \colon
    \gr[i](A) \times \gr[j](A)
    \to
    \gr[i+j](A) \,,
    \quad
    ([x]_i, [y]_j)
    \mapsto
    [xy]_{i+j}  \,.
  \]
  We will write~$[x]_i \cdot [y]_j$ or just~$[x]_i [y]_j$ instead of~$\mu_{i,j}([x]_i, [y]_j)$.
  To see that the multipliction~$\mu_{i,j}$ is well-defined let~$x, x' \in A_{(i)}$ and~$y, y' \in A_{(j)}$ with~$x - x ' \in A_{(i-1)}$ and~$y - y' \in A_{(j-1)}$.
  Then
  \begin{align*}
    x y
    &=
    (x' + (x - x')) (y' + (y - y'))
    \\
    &=
    x' y' + (x - x') y' + x' (y - y') + (x - x')(y - y')
    \\
    &\in
    x' y' + A_{(i-1)} A_{(j)} + A_{(i)} A_{(j-1)} + A_{(i-1)} A_{(j-1)}
    \\
    &\subseteq
    x' y' + A_{(i+j-1)} + A_{(i+j-1)} + A_{(i+j-2)}
    \\
    &\subseteq
    x' y' + A_{(i+j-1)}
  \end{align*}
  and hence~$[xy]_{i+j} = [x'y']_{i+j}$.
  
  The element~$[1]_0 \in \gr[0](A)$ satisfies~$[1]_0 \cdot [x]_i = [x]_i$ for all~$i \geq 0$ and every~$[x]_i \in \gr[i](A)$, and the multiplications~$\mu_{i,j}$ are relatively associative in the sense that
  \[
    [x]_i \cdot ([y]_j \cdot [z]_k)
    =
    [xyz]_{i+j+k}
    =
    ([x]_i \cdot [y]_j) \cdot [z]_k
  \]
  for all~$i, j, k \geq 0$ and~$[x]_i \in \gr[i](A)$,~$[y]_j \in \gr[j](A)$ and~$[z]_k \in \gr[k](A)$.
  It follows from \cref{external description of graded algebras} that on the direct sum
  \[
    \gr(A)
    \defined
    \bigoplus_{i \geq 0} \gr[i](A)
  \]
  the multiplications~$\mu_{i,j}$ assemble into a single multiplication
  \[
    \mu
    \colon
    \gr(A) \times \gr(A)
    \to
    \gr(A)
  \]
  that makes~$\gr(A)$ into a graded~{\algebra{$\kf$}}.
  The multiplicative neutral element of~$\gr(A)$ is given by~$[1]_0$.
\end{construction}


\begin{definition}
  For a filtered~{\algebra{$\kf$}}~$A$ the graded algebra~\gls*{associated graded} resulting from~$A$ by \cref{construction of associated graded} is the \defemph{associated graded algebra}\index{associated graded algebra} of~$A$.
\end{definition}


\begin{remark}
  Let~$A$ be a filtered algebra.
  \begin{enumerate}
    \item
      To every element~$x \in A$ we can associate an element in~$\gr(A)$:
      We observe that if~$x$ is of degree~$i \geq 0$ then the residue class~$[x]_j$ is not defined for~$j < i$ because~$x \notin A_{(j)}$, whereas it is defined for all~$j \geq i$.
      But for~$j > i$ we find that~$[x]_j = 0$ because~$x_i \in A_{(i)} \subseteq A_{(j-1)}$.
      Hence the only interesting residue class associated to~$x$ is~$[x]_i$;
      we note that~$[x]_i \neq 0$ because~$x \notin A_{(i-1)}$.
    \item
      We observe that two elements~$x, y \in A$ give the same associated element in~$\gr(A)$ if and only if~$x$ and~$y$ are equal up to smaller degree.
      To show this we denote by~$\gamma \colon A \to \gr(A)$ the function that maps every~$x \in A$ to the associated element of~$\gr(A)$.
      
      Suppose first that~$x$ and~$y$ are equal up to smaller degree.
      Then~$x$ and~$y$ are of the same degree~$i$ and~$x - y \in A_{(i-1)}$.
      Hence~$\gamma(x) = [x]_i = [y]_i = \gamma(y)$.
      
      Suppose now that~$x$ and~$y$ are not equal up to smaller degree, where~$x$ is of degree~$i$ and that~$y$ is of degree~$j$.
      If~$i \neq j$ then~$\gamma(x) = [x]_i \neq [y]_j = \gamma(y)$ because the terms~$[x]_i$ or~$[y]_j$ live in different homogeneous degrees and at least one of them is nonzero.
      If~$i = j$ then~$x - y \notin A_{(i-1)}$ and hence~$\gamma(x) = [x]_i \neq [y]_i = \gamma(y)$.
    \item
      Observe that the image of~$\gamma$ consists precisely of the homogeneous elements of~$\gr(A)$.
      If~$x \in A$ has degree~$i$ then~$[x]_i$ is homogeneous of degree~$i$ (or at least for~$x$ nonzero).
  \end{enumerate}
\end{remark}


\begin{warning}
  Let~$A$ be a filtered~{\algebra{$\kf$}}
  \begin{enumerate}
    \item
      The map~$\gamma \colon A \to \gr(A)$ that assigns to each element~$x \in A$ the corresponding element of~$\gr(A)$ is in no way a homomorphism.
      It is in general neither multiplicative nor additive.
    \item
      If~$x_i$,~$i \in I$ is a generating set for the algebra~$A$ then the associated elements of~$\gr(A)$ do not have to form a generating set for~$\gr(A)$.
%     TODO: Add a reference to the universal eveloping algebra of heisenberg/sl2 later on.
  \end{enumerate}
\end{warning}


\begin{remark}
  \label{generators of associated graded}
  Let~$A$ be a filtered algebra with finite algebra generating set~$x_1, \dotsc, x_n$ such that the generator~$x_i$ is of degree~$d_i$.
  Then the associated elements in~$\gr(A)$ form a set of algebra generators of~$\gr(A)$ if and only if the generators~$x_1, \dotsc, x_n$ are compatible with the filtration of~$A$ in the sense that for every~$i \geq 0$ the linear subspace~$A_{(i)}$ is spanned by all those monomials~$x_{i_1} \dotsm x_{i_p}$ with~$d_{i_1} + \dotsb + d_{i_p} \leq i$.
  See \cite{associated_generated} for more details on this.
\end{remark}


\begin{example}[Weyl algebra]
  \label{weyl algebra}
  We consider the \defemph{Weyl~algebra}\index{algebra!Weyl}\index{Weyl!algebra}
  \[
    A
    \defined
    \kf\gen{X, Y}/(YX - XY - 1) \,.%
    \footnote{The algebra~$A$ is isomorphic to the subalgebra of~$\End_{\kf}(\kf[t])$ generated by the endomorphisms~$x$ and~$y$ that are given by~$x(p(t)) = t p(t)$ and~$y(p(t)) = p'(t)$.
  These endomorphisms satsify the relations~$yx - xy - \id = 0$ by the product rule.}
  \]
  We denote the residue classes of~$X$ and~$Y$ in~$A$ by~$x$ and~$y$.
  Then~$yx = xy + 1$, which one may think about as a rewriting rule for words in~$x$ and~$y$.
  It follows from induction that
  \[
    y x^n
    =
    x^n y + n x^{n-1}
  \]
  for all~$n \geq 0$ and thus
  \[
    y p(x)
    =
    p(x) y + p'(x)
  \]
  for every polynomial~$p$.
  
  The~{\algebra{$\kf$}}~$T \defined \kf\gen{X, Y}$ carries a unique grading with~$X$ and~$Y$ in degree~$1$.
  The resulting filtration of~$T$ is given by
  \[
    T_{(i)}
    =
    \gen{
      Z_1 \dotsm Z_j
    \suchthat
      1 \leq j \leq i,
      Z_k \in \{X, Y\}
    }_{\kf}
    =
    \gen{
      \text{words in~$X$,~$Y$ of length~$\leq i$}
    }
  \]
  The Weyl~algebra~$A$ inherits a filtration given by
  \begin{align*}
    A_{(i)}
    =
    \gen{
      z_1 \dotsm z_j
    \suchthat
      1 \leq j \leq i,
      z_k \in \{x, y\}
    }_\kf
    =
    \gen{
      \text{words in~$x$,~$y$ of length~$\leq i$}
    }
  \end{align*}
  
  We observe that the two elements~$x, y \in T$ commute up to smaller degree, i.e.\ the two products~$xy$ and~$yx$ are equal up to smaller degree.
  Hence the associated elements~$[x]_1$ and~$[y]_1$ in~$\gr(A)$ do actually commute because
  \[
    [x]_1 [y]_1
    =
    [xy]_2
    =
    [yx - 1]_2
    =
    [yx]_2
    =
    [y]_1 [x]_1 \,.
  \]
  We will in the following show that~$\gr(A) \cong \kf[t,u]$ with~$[x]_1$ and~$[y]_1$ corresponding to~$t$ and~$u$.
  
  \begin{claim}
    \label{subspace spanned by monomials}
    For every~$i \geq 0$ the linear subspace~$A_{(i)}$ is spanned by the monomial~$x^n y^m$ with~$n + m \leq i$.
  \end{claim}
  
  \begin{proof}
    We show the statement by induction over~$i$.
    It holds for~$i = 0$ that
    \[
      A_{(0)}
      =
      \kf
      =
      \gen{1}_{\kf}
      =
      \gen{x^0 y^0}_{\kf}
    \]
    Suppose now that the statement holds for some~$i \geq 0$.
    We have
    \[
      T_{(i+1)}
      =
      x T_{(i)} \oplus y T_{(i)}
    \]
    and in the quotient~$A$ therefore
    \[
      A_{(i+1)}
      =
      x A_{(i)} + y A_{(i)} \,.
    \]
    We find by the induction hypothesis that the summand~$x A_{(i)}$ is spanned by the monomials~$x^{n+1} y^m$ with~$n+m \leq i$ and that the summand~$y A_{(i)}$ is spanned by the monomials~$y x^n y^m$ with~$n + m \leq i$.
    We have for these generators of~$y A_{(i)}$ that
    \[
      y x^n y^m
      =
      (x^n y + n x^{n-1}) y^m
      =
      x^n y^{m+1} + n x^{n-1} y^m \,.
    \]
    This shows that~$A_{(i+1)}$ is spanned by the monomials~$x^n y^m$ with~$n+m \leq i+1$.
   \end{proof}
  
  It follows that the homogeneous component~$\gr[i](A)$ is spanned by the residue classes~$[x^n y^m]_i$ with~$n + m = i$.
  The collection of all these residue classes therefore spans~$\gr(A)$ as a vector space.
  These generators commute:
  
  \begin{claim}
    It holds for all~$i, j \geq 0$ and~$n, m, k, l \geq 0$ with~$i = n+m$ and~$j = k+l$ that
    \[
      [x^n y^m]_i \cdot [x^k y^l]_j
      =
      [x^{n+k} y^{m+l}]_{i+j} \,.
    \]
  \end{claim}
  
  \begin{proof}
    For the case~$i = 0$ we find that~$n = m = 0$ and hence
    \[
      [x^0 y^0]_0 \cdot [x^k y^l]_j
      =
      [1]_0 \cdot [x^k y^l]_j
      =
      [x^k y^l]_j
    \]
    For~$i = 1$ we have the two cases~$n = 1$,~$m = 0$ and~$n = 0$,~$m = 1$.
    We find in these cases that
    \[
      [x^1 y^0]_1 \cdot [x^k y^l]_j
      =
      [x]_1 \cdot [x^k y^l]_j
      =
      [x^{k+1} y^l]_{j+1}
    \]
    and
    \begin{align*}
      [x^0 y^1]_1 \cdot [x^k y^l]_j
      &=
      [y]_1 \cdot [x^k y^l]_j
      \\
      &=
      [y x^k y^l]_{j+1}
      \\
      &=
      [(x^k y + k x^{k-1}) y^l]_{j+1}
      \\
      &=
      [x^k y^{l+1} + k x^{k-1} y^l]_{j+1}
      \\
      &=
      [x^k y^{l+1}]_{j+1} + k [x^{k-1} y^l]_{j+1}
      \\
      &=
      [x^k y^{l+1}]_{j+1}
    \end{align*}
    where we used that~$x y^k = y^k x + k y^{k-1}$ and that~$[z]_{j+1} = 0$ for all~$z \in A_{(j)}$.
    It follows for the general case that
    \begin{align*}
      {}&
      [x^n y^m]_i \cdot [x^k y^l]_j
      \\
      ={}&
      \underbrace{ [x]_1 \dotsm [x]_1 }_{n}
      \underbrace{ [y]_1 \dotsm [y]_1 }_{m}
      \cdot
      [x^k y^l]_j
      \\
      ={}&
      \underbrace{ [x]_1 \dotsm [x]_1 }_{n}
      \underbrace{ [y]_1 \dotsm [y]_1 }_{m-1}
      \cdot
      [x^{1+k}  y^l]_j
      \\
      ={}&
      \dotsb
      \\
      ={}&
      [x^{n+k} y^{m+l}]_{i+j}
    \end{align*}
    as claimed.
  \end{proof}

  We have now seen that~$\gr(A)$ is spanned by the monomials~$[x^n y^m]_{n+m}$ with~$n, m \geq 0$ and these monomials commute with each other.
  It only remains to show that these monomials~$[x^n y^m]_{n+m}$ are linearly indepependent.
  For this it sufficies to show the following:
  
  \begin{claim}
    \label{linear independence of monomials}
    The monomials~$x^n y^m$ with~$n, m \geq 0$ in~$A$ are linearly independent.
  \end{claim}
  
  We will defer the proof of \cref{linear independence of monomials} to a later occasion, namely to \cref{linear independence for weyl algebra}.
  
  It follows from \cref{subspace spanned by monomials} and \cref{linear independence of monomials} that for every~$i \geq 0$ the quotient~$\gr[i](A) = A_{(i)} / A_{(i-1)}$ has the residue classes~$[x^n y^m]_{n+m}$ with~$n+m = i$ as a basis, and hence overall that the residue classes~$[x^n y^m]_{n+m}$ with~$n, m \geq 0$ form a basis of~$\gr(A)$.
  
  We find altogether that~$\gr(A) \cong \kf[t,u]$ with~$[x]_1$ and~$[y]_1$ corresponding to the variables~$x$ and~$y$.
\end{example}


\begin{remark}
  The Weyl algebra is an example of a \defemph{skew polynomial ring}:
  If~$R$ is a~{\algebra{$\kf$}} and~$\delta$ is a derivation of~$R$ then one can endow the polynomial vector space~$A = R[t]$ uniquely with the structure of a~{\algebra{$\kf$}}, different from the usual one (unless~$\delta = 0$), such that
  \begin{itemize}
    \item
      the inclusion~$R \to A$,~$r \mapsto r t^0$ is a homomorphism of~{\algebras{$\kf$}},
    \item
      $t^i$ is the~{\howmanyth{$i$}} power of~$t$ in~$A$ and
    \item
      the variable~$t$ interacts with the elements~$r \in R$ via~$t r = r t + \delta(r)$.
  \end{itemize}
  The resulting~{\algebra{$\kf$}} is a \defemph{skew polynomial algebra}\index{skew polyomial algebra} over~$R$ and denoted by~\gls*{skew polynomial algebra}.
  Observe that the multiplication in~$R[t;\delta]$ is built precisely so that the derivation~$[t,-]$ of~$R[t;\delta]$ acts on~$R \cong R t^0$ in the same way as~$\delta$.
  The following are two special cases of skew polynomial algebras:
  \begin{enumerate}
    \item
      If~$R$ is any~{\algebra{$\kf$}} and~$\delta = 0$ then~$R[t; \delta] = R[t]$ is the usual polynomial ring.
    \item
      If~$R = \kf[t]$ is the polynomial ring in one variable and~$\delta = \partial_t$ is the derivative with respect to the variable~$t$ than~$R[t;\delta] = R[t;\partial_t]$ is the Weyl~algebra.
  \end{enumerate}
%   Currently not needed and distracting.
%
%   Skew polynomial algebras can be further generalized:
%   If~$\sigma \colon R \to R$ is an algebra homomorphism then a~{\linear{$\kf$}} map~$\delta \colon R \to R$ is a~{\derivation{$\sigma$}}\index{$\sigma$-derivation}\index{derivation!$\sigma$-} if
%   \[
%     \delta(rs)
%     =
%     \delta(r) s + \sigma(r) \delta(s)
%   \]
%   for all~$r, s \in R$.
%   Then the polynomial vector space~$A = R[t]$ can be endowed uniquely with the structure of a~{\algebra{$\kf$}} such that
%   \begin{itemize}
%     \item
%       the inclusion~$R \to A$,~$r \mapsto r t^0$ is a homomorphism of~{\algebras{$\kf$}},
%     \item
%       $t^i$ is the~{\howmanyth{$i$}} power of~$t$ in~$A$ and
%     \item
%       the variable~$t$ interacts with the elements~$r \in R$ via~$t r = \sigma(r) t + \delta(r)$.
%   \end{itemize}
%   The resulting algebra~$A$ is an \defemph{Ore extension}\index{Ore extension} of~$R$ and is denoted by~\gls*{ore extension}.
\end{remark}


\begin{remark}
  The Weyl~algebra~$A$ is connected to the {\threedimensional} Heisenberg~Lie~algebras~$\hlie$:
  Recall that~$\hlie$ has a basis~$p$,~$q$,~$c$ given together with the Lie~bracket~$[p,c] = [q,c] = 0$ and~$[p,q] = c$.
  We see that~$c$ is central in~$\hlie$.
  The Weyl~algebra~$A$ results from the universal enveloping algebra~$\Univ(\hlie)$ by~\enquote{setting~$c = 1$}.
  More precisely, we have that
  \[
    \Univ(\hlie)/(\class{c} - 1)
    \cong
    A
  \]
  with~$\class{p}$ and~$\class{q}$ corresponding to the elements~$y$ and~$x$ in the Weyl algebra.
  To formally prove this we abbreviate~$\Univ(\hlie)/(\class{c} - 1)$ as~$B$.
  
  The unique {\linear{$\kf$}} map~$\hlie \to A$ given by
  \[
    p \mapsto y \,,
    \quad
    q \mapsto x \,,
    \quad
    c \mapsto 1
  \]
  is a homomorphism of Lie~algebras and therefore induces an algebra homomorphism~$\phi \colon \Univ(\hlie) \to A$.
  The homomorphism~$\phi$ is given on the algebra generators~$\class{p}$,~$\class{q}$,~$\class{c}$ of~$\Univ(\hlie)$ by~$\phi(\class{p}) = y$,~$\phi(\class{q}) = x$ and~$\phi(\class{c}) \mapsto 1$.
  It holds that~$\phi(\class{c} - 1) = \phi(\class{c}) - \phi(1) = 1 - 1 = 0$ so~$\phi$ descends to a well-defined algebra homomorphism
  \[
    \Phi
    \colon
    B
    \to
    A
  \]
  that is given on the remaining algebra generators~$\class{p}$ and~$\class{q}$ of~$B$ by~$\Phi(\class{p}) = y$ and~$\Phi(\class{q}) = x$.
  
  In the other direction we can start off with the unique algebra homomorphism~$\psi \colon \kf\gen{X,Y} \to B$ given on the free variables~$X$ and~$Y$ by
  \[
    X \mapsto \class{q} \,,
    \quad
    Y \mapsto \class{p} \,.
  \]
  Then
  \[
    \psi(YX)
    =
    \class{p} \, \class{q}
    =
    \class{q} \, \class{p} + \class{[p,q]}
    =
    \class{q} \, \class{p} + \class{c}
    =
    \class{q} \, \class{p} + 1
    =
    \psi(XY + 1)
  \]
  and therefore~$\psi(YX - XY - 1) = 0$.
  It follows that~$\psi$ factors uniquely through an algebra homomorphism
  \[
    \Psi
    \colon
    A
    \to
    B
  \]
  that is given on the algebra generators~$x$ and~$y$ of~$A$ by~$\Psi(x) = \class{q}$ and~$\Psi(y) = \class{p}$.
  
  The two homomorphisms~$\Phi$ are~$\Psi$ are mutually inverse on the algebra generators~$y$ and~$x$ of~$A$ and~$\class{p}$ and~$\class{q}$ of~$B$.
  This means that~$\Phi$ and~$\Psi$ are mutually inverse algebra isomorphisms.
\end{remark}


% Bad example: Already graded
%
% \begin{example}[Quantum plane]
%   Let~$q \in \kf$ wit~$q \neq 0$.
%   The \emph{quantum plane} is the~{\algebra{$\kf$}}~$A \defined \kf\gen{X,Y}/(YX - qXY)$.%
%   \footnote{The usual polynomial ring~$\kf[x,y] \cong \kf\gen{X,Y}/(YX - XY)$ is the algebraic object corresponding to the plane~$\Aff^2 = k^2$ in the sense that~$\kf[x,y]$ is the algebra of (regular) functions on~$\Aff^2$.
%   The given algebra~$A$ should therefore correspond to some (non-existing) plane, the functions on which donâ€™t commute.}
%   Let~$x, y \in A$ be the residue classes of~$X$ and~$Y$.
%   The~{\algebra{$\kf$}}~$A$ inherits from the standard grading of the free algebra~$\kf\gen{X,Y}$ a filtration given by
%   \[
%     A_{(i)}
%     =
%     \gen{
%       z_1 \dotsm z_j
%     \suchthat
%       0 \leq j \leq i,
%       z_1, \dotsc, z_j \in \{x, y\}
%     }_{\kf} \,.
%   \]
%   It can be shown as for the Weyl~algebra (actually easer than for the Weyl~algebra) for all~$i \geq 0$ the vector space~$A_{(i)}$ is spanned by the monomials~$x^n y^m$ with~$n + m \leq i$.
%   The quotient vector space~$\gr[i](A)$ is therefore spanned for every~$i \geq 0$ by the residue classes~$[x^n y^m]_i$ with~$n + m = i$.
%   The algebra~$\gr(A)$ is hence spanned by the collection of all such residue classes~$[x^n y^m]$ with~$n, m \geq 0$.
% \end{example}


\begin{warning}
  For a filtered~{\algebra{$\kf$}} there does not exist a \enquote{canonical} algebra homomorphism~$A \to \gr(A)$.
  There does not even have to exist any algebra homomorphism~$A \to \gr(A)$ as \cref{weyl algebra} shows:
  If~$A \defined \kf\gen{X,Y}/(YX - XY - 1)$ denotes the Weyl algebra with the filtration from \cref{weyl algebra} then we have seen that~$\gr(A) = \kf[t,u]$ is the commutative polynomial ring in two variables.
  Algebra homomorphisms~$A \to \gr(A)$ correspond bijectively to elements~$x, y \in \kf[t,u]$ which satisfy the commutator relation~$yx - xy -1 = 0$, i.e.~$yx = xy + 1$.
  But no such element exist in~$\kf[t,u]$.
  Hence there exist no algebra homorphism~$A \to \gr(A)$.
\end{warning}


\begin{construction}
  If~$f \colon A \to B$ is a homomorphism of filtered~{\algebras{$\kf$}} then for every~$i \geq 0$ the restriction~$f_{(i)}$ induces a linear map
  \[
    \gr[i](f)
    \colon
    \gr[i](A)
    \to
    \gr[i](B) \,,
    \quad
    [x]_i
    \mapsto
    [f(x)]_i  \,.
  \]
  These linear maps come together to form a linear map
  \[
    \gr(f)
    \colon
    \gr(A)
    \to
    \gr(B)  \,.
  \]
  This map is already an algebra homomorphism because~$\gr(f)([1]_0) = [f(1)]_0 = [1]_0$ and
  \begin{align*}
    \gr(f)( [x]_i [y]_j )
    =
    \gr(f)( [xy]_{i+j} )
    =
    [f(xy)]_{i+j}
    =
    [f(x) f(y)]_{i+j}
    &=
    [f(x)]_i [f(y)]_j
    \\
    &=
    \gr(f)([x]_i) \gr(f)([y]_j) \,.
  \end{align*}
  for all~$i, j \geq 0$ and all~$[x]_i \in \gr[i](A)$ and~$[y]_j \in \gr[j](A)$.  
  It holds for every filtered~{\algebra{$\kf$}}~$A$ that~$\gr(\id_A) = \id_{\gr(A)}$ and for all homomorphisms of filtered~{\algebras{$\kf$}}~$f \colon A \to B$ and~$g \colon B \to C$ that~$\gr(g \circ f) = \gr(g) \circ \gr(f)$.
  
  We have hence constructed a functor~$\gr \colon \cfAlg{\kf} \to \cgAlg{\kf}$.
\end{construction}



% TODO: Move this at the right position.
% 
% \begin{examples}
%  \begin{enumerate}[leftmargin=*]
%   \item
%    Let $\glie$ be a $k$-Lie algebra. The canonical projection
%    \[
%     \pi \colon T(\g) \to \Univ(\glie), \quad x_1 \tensor \dotsb \tensor x_n \to x_1 \dotsm x_n
%     \quad \text{for every $n \in \N$ and all $x_1, \dotsc, x_n \in \g$}
%    \]
%    is a homomorphism of filtered \algebras{$\kf$}, where the filtration of $T(\g)$ is induced by the gradation discussed in Examples \ref{expls: graded algebras}. Hence it induces a homomorphism of graded \algebras{$\kf$}
%    \[
%     \gr(\pi) \colon T(\g) \to \gr(\Univ(\glie)),
%    \]
%    where $T(\g)$ is identified with $\gr(T(\g))$ as above. This homomorphism maps an element $x_1 \tensor \dotsb \tensor x_n$ with $x_1, \dots, x_n \in \g$ to the residue class $[x_1 \dotsm x_n] \in \gr(\Univ(\glie))_n$.
%  \end{enumerate}
% \end{examples}
% 
% 

\begin{lemma}
  Let~$A$ be a graded~{\algebra{$\kf$}}.
  Then the linear map
  \[
    \varphi 
    \colon
    A
    \to
    \gr(A)
  \]
  given by~$\varphi(x) = [x]_i$ for all~$i \geq 0$ and~$x \in A_i$ is an isomorphism of graded~{\algebras{$\kf$}}.
\end{lemma}


\begin{proof}
  We have for all~$i \geq 0$ that~$A_{(i)} = \bigoplus_{j=0}^i A_j$ and hence
  \[
    \gr[i](A)
    =
    A_{(i)} / A_{(i-1)}
    \cong
    A_i
  \]
  as vector spaces.
  It follows that~$\varphi$ is an isomorphism of vector spaces.
  Moreover, we have for all homogeneous elements~$x \in A_i$ and~$y \in A_j$ with~$i, j \geq 0$ that
  \[
    \varphi(x) \varphi(y)
    =
    [x]_i [y]_j
    =
    [xy]_{i+j}
    =
    \varphi(xy)
  \]
  where the last equality holds because~$xy \in A_{i+j}$.
  This shows that~$\varphi$ is multiplicative and hence already an isomorphism of~{\algebras{$\kf$}}.
\end{proof}


\begin{example}
  Let~$A \defined \kf\gen{X, Y}/(YX - XY - 1)$ be the Weyl~algebra with the filtration from \cref{weyl algebra}.
  Then~$\gr(A) \cong \kf[t,u]$ is commutative but~$A$ is not, hence~$\gr(A)$ and~$A$ are not isomorphic as algebras.
  It follows that the filtration on~$A$ cannot come from a grading, as otherwise~$\gr(A) \cong A$ (already as graded~{\algebras{$\kf$}}).
\end{example}


\begin{warning}
  If~$A$ is a filtered~{\algebra{$\kf$}} for which the filtration does not come from a grading then~$A$ and~$\gr(A)$ are not isomorphic as filtered algebras (where the filtration of~$\gr(A)$ is induced by the grading).
\end{warning}


\begin{definition}
  Let~$A$ be a ring.
  \begin{enumerate}
    \item
      An element~$x \in A$ is a \defemph{left zero divisor}\index{zero divisor!left} if there exists some nonzero~$y \in A$ with~$xy = 0$.
    \item
      An element~$x \in A$ is a \defemph{right zero divisor}\index{zero divisor!right} if there exists some nonzero~$y \in A$ with~$yx = 0$.
    \item
      An element~$x \in A$ is a \defemph{zero divisor}\index{zero divisor} if it is a left zero divisor or a right zero divisor.
  \end{enumerate}
\end{definition}


\begin{remark}
  Let~$A$ be a ring.
  \begin{enumerate}
    \item
      An element~$x \in A$ is a left zero divisor if and only if the left multiplication map~$A \to A$,~$y \mapsto xy$ is not injective.
      It is a right zero divisor if and only if the right multiplication map~$A \to A$,~$y \mapsto yx$ is not injective.
    \item
      The zero element~$0 \in A$ is both a left zero divisor and right zero divisor if~$A \neq 0$.
      It is not a zero divisor for~$A = 0$.
  \end{enumerate}
\end{remark}


\begin{proposition}
  \label{associated graded algebra and zero divisors}
  Let~$A$ be a filtered~{\algebra{$\kf$}}.
  \begin{enumerate}
    \item
      \label{associated graded has left zero divisors}
      If~$\gr(A)$ doesnâ€™t contain nonzero left zero divisors then neither does~$A$.
    \item
      \label{associated graded has right zero divisors}
      If~$\gr(A)$ doesnâ€™t contain nonzero right zero divisors then neither does~$A$.
    \item
      If~$\gr(A)$ doesnâ€™t contain nonzero zero divisors then neither does~$A$.
  \end{enumerate}
\end{proposition}


\begin{proof}
  \leavevmode
  \begin{enumerate}
    \item
      Suppose that~$A$ contains a nonzero left zero divisor~$x$.
      Then there exists some nonzero~$y \in A$ with~$xy = 0$.
      If~$x$ is of degree~$i$ and~$y$ is of degree~$j$ then~$[x]_i \neq 0$ and~$[y]_j \neq 0$ because both~$x$ and~$y$ are nonzero.
      But~$[x]_i [y]_j = [xy]_{i+j} = [0]_{i+j} = 0$.
      Hence~$[x]_i$ is again a nonzero left zero divisor.
    \item
      This can be shown in the same way as part~\ref*{associated graded has left zero divisors}.
    \item
      This is a combination of parts~\ref*{associated graded has left zero divisors} and~\ref*{associated graded has right zero divisors}.
    \qedhere
  \end{enumerate}
\end{proof}


\begin{remark}
  The converse of \cref{associated graded algebra and zero divisors} does not hold.
  To see this let~$A$ be any~\algebra{$\kf$} with~$\kf \subsetneq A$ and consider the filtration
  \[
    A_{(0)}
    =
    \kf
    \subseteq
    A
    \subseteq
    A
    \subseteq
    A
    \subseteq
    \dotsb
  \]
  Then~$\gr[0](A) = \kf$,~$\gr[1](A) = A/{\kf} \neq 0$ and~$\gr[i](A) = 0$ for every~$i \geq 2$.
  Hence~$\gr[1](A) \gr[1](A) = 0$ even though~$\gr[1](A) \neq 0$.
  This means that the elements of~$\gr[1](A)$ are both left zero divisors and right zero divisors.
\end{remark}





\subsection{Concrete Version of the Poincar\'{e}--Birkhoff--Witt Theorem}


\begin{convention}
  For this section we fix a Lie algebra~$\glie$ with basis~$(x_i)_{i \in I}$.
  For better readability we will denote for every~$x \in \glie$ the corresponding element~$\class{x} \in \Univ(\glie)$ simply by~$x$ again.
\end{convention}


\begin{remark}
  As a consequence of the upcoming PBW~theorem we will see in \cref{embedding into uea} that for any Lie~algebra~$\glie$ the canonical homomorphism~$\glie \to \Univ(\glie)$ is actually injective, allowing us to identify~$\glie$ with a Lie~subalgebra~$\Univ(\glie)$.
  This will a posteriori justify our abuse of notation.
\end{remark}


\begin{fluff}
  Let~$A \defined \kf\gen{X,Y}/(YX - XY - 1)$ be the Weyl~algebra with the filtration induced from the standard grading of~$\kf\gen{X,Y}$ and let~$x, y \in A$ denote the residue classes of~$X$ and~$Y$.
  We have seen in \cref{weyl algebra} that~$A$ has a basis given by all monomials~$x^n y^m$ with~$n, m \geq 0$ and that the associated graded algebra~$\gr(A)$ does therefore have a basis given by all residue classes~$[x^n y^m]_i$ with~$n, m \geq 0$ and~$i = n+m$.
  Moreover, the multiplication of~$\gr(A)$ is on these basis elements given by~$[x^n y^m]_i \cdot [x^k y^l]_j = [x^{n+k} y^{m+l}]_{i+j}$ for all~$n, m, k, l \geq 0$ and~$i = n+m$,~$j = k+l$. 
  
  The key observation behind these results was the relation~$yx = xy + 1$ in~$A$, which tells us that the elements~$x$ and~$y$ commute up to terms of smaller degre, and hence actually commute in~$\gr(A)$ (in the sense that the associated elements~$[x]_1, [y]_1 \in \gr(A)$ commute).
  For the universal enveloping algebra~$\Univ(\glie)$ a similar situation occurs:
  For any two elements~$x, y \in \glie$ the relation~$yx = xy + [x,y]$ holds in~$\Univ(\glie)$.
  Hence the elements~$x$ and~$y$ ought to commute up to a term of smaller degree in~$\Univ(\glie)$.
  We will therefore try to generalize the above results from~$A$ to~$\Univ(\glie)$ to describe a vector space basis of~$\Univ(\glie)$.
  
  We already know that~$\Univ(\glie)$ is generated by the image of~$\glie$ under the canonical map~$\glie \to \Univ(\glie)$.
  Hence~$\Univ(\glie)$ is spanned by the elements~$x_i$ with~$i \in I$.
  This means that the momomials~$x_{i_1} \dotsm x_{i_n}$ with~$n \geq 0$ and~$i_1, \dotsc, i_n \in I$ span~$\Univ(\glie)$ as a vector space.
  By the above discussion we should hopefully be able to rearrange the terms~$x_{i_j}$ in these monomials without destroying the property of being a vector space generating set.
  We will see in \cref{pbw concrete generating part} that this is indeed the case.
  
  We will overall show in \cref{pbw concrete} that if we fix an ordering of the basis elements~$x_i$ then the collection of all ordered monomials will form a basis of the universal enveloping algebra~$\Univ(\glie)$.
  We will also see un \cref{pbw abstract} that this is equivalent to~$\gr(\Univ(\glie))$ being isomorphic (as graded algebras) to the symmetric algebra~$\Symm(\glie)$ and hence a polynomial algebra~$\kf[t_i \suchthat i \in I]$.
\end{fluff}


\begin{lemma}
  \label{rearranging lemma}
  There exists for all~$y_1, \dotsc, y_n \in \glie$ and every permutation~$\sigma \in S_n$ some error term~$r \in \Univ(\glie)_{(n-1)}$ with
  \[
    y_1 \dotsm y_n
    =
    y_{\sigma(1)} \dotsm y_{\sigma(n)}
    +
    r  \,.
  \]
\end{lemma}


\begin{proof}
  It sufficies to prove the statement for~$\sigma$ being a simple transposition because these generate the symmetric group~$S_n$.
  So let~$\sigma = (i, i+1)$.
  Then
  \[
    y_i y_{i+1}
    =
    y_{i+1} y_i + [y_i, y_{i+1}]
  \]
  and hence
  \begin{align*}
    y_1 \dotsm y_n
    =
    y_1 \dotsm y_i y_{i+1} \dotsm y_n
    =
    (y_1 \dotsm y_{i+1} y_i \dotsm y_n)
    +
    (y_1 \dotsm [y_i, y_{i+1}] \dotsm y_n)
  \end{align*}
  with~$y_1 \dotsm [y_i, y_{i+1}] \dotsm y_n \in \Univ(\glie)_{(n-1)}$.
\end{proof}


\begin{convention}
  We suppose that~$(I, \leq)$ is a totally ordered set.
  For every~$n \geq 0$ we set
  \[
    I^n
    \defined
    \{
      (i_1, \dotsc, i_n)
    \suchthat
      \text{$i_1, \dotsc, i_n \in I$ with~$i_1 \leq \dotsb \leq i_n$}
    \}
  \]
  as well as~$I^{(n)} \defined \bigcup_{m=0}^n I^m$ and overall~$I^* \defined \bigcup_{n \geq 0} I^n$.
  For every tupel~$\alpha \in I^*$ with~$\alpha = (i_1, \dotsc, i_n)$ we define the associated \defemph{ordered monomial}~$\gls*{ordered monomial} \in \Univ(\glie)$\index{ordered monomial} as
  \[
    x_\alpha
    \defined
    x_{i_1} \dotsm x_{i_n}  \,.
  \]
  
  For~$\alpha, \beta \in I^*$ we denote by~$\alpha \cdot \beta \in I^*$ the tupel that results from the concatenation of~$\alpha$ and~$\beta$ by reordering of the entries.
  More explicitely, if~$\alpha = (i_1, \dotsc, i_n) \in I^n$ and~$\beta = (j_1, \dotsc, j_m) \in I^m$ then by reordering the entries of the concatenation~$(i_1, \dotsc, i_n, j_1, \dotsc, j_m)$ into increasing order we arrive at~$\alpha \cdot \beta \in I^{n+m}$.
  For~$i \in I$ and~$\alpha \in I^*$ we define~$i \cdot \alpha \in I^*$ by identifying~$I$ with~$I^1$.
  More explicitely, if~$\alpha = (i_1, \dotsc, i_n)$ with~$i_1 \leq \dotsb \leq i_k \leq i \leq i_{k+1} \leq \dotsb \leq i_n$ then~$i \cdot \alpha = (i_1, \dotsc, i_k, i, i_{k+1}, \dotsc, i_n)$.
  
  If~$i \in I$ and~$\alpha \in I^*$ with~$\alpha = (i_1, \dotsc, i_n)$ then we write~$i \leq \alpha$ to mean that~$i \leq i_1$.
  For~$\alpha = ()$ we have~$i \leq \alpha$ for every~$i \in I$ by definition.
\end{convention}


\begin{theorem}[Poincar\'{e}--Birkhoff--Witt (concrete version)]
  \label{pbw concrete}
  The elements~$x_\alpha$ with~$\alpha \in I^*$ form a~{\basis{$\kf$}} of~$\Univ(\glie)$.%
  \footnote{This includes that they are pairwise different.}
\end{theorem}


\begin{remark}
  The proposed basis~$x_\alpha$ with~$\alpha \in I^*$ may be written as
  \[
    x_{i_1}^{p_1} \dotsm x_{i_n}^{p_n}
    \qquad
    \text{with~$n \geq 0$,~$i_1, \dotsc, i_n \in I$,~$i_1 < \dotsb < i_n$,~$p_1, \dotsc, p_n \geq 1$} \,,
  \]
  which explains why we call them \emph{ordered monomials}.
\end{remark}


\begin{example}
  \leavevmode
  \begin{enumerate}
    \item
      If~$\glie$ is a finite dimensional Lie algebra with basis~$x_1, \dotsc, x_n$ then the algebra~$\Univ(\glie)$ has the ordered monomials~$x_1^{p_1} \dotsm x_n^{p_n}$ with~$p_1, \dotsc, p_n \geq 0$ as a basis.
    \item
      A basis of~$\Univ(\sllie_2(\kf))$ is given by the ordered monomials~$e^n h^m f^k$ with~$n, m, k \geq 0$.
  \end{enumerate}
\end{example}


\begin{example}
  Once the PBW~theorem is proven we can give a counterexample for \cref{generators of associated graded}:
  Let~$\glie = \sllie_2(\kf)$ and let~$A \defined \Univ(\glie)$ with the standard filtration induced from the standard grading of the tensor algebra~$\Tensor(\glie)$.
  We already know that~$\Univ(\glie)$ is generated as a~{\algebra{$\kf$}} by the elements~$e$,~$h$~and~$f$.
  It follows from the relation~$[e,f] = h$ that~$A$ is already generated by the two elements~$e$~and~$f$.
  But the associated graded algebra~$\gr(A)$ is not generated by the associated elements~$[e]_1$ and~$[f]_1$ because they only result is the basis elements~$e^n f^k$ with~$n, k \geq 0$.
  We are hence missing all basis elements~$e^n h^m f^k$ with~$n, k \geq 0$ and~$m \geq 1$.
\end{example}


\begin{lemma}
  \label{pbw concrete generating part filtered part}
  The ordered monomials~$x_\alpha$ with~$\alpha \in I^{(n)}$ span the vector space~$\Univ(\glie)_{(n)}$.
\end{lemma}


\begin{proof}
  We show the \lcnamecref{pbw concrete generating part filtered part} by induction over~$n$.
  For~$n = 0$ we have
  \[
    \Univ(\glie)_{(0)}
    =
    \kf
    =
    \gen{ 1 }_{\kf}
    =
    \gen{ x_{()} }_{\kf}
    =
    \gen{ x_\alpha \suchthat \alpha \in I^{(0)} }_{\kf}
  \]
  where~$()$ denotes the empty tupel, the only element of~$I^{(0)} = I^{0}$.
  
  Suppose now that the statement holds for some~$n \geq 0$.
  The homogeneous part~$\gr(\Univ(\glie))_{(n+1)}$ is spanned by all monomials~$x_{i_1} \dotsm x_{i_{n+1}}$ with~$i_1, \dotsc, i_{n+1} \in I$.
  It hence sufficies to show that every such monomials can be expressed via the proposed generators~$x_\alpha$ with~$\alpha \in I^{(n+1)}$.
  We know from \cref{rearranging lemma} that
  \[
    x_{i_1} \dotsm x_{i_{n+1}}
    =
    x_\alpha + r
  \]
  for some~$\alpha \in I^{(n+1)}$ and~$r \in \gr(\Univ(\glie))_{(n)}$ by rearranging the factors~$x_{i_j}$.
  The additional term~$r$ can by induction hypothesis be expressed as a linear combination of those~$x_\beta$ with~$\beta \in I^{(n)}$.
  The claim now follows because~$I^{(n)} \subseteq I^{(n+1)}$.
\end{proof}


\begin{corollary}
  \label{pbw concrete generating part}
  The elements~$x_\alpha$ with~$\alpha \in I^*$ span the algebra~$\Univ(\glie)$ as a vector space.
  \qed
\end{corollary}


\begin{construction}
  To show the linear independence of the elements~$x_\alpha$ with~$\alpha \in I^*$ we use a general construction from representation theory that weâ€™re about to introduce:
  
  Suppose that we are given a vector space generating set~$(b_j)_{j \in J}$ of~$A$, which we would like to show to be a basis of~$A$.
  For this we construct an~{\module{$A$}}~$M$ together with an element~$m_0 \in M$ such that the elements~$b_j m_0$ with~$j \in J$ are linearly dependent in~$M$.
  It then follows that the elements~$b_j$ with$~j \in J$ are linearly independent.
  
  The main idea behind the construction of~$M$ --- and why such a module should exist in the first place --- is that if the elements~$b_j$ with~$j \in J$ are indeed a basis for$~A$ then we could choose~$M = A$ and~$m_0 = 1$.
  To construct the module~$M$ we therefore start by taking as its underlying vector space the free vector space on a basis~$B_j$ with~$j \in J$.
  We then want~$A$ to act on~$M$ in the same way as it acts on itself.
  
  How exactly the construction of this~{\module{$A$}} structure on~$M$ can be achieved depends on the given situation.
  We will outline two strategies here:
  The first is a very general one, whereas the second one will be used for the proof of the PBW~theorem:
  \begin{enumerate}
    \item
      We assume that~$A$ is given by some algebra generators~$x_i$ with~$i \in I$ and some relations between these generators.
      We can encode the action of the generators~$x_i$ on~$A$ by considering for all~$i \in I$ and~$j \in J$ a linear combination~$x_i b_j = \sum_{k \in J} c_{ij}^k b_k$ (if the~$b_j$ are indeed a basis for~$A$ then the coefficients~$c_{ij}^k$ will a posteriori turn out to be unique).
      We want to define an action of~$A$ on~$M$ via~$x_i B_j = \sum_{k \in J} c_{ij}^k B_k$ for all~$i \in I$ and~$j \in J$.
      We do so in two steps:
      \begin{enumerate}
        \item
          We first define a~{\module{$\kf\gen{X_i \suchthat i \in I}$}} structure on~$M$ via~$X_i \cdot B_j = \sum_{k \in I} c_{ij}^k B_k$.
          We can do this because a~{\module{$\kf\gen{X_i \suchthat i \in I}$}} structure on~$M$ is the same an algebra homomorphism~$\kf\gen{X_i \suchthat i \in I} \to \End_{\kf}(M)$, which can be constructed by using the universal property of~$\kf\gen{X_i \suchthat i \in I}$.
        \item
          We then check that this action descends to an~{\module{$A$}} structure on~$M$ by checking that it is compatible with the given relations between the algebra generators~$x_i$.
      \end{enumerate}
    \item
      Suppose that~$A = \Univ(\glie)$ is the universal enveloping algebra of some Lie~algebra~$\glie$.
      Then an~{\module{$A$}} structure on~$M$ is the same as letting~$\glie$ act on~$M$ so that~$x.y.m - y.x.m = [x,y].m$ for all~$x, y \in \glie$ and~$m \in M$.
      We will therefore try to construct such an action instead.
      We will do so in the given situation by considering a filtration~$M = \bigcup_{n \geq 0} M_{(0)}$ by linear subspaces~$M_{(i)}$ of~$M$ and then inductively construct partial actions~$\varphi_n \colon \glie \times M_{(n)} \to M_{(n+1)}$ that extend each other.
  \end{enumerate}
  
  For the last step we assume that~$1_A = b_k$ for some~$k \in J$.
  We then show that for~$m_0 \defined B_k$ we have~$b_j m_0 = B_j$ for all~$j \in J$, giving us the desired linear independence of the elements~$b_j m_0$ with~$j \in J$.

  We observe that if~$(b_j)_{j \in J}$ is indeed a basis of~$A$ then this construction of the~{\module{$A$}}~$M$ has to go through, as it is just an artifical reconstruction of the welldefined~{\module{$A$}}~$M = A$.
  So if the construction succeeds then we have shown that~$(b_j)_{j \in J}$ is indeed a basis for~$A$, but if the cnostruction fails then we have shown that itâ€™s not a basis.
\end{construction}


\begin{example}
  \label{linear independence for weyl algebra}
  Let us return to the Weyl~algebra~$A \defined \kf\gen{X, Y}/(YX - XY - 1)$\index{Weyl!algebra} from \cref{weyl algebra}.
  We again denote the residue classes of~$X$ and~$Y$ in~$A$ by~$x$ and~$y$.
  We still need to prove \cref{linear independence of monomials} from \cref{weyl algebra}, that the monomials~$x^n y^m$ with~$n, m \geq 0$ are linearly independent in~$A$.
  
  Let~$M$ be the free vector space on a basis~$T^n U^m$ with~$n, m \geq 0$.
  (The basis element~$T^n U^m$ of~$M$ corresponds to the proposed basis element~$x^n y^m$ of~$A$.)
  The action of the two algebra generators~$x$ and~$y$ of~$A$ on the vector space generators~$x^n y^m$ of~$A$ is given by
  \begin{align*}
    x \cdot x^n y^m
    &=
    x^{n+1} y^m \,,
    \\
    y \cdot x^n y^m
    &=
    x^n y^{m+1} + n x^{n-1} y^m
  \end{align*}
  for all~$n, m \geq 0$.
  We therefore define a~{\module{$\kf\gen{X,Y}$}} structure on~$M$ by
  \begin{align*}
    X \cdot T^n U^m
    &=
    T^{n+1} U^m \,,
    \\
    Y \cdot T^n U^m
    &=
    T^n U^{m+1} + n T^{n-1} U^m
  \end{align*}
  for all~$m, n \geq 0$.
  This action descends to an~{\module{$A$}} structure on~$M$ because for all~$m, n \geq 0$,
  \begin{gather*}
    YX \cdot T^n U^m
    =
    Y \cdot T^{n+1} U^m
    =
    T^{n+1} U^{m+1} + (n+1) T^n U^m
  \shortintertext{and}
    XY \cdot T^n U^m
    =
    X \cdot ( T^n U^{m+1} + n T^{n-1} U^m )
    =
    T^{n+1} U^{m+1} + n T^n U^m
  \end{gather*}
  and hence
  \[
    (YX - XY - 1) \cdot T^n U^m
    =
    0 \,.
  \]
  We have that for every~$m \geq 0$ that
  \[
    y \cdot T^0 U^m
    =
    Y \cdot T^0 U^m
    =
    T^0 U^{m+1}
  \]
  and hence inductively
  \[
    y^k \cdot T^0 U^m
    =
    T^0 U^{m+k}
  \]
  for every~$k \geq 0$.
  It follows that
  \[
    x^n y^m \cdot T^0 U^0
    =
    x^n \cdot T^0 U^m
    =
    T^n U^m
  \]
  for all~$n, m \geq 0$.
  It now follows from the linear independence of the basis elements~$T^n U^m$ of~$M$ that the elements~$x^n y^m$ are linearly independent in~$A$.
\end{example}


\begin{example}
  Similar approaches can be applied when it comes to other algebraic structures, as for example groups:
  \begin{enumerate}
    \item
      If~$X$ is a set and~$F$ is the free group on~$X$ then every element of~$F$ can be uniquely written as a reduced word in~$X^{\pm 1}$.
      The uniqueness of such a reduced expression can be shown by letting~$F$ act on the set of all reduced words.
    \item
      Let~$G_i$ with~$i \in I$ be a collection of groups and let~$H$ be a group.
      For every~$i \in I$ let~$f_i \colon H \to G_i$ be a group homomorphism.
      Then elements of the resulting amalgamated product~$A = \ast_{H,i \in I} G_i$ can be represented in certain a canonical form, the uniqueness of which can be shown by letting~$A$ act on the set of all possible canonical forms.
      We refer to \cite[\S 1.2]{trees} for more information on this example.
  \end{enumerate}
\end{example}


\begin{proof}[Proof of \cref{pbw concrete}]
  By \cref{pbw concrete generating part} the elements~$x_\alpha$ with~$\alpha \in I^*$ span~$\Univ(\glie)$ as a vector space, but we still need to show that they are linearly independent.
  
  Let~$V$ be a vector space with basis~$X_{i_1} \dotsm X_{i_n}$ where~$n \geq 0$ and~$(i_1, \dotsc, i_n) \in I^n$.
  This means that for every~$\alpha \in I^*$ with~$\alpha = (i_1, \dotsc, i_n)$ we have an associated basis element
  \[
    X_\alpha
    \defined
    X_{i_1} \dotsm X_{i_n}
  \]
  of~$V$.
  For every~$n \geq 0$ we denote by~$V_{(n)} \subseteq V$ the~{\linear{$\kf$}} subspace spanned by all~$X_\alpha$ with~$\alpha \in I^{(n)}$.

  \begin{claim*}
    There exists a unique sequence~$(\varphi_n)_{n \geq 0}$ of bilinear maps
    \[
      \varphi_n
      \colon
      \glie \times V_{(n)}
      \to
      V_{(n+1)},
      \quad
      (x,p)
      \mapsto
      x.p
    \]
    that satisfy the following conditions:
    \begin{enumerate}
    \item
      \label{pbw restriction coincides}
      The restriction of~$\varphi_{n+1}$ to~$\glie \times V_{(n)}$ coincides with~$\varphi_n$ for every~$n \geq 0$.%
      \footnote{This condition actually follows from the other conditions by the uniqueness of the sequence~$(\varphi_n)_{n \geq 0}$.
    See \cite[\S 17.4]{Humphreys} for more details on this.}
    \item
      \label{pbw representation of lie algebra}
      $x_i.x_j.X_\alpha - x_j.x_i.X_\alpha = [x_i, x_j].X_\alpha$ for all~$i,j \in I$ and~$\alpha \in I^*$.
    \item
      \label{pbw essential condition}
      $x_i.X_\alpha = X_{i \cdot \alpha}$ for all~$i \in I$ and~$\alpha \in I^*$ with $i \leq \alpha$.
    \item
      \label{pbw technical detail for construction}
      $x_i.X_\alpha \equiv X_{i \cdot \alpha} \pmod{V_{(n)}}$ for all~$n \geq 0$,~$i \in I$ and~$\alpha \in I^{(n)}$.
    \end{enumerate}
 \end{claim*}

  \begin{proof}
    Let us first point out that the notation~$x.p$ with~$x \in \glie$ and~$p \in V$ is unambiguous by condition~\ref{pbw restriction coincides};
    we do not need to worry about which~$\varphi_n$ it refers to.
    The maps~$\varphi_n$ will be defined by induction over~$n \geq 0$:
    
    To define the map~$\varphi_0$ we do not have to consider condition~\ref*{pbw restriction coincides}.
    The linear subspace~$V_{(0)}$ is {\onedimensional} and spanned by the single element $X_{()}$.
    We see from condition~\ref*{pbw essential condition} that we need
    \[
      x_i.1
      =
      x_i.X_{()}
      =
      X_{i \cdot ()}
      =
      X_i
    \]
    for every~$i \in I$.
    We take this as the definition for~$\varphi_0$.
    Conditions~\ref*{pbw essential condition} hence hold by choice of~$\varphi_0$~and condition~\ref*{pbw technical detail for construction} follows from this (because always~$i \leq \alpha$ for~$n = 0$).
    Condition~\ref*{pbw representation of lie algebra} does not affect the case~$n = 0$ yet.
  
    Let now~$n \geq 0$ and suppose that~$\varphi_m$ is constructed for every~$m \leq n$.
    To construct~$\varphi_{n+1}$ we need by condition~\ref*{pbw restriction coincides} define only~$x_i.X_\alpha$ for~$\alpha \in I^{n+1}$.
    
    If~$i \leq \alpha$ then we set
    \begin{equation}
      \label{formula for smaller case}
      x_i.X_\alpha
      \defined
      X_{i \cdot \alpha}
    \end{equation}
    to ensure condition~\ref*{pbw essential condition} for~$\varphi_{n+1}$.
    Otherwise we can write~$\alpha = j \cdot \beta$ for some~$j \in I$ and~$\beta \in I^n$ with~$j \leq \beta$ and~$i > j$.
    It then follows from condition~\ref*{pbw representation of lie algebra} and~\ref*{pbw essential condition} that we need
    \[
      x_i.X_\alpha
      =
      x_i.X_{j \cdot \beta}
      =
      x_i.x_j.X_\beta
      =
      x_j.x_i.X_\beta + [x_i, x_j].X_\beta  \,.
    \]
    The second summand~$[x_i, x_j].X_\beta$ is already defined by induction hypothesis.
    For the first summand we observe that by condition~\ref*{pbw technical detail for construction} for~$\varphi_n$ we have
    \[
      x_i.X_\beta
      \equiv
      X_{i \cdot \beta}
      \mod
      V_{(n)}
    \]
    and hence~$x_i.X_\beta = X_{i \cdot \beta} + R$ for some unique error term~$R \in V_{(n)}$.
    It follows from~$j < i$ and~$j \leq \beta$ and that~$j \leq i \cdot \beta$.
    Hence the product~$x_j.X_{i \cdot \beta}$ needs to be given by
    \[
      x_j.X_{i \cdot \beta}
      =
      X_{j \cdot i \cdot \beta}
      =
      X_{i \cdot j \cdot \beta}
      =
      X_{i \cdot \alpha}  \,.
    \]
    Altogether we need that
    \begin{equation}
      \label{formula for bigger case}
      \begin{aligned}
        x_i.X_\alpha
        &=
        x_i.X_{j \cdot \beta}
        \\
        &=
        x_i.x_j.X_\beta
        \\
        &=
        x_j.x_i.X_\beta + [x_i, x_j].X_\beta
        \\
        &=
        x_j.(X_{i \cdot \beta} + R) + [x_i, x_j].X_\beta
        \\
        &=
        x_j.X_{i \cdot \beta} + x_j.R + [x_i, x_j].X_\beta
        \\
        &=
        X_{i \cdot \alpha} + x_j.R + [x_i, x_j].X_\beta
      \end{aligned}
    \end{equation}
    with~$j$ the first term of~$\alpha$,~$\beta$ the rest of~$\alpha$ and~$R = x_i.X_\beta - X_{i \cdot \beta}$.
    Every term of the last expression is already defined by~$\varphi_n$, which shows the uniqueness of~$\varphi_{n+1}$.
    We take~\eqref{formula for bigger case} as the definition of~$x_i.X_\alpha$ for~$i \nleq \alpha$.
    
    We overall define~$\varphi_{n+1}$ as the unique bilinear extension of~$\varphi_n$ such that~$x_i.X_\alpha$ is given on the additional elements with~$\alpha \in I^{n+1}$ given by~\eqref{formula for smaller case} and~\eqref{formula for bigger case} (depending on whether~$i \leq \alpha$ or not).
    
    Condition~\ref*{pbw restriction coincides} holds by construction of~$\varphi_{n+1}$ an an extension of~$\varphi_n$.
    Condition~\ref*{pbw essential condition} also holds by construction, namely by the corresponding property of~$\varphi_n$ together with the definition of~$x_i.X_\alpha$ for~$i \leq \alpha$ and~$\alpha \in I^{n+1}$ by formula~\eqref{formula for smaller case}.
    Condition~\ref*{pbw technical detail for construction} holds in the case~$i \leq \alpha$ by condition~\ref*{pbw essential condition} and otherwise by the corresponding property for~$\varphi_n$ or for~$\alpha \in I^{n+1}$ by the definition of~$\varphi_{n+1}$ via~\eqref{formula for bigger case}, because
    \[
      x_i.X_\alpha - X_{i.\alpha}
      =
      x_j.R + [x_i, x_j].X_\beta
      \in
      V_{(n)} \,.
    \]
  
    It remains to check condition~\ref*{pbw representation of lie algebra} for~$\varphi_{n+1}$.
    We only need to check this condition for~$i,j \in I$ and~$\alpha \in I^n$ as all other cases are covered by the corresponding property of~$\varphi_n$.
    For~$i = j$ the needed equality follows from the Lie~bracket being alternating.
    We therefore consider in the following only the case~$i \neq j$.
    We consider different cases:
    
    \begin{description}
      \item[Case~1 \textup($i \leq \alpha$\textup):]
        We consider two subcases:
        \begin{description}
          \item[Case~1.1 \textup($i \leq \alpha$,~$i < j$\textup):]
            In this case~$j \nleq i \cdot \alpha$ and we can apply (the first lines of)~\eqref{formula for bigger case} to find that
            \[
              x_j.x_i.X_\alpha
              =
              x_j.X_{i \cdot \alpha}
              =
              x_i.x_j.X_\alpha + [x_j,x_i].X_\alpha \,.
            \]
            By rearranging this equation we get the desired equality for the given case.
          \item[Case~1.2 \textup($i \leq \alpha$,~$i > j$\textup):]
            It follows in this case that~$j \leq \alpha$.
            We therefore find by the previous case that
            \[
              x_j.x_i.X_\alpha - x_i.x_j.X_\alpha
              =
              [x_j, x_i].X_\alpha \,.
            \]
            By using that the Lie~bracket~$[-,-]$ is skew symmetric we get the desired equality
            \[
              [x_i, x_j].X_\alpha
              =
              -[x_j, x_i].X_\alpha
              =
              -(x_j.x_i.X_\alpha - x_i.x_j.X_\alpha)
              =
              x_i.x_j.X_\alpha - x_j.x_i.X_\alpha \,.
            \]
        \end{description}
      \item[Case~2 \textup($j \leq \alpha$\textup):]
        This follows from the previous case because the Lie~bracket~$[-,-]$ is skew-symmetric.
      \item[Case~3 \textup($i \nleq \alpha$,~$j \nleq \alpha$\textup):]
        This case cannot happen for~$n = 0$ because then~$i \leq () = \alpha$.
        So we may assume that~$n \geq 1$.
        We can then split up the index~$\alpha$ as~$\alpha = k \cdot \beta$ where~$k \in I$ is the first term of~$\alpha$ and~$\beta \in I^{n-1}$ is the rest of~$\alpha$.
        We then have
        \[
          X_\alpha
          =
          X_{k \cdot \beta}
          =
          x_k.X_\beta \,.
        \]
        We know from the induction hypothesis that condition~\ref*{pbw representation of lie algebra} holds for~$\varphi_n$.
        We therefore have
        \[
          x_j.X_\alpha
          =
          x_j.x_k.X_\beta
          =
          x_k.x_j.X_\beta + [x_j, x_k].X_\beta  \,.
        \]
        By acting with~$x_i$ on this equation we find the equality
        \begin{equation}
          \label{long equation}
          x_i.x_j.X_\alpha
          =
          x_i.x_k.x_j.X_\beta + x_i.[x_j,x_k].X_\beta \,.
        \end{equation}
        To reshape the first summand we want to apply condition~\ref*{pbw representation of lie algebra} to find for the element~$Y = x_j.X_\beta$ that
        \begin{equation}
          \label{wanted equation for pbw}
          x_i.x_k.Y
          =
            x_k.x_i.Y
          + [x_i, x_k].Y  \,.
        \end{equation}
        But for this we need to explain why condition~\ref*{pbw representation of lie algebra} can be applied.
        We observe that
        \[
          x_j.X_\beta
          \equiv
          X_{j \cdot \beta}
          \mod
          V_{(n-1)}
        \]
        by condition~\ref*{pbw technical detail for construction}, so that
        \[
          Y
          =
          x_j.X_\beta
          =
          X_{j \cdot \beta} + R 
        \]
        for some rest term~$R \in V_{(n-1)}$.
        The desired equation~\eqref{wanted equation for pbw} holds when we replace~$Y$ by~$R$ because~$\varphi_n$ satisfies condition~\ref*{pbw representation of lie algebra} for every~$X_\gamma$ with~$\gamma \in I^{(n-1)}$ and therefore for every~$R' \in V_{(n-1)}$.
        It follows from the previous cases that equation~\eqref{wanted equation for pbw} also holds when we replace~$Y$ by~$X_{j \cdot \beta}$ because it follows from~$k < j$ and~$k \leq \beta$ that~$k \leq j \cdot \beta$.5
        It follows by additivity that equation~\eqref{wanted equation for pbw} also holds for~$Y = X_{j \cdot \beta} + R$.
        
        By inserting~\eqref{wanted equation for pbw} with~$Y = x_j.X_\beta$ into the identity~\eqref{long equation} we find
        \[
          x_i.x_j.X_\alpha
          =
            x_k.x_i.x_j.X_\beta
          + [x_i, x_k].x_j.X_\beta
          + x_i.[x_j,x_k].X_\beta \,.
        \]
        We may swap the roles of~$i$ and~$j$ to also find
        \[
          x_j.x_i.X_\alpha
          =
            x_k.x_j.x_i.X_\beta
          + [x_j, x_k].x_i.X_\beta
          + x_j.[x_i,x_k].X_\beta \,.
        \]
        By subtracting these two identities we find
        \begin{align*}
          {}&
          x_i.x_j.X_\alpha - x_j.x_i.X_\alpha
          \\
          ={}&
            x_k.x_i.x_j.X_\beta
          + [x_i, x_k].x_j.X_\beta
          + x_i.[x_j,x_k].X_\beta
          - x_k.x_j.x_i.X_\beta
          - [x_j, x_k].x_i.X_\beta
          - x_j.[x_i,x_k].X_\beta \,.
        \end{align*}
        By using that condition~\ref*{pbw representation of lie algebra} holds for~$\varphi_n$ we find that
        \begin{align*}
          {}&
            \underbrace{ x_k.x_i.x_j.X_\beta }_{1}
          + \underbrace{ [x_i, x_k].x_j.X_\beta }_{2}
          + \underbrace{ x_i.[x_j,x_k].X_\beta }_{3}
          - \underbrace{ x_k.x_j.x_i.X_\beta }_{1}
          - \underbrace{ [x_j, x_k].x_i.X_\beta }_{3}
          - \underbrace{ x_j.[x_i,x_k].X_\beta }_{2}
          \\
          ={}&
            x_k.[x_i, x_j].X_\beta
          + [[x_i, x_k], x_j].X_\beta
          + [x_i, [x_j, x_k]].X_\beta \,.
        \end{align*}
        It follows from the Jacobi~identity that
        \[
          [[x_i, x_k], x_j] + [x_i, [x_j, x_k]]
          =
          [x_j, [x_k, x_i]] + [x_i, [x_j, x_k]]
          =
          -[x_k, [x_i, x_j]]
        \]
        and therefore
        \begin{align*}
          {}&
            x_k.[x_i, x_j].X_\beta
          + [[x_i, x_k], x_j].X_\beta
          + [x_i, [x_j, x_k]].X_\beta
          \\
          ={}&
            x_k.[x_i, x_j].X_\beta
          - [x_k, [x_i, x_j]].X_\beta
          \\
          ={}&
            x_k.[x_i, x_j].X_\beta
          - x_k.[x_i, x_j].X_\beta
          + [x_i, x_j].x_k.X_\beta
          \\
          ={}&
          [x_i, x_j].x_k.X_\beta
          \\
          ={}&
          [x_i, x_j].X_{k \cdot \beta}
          \\
          ={}&
          [x_i, x_j].X_\alpha \,.
        \end{align*}
        We used for the last two steps that~$k \leq \beta$ with~$k \cdot \beta = \alpha$ by choice of~$\alpha$ and~$\beta$.
        This shows altogether that
        \[
          x_i.x_j.X_\alpha - x_j.x_i.X_\alpha
          =
          [x_i, x_j].X_\alpha
        \]
        as desired.
      \qedhere
    \end{description}
  \end{proof}
  
  Condition~\ref*{pbw restriction coincides} ensures that the maps~$(\varphi_n)_{n \geq 0}$ combine into a single bilinear map~$\varphi \colon \glie \times V \to V$.
  Condition~\ref*{pbw representation of lie algebra} means that~$\varphi$ makes~$V$ into a~{\representation{$\glie$}}.
  The action~$\varphi$ corresponds to an~{\module{$\Univ(\glie)$}} structure on~$V$.
  For every~$\alpha \in I^*$ with~$\alpha = (i_1, \dotsc, i_n)$ we have~$i_1 \leq \dotsb \leq i_n$ and hence
  \[
    x_\alpha . X_{()}
    =
    x_{i_1} \dotsm x_{i_n} \cdot X_{()}
    =
    x_{i_1} \dotsm x_{i_{n-1}} \cdot X_{(i_n)}
    =
    \dotsb
    =
    X_{(i_1, \dotsc, i_n)}
    =
    X_\alpha  \,.
  \]
  It follows from the linear independence of the elements~$X_\alpha$ with~$\alpha \in I^*$ in~$V$ that the elements~$x_\alpha$ with~$\alpha \in I^*$ are linearly independent in~$\glie$.
\end{proof}


\begin{corollary}
  \label{pbw concrete basis part filtered part}
  For every~$n \geq 0$ the filtered part~$\Univ(\glie)_{(n)}$ has the monomials~$x_\alpha$ with~$\alpha \in I^{(n)}$ as a basis.
\end{corollary}


\begin{proof}
  These monomials are a vector space generating set by \cref{pbw concrete generating part filtered part} and they are linearly independent by the PBW~theorem.
\end{proof}


\begin{corollary}
  \label{embedding into uea}
  For any Lie~algebra~$\glie$ the canonical homomorphism~$\glie \to \Univ(\glie)$ is injective.
\end{corollary}


\begin{proof}
  If~$(x_i)_{i \in I}$ is any basis of~$\glie$ thes the associated residue classes~$\class{x_i} \in \Univ(\glie)$ are part of a basis of~$\Univ(\glie)$ by the PBW~theorem and hence linearly independent.
\end{proof}


\begin{remark}
  By \cref{embedding into uea} we may identify any Lie~algebra~$\glie$ with its image in its universal enveloping algebra~$\Univ(\glie)$.
  In the rest of these notes we will therefore regard every Lie~algebra~$\glie$ as a Lie~subalgebra of its universal enveloping algebra and the canonical homomorphism~$\glie \to \Univ(\glie)$ as the inclusion.
\end{remark}


\begin{corollary}[Existence of free Lie~algebras]
  For every set~$I$ the free~{\liealgebra{$\kf$}}\index{free Lie algebra}\index{Lie algebra!free} on~$I$ exists.
\end{corollary}


\begin{proof}
  We have seen in \cref{uea of free lie algebra} that the universal enveloping algebra of the desired free~{\liealgebra{$\kf$}}~$F(I)$ is given by the free~{\algebra{$\kf$}}~$\kf\gen{x_i \suchthat i \in I}$.
  Since then we have learned that~$F(I)$ will therefore be a Lie~subalgebra of~$\kf\gen{x_i \suchthat i \in I}$.
  We thus define~$F(I)$ to be the Lie~subalgebra of~$\kf\gen{x_i \suchthat i \in I}$ generated by the variables~$x_i$ and let~$\iota \colon I \to \glie$ be the inclusion~$i \mapsto x_i$.
  We need to check that~$(F(I), \iota)$ defined in this way is indeed a free~{\liealgebra{$\kf$}} on~$I$.
  
  So let~$\hlie$ be any other~{\liealgebra{$\kf$}} and let~$\phi \colon I \to \hlie$ be any set-theoretic map.
  Then there exists by the universal property of the free~{\algebra{$\kf$}}~$\kf\gen{x_i \suchthat i \in I}$ a (unique) algebra homomorphism~$\Phi' \colon \kf\gen{x_i \suchthat i \in I} \to \Univ(\hlie)$ with~$\Phi'(x_i) = \phi(i)$ for every~$i \in I$.
  The image of~$F(I)$ under~$\Phi'$ lies in the Lie~subalgebra of~$\Univ(\hlie)$ that is generated by all~$\phi(i)$ with~$i \in I$, which in turn is contained in~$\hlie$.
  Hence the algebra homomorphism~$\Phi'$ restricts to a linear map~$\Phi \colon F(I) \to \hlie$, which is again a homomorphism of Lie~algebras.
  It follows from the commutativity of the square diagram
  \[
    \begin{tikzcd}[column sep = large]
      I
      \arrow{r}[above]{\phi}
      \arrow{d}[left]{i \mapsto x_i}
      &
      \hlie
      \arrow{d}
      \\
      \kf\gen{x_i \suchthat i \in I}
      \arrow[dashed]{r}[below]{\Phi'}
      &
      \Univ(F(I))
    \end{tikzcd}
  \]
  that the restricted diagram
  \[
    \begin{tikzcd}
      I
      \arrow{r}[above]{\phi}
      \arrow{d}[left]{\iota}
      &
      \hlie
      \arrow[equal]{d}
      \\
      F(I)
      \arrow[dashed]{r}[below]{\Phi}
      &
      \hlie
    \end{tikzcd}
  \]
  also commutes.
  We have thus shown the existence of an induced homomorphism~$\Phi \colon F(I) \to \hlie$ that makes the triangular diagram
  \[
    \begin{tikzcd}
      I
      \arrow{d}[left]{\iota}
      \arrow{r}[above]{\phi}
      &
      \hlie
      \\
      F(I)
      \arrow[dashed]{ur}[below right]{\Phi}
      &
      {}
    \end{tikzcd}
  \]
  commute.
  The uniqueness of this induced homomorphism follows from~$F(I)$ being generated by the image of~$\iota$.
\end{proof}


\begin{remark}
  Using the concept of free Lie~algebras one can define Lie~algebras by giving a set of generators~$X$ and a set of relations~$R \subseteq F(X)$.
\end{remark}


\begin{example}
  The Lie~algebra~$\sllie_2(\kf)$ can be defined by the generators~$X = \{e, h, f\}$ and the relations~$R = \{[h,e] - 2e, [h,f] + 2f, [e,f] - h\}$, which are usually written as~$[h,e] = 2e$,~$[h,f] = -2f$ and~$[e,f] = h$.
  
  One can more generally describe for every~$n \geq 1$ the Lie~algebra~$\sllie_{n+1}(\kf)$ by generators~$e_i$,~$f_i$, and~$h_i$ with~$i = 1, \dotsc, n$ subject to the relations
  \begin{align*}
    [h_i, h_j] = 0  \,,
    \quad
    [h_i, e_j] = a_{ij} e_j \,,
    \quad
    [h_i, f_j] = -a_{ij} f_j  \,,
    \quad
    [e_i, f_j] = \delta_{ij} h_i
  \end{align*}
  for all~$i,j = 1, \dotsc, n$ together with the relations
  \[
    \ad(e_i)^{1-a_{ij}}(e_j) = 0
    \quad\text{and}\quad
    \ad(f_i)^{1-a_{ij}}(f_j) = 0
  \]
  for all~$1 \leq i \neq j \leq n$, where the numbers~$a_{ij}$ are for all~$i,j = 1, \dotsc, n$ given by
  \[
    a_{ij} =
    \begin{cases}
    \phantom{-}2 & \text{if $i = j$}  \,, \\
              -1 & \text{if $|i-j| = 1$}  \,, \\
    \phantom{-}0 & \text{otherwise} \,.
    \end{cases}
  \]
\end{example}


\begin{corollary}
  \label{uea of direct sum of subspaces}
  Let~$\glie$ be a Lie algebra and let~$\hlie$ and~$\klie$ be two Lie~subalgebras of~$\glie$ with~$\glie = \hlie \oplus \klie$ as vector spaces.
  Then the multiplication map
  \[
    \Univ(\hlie) \tensor \Univ(\klie)
    \to
    \Univ(\glie) \,,
    \quad
    x \tensor y
    \mapsto
    xy
  \]
  is an isomorphism of vector spaces.
\end{corollary}


\begin{proof}
  Let~$(x_i)_{i \in I}$ be a basis of~$\hlie$ and let $(x_j)_{j \in J}$ be a basis of~$\klie$ where the index sets~$I$ and~$J$ are disjoint.
  Then $(x_k)_{k \in K}$ for the index set~$K \defined I \cup J$ is a basis of~$\glie$.
  Let~$(I, \leq)$ and~$(J, \leq)$ be linearly ordered.
  Then we can extend these two orders to a linear order on~$K$ such that~$i \leq j$ for all~$i \in I$ and~$j \in J$.
  We get from the PBW~theorem induced bases of~$\Univ(\hlie)$ and~$\Univ(\klie)$, and hence an induced basis of~$\Univ(\hlie) \tensor \Univ(\klie)$, as well as an induced basis of~$\Univ(\glie)$.
  The multiplication map~$\Univ(\hlie) \tensor \Univ(\klie) \to \Univ(\glie)$ is bijective on these bases and hence an isomorphism of vector spaces.
\end{proof}


\begin{remark}
  \Cref{uea of direct sum of subspaces} proves again that for all Lie~algebras~$\glie$ and~$\hlie$ the algebra homomorphism~$\Univ(\glie) \tensor \Univ(\hlie) \to \Univ(\glie \times \hlie)$ induced by the inclusions~$\glie \to \glie \times \hlie$ and~$\hlie \to \glie \times \hlie$ is an isomorphism of vector spaces, and hence an isomorphism of~{\algebras{$\kf$}}.
\end{remark}


\begin{remark}[The diamond lemma]
  The above proof of the PBW~theorem relies on a tactic from representation theory:
  Constructing an action on a suitable vector space for which the given generators act linearly independent (on some fixed element).
  We may ask if there is instead a proof which continues to study the commutator relation~$x_j x_i = x_i x_j + [x_i, x_j]$ with~$i, j \in I$ by exploiting that~$[x_i, x_j]$ is of smaller degree than~$x_j x_i$ and~$x_i x_j$.
  A similar question may also be asked for the Weyl~algebra.
  
  One way to do this is via the \defemph{diamond lemma}\index{diamond lemma}\index{lemma!diamond} as introduced by Bergman in~\cite{diamond_lemma}:
  Suppose that we are given an algebra~$A$ in the form of generators~$(x_i)_{i \in I}$ and relations~$\sigma \in \kf\gen{x_i \suchthat i \in I}$, $\sigma \in S$ (so that~$A = \kf\gen{x_i \suchthat i \in I}/(\sigma \suchthat \sigma \in S)$).
  Then the diamond lemma gives a criterion for showing that~$A$ admits a basis consisting of monomials in the~$x_i$, and also tells us how these monomials can be choosen.
  
  The main idea behind the diamond lemma is that one needs to be able to resolve ambiguities:
  We can represent every element of~$A$ as a linear combination of monomials in the~$x_i$, and hence as an element~$z \in \kf\gen{x_i \suchthat i \in I}$.
  Every relation~$\sigma$ between the generators can be seen as rewriting rules, that give us linear \enquote{rewriting maps}~$r_\sigma \colon \kf\gen{x_i \suchthat i \in I} \to \kf\gen{x_i \suchthat i \in I}$.
  To apply the diamond lemma we need two conditions:
  \begin{itemize}
    \item
      Whenever we apply rewritings~$r_{\sigma_1}, r_{\sigma_2}, \dotsc$ to an element~$z \in \kf\gen{x_i \suchthat i \in I}$ we want this process to stabilize after finitely many step.
    \item
      We need to be resolve ambiguities:
      Given an element~$z \in \kf\gen{x_i \suchthat i \in I}$ we can often apply different rewriting rules~$r_\sigma$ and~$r_\tau$ to it, resulting in different results~$r_\sigma(z)$ and~$r_\tau(z)$.
      We want to reconcile these different results by reducing both~$r_\sigma(z)$ and~$r_\tau(z)$ under finitely many rewritings to the same result~$z' \in \kf\gen{x_i \suchthat i \in I}$.
      We may visualize this process by the following diagram:
      \[
        \begin{tikzcd}[column sep = tiny]
          {}
          &
          z
          \arrow{dl}
          \arrow{dr}
          &
          {}
          \\
          r_\sigma(z)
          \arrow{dr}
          &
          {}
          &
          r_\tau(z)
          \arrow{dl}
          \\
          {}
          &
          z'
          &
          {}
        \end{tikzcd}
      \]
      The shape of this diagram is where the diamond lemma takes its name from.
  \end{itemize}
  
  Despite its usefulness the diamond is neither hard to state nor to prove.
  We strongly encourage the reader to check out the original paper \cite{diamond_lemma}.
  The main theorem and its proof in \cite[\S 1]{diamond_lemma} take only three pages and is self-contained.
  In \cite[\S 3]{diamond_lemma} the PBW~theorem is then shown as an example.
\end{remark}



\subsection{Abstract Version of the Poincar\'{e}--Birkhoff--Witt Theorem}


\begin{theorem}[Poincar\'{e}--Birkhoff--Witt (abstract version)]
  \label{pbw abstract}
  Let~$\glie$ be a Lie~algebra and denote by~$\pi$ the canonical projection~$\Tensor(\glie) \to \Univ(\glie)$ given by
  \[
    \pi
    \colon
    \Tensor(\glie)
    \to
    \Univ(\glie) \,,
    \quad
    x_1 \tensor \dotsb \tensor x_n
    \mapsto
    x_1 \dotsm x_n
  \]
  for all $x_1, \dotsc, x_n \in \glie$.
  Then~$\pi$ induces a homomorphism of graded~{\algebras{$\kf$}}
  \[
    \gr(\pi)
    \colon
    \Tensor(\glie)
    =
    \gr(\Tensor(\glie))
    \to
    \gr(\Univ(\glie))
  \]
  and we also have a homomorphism of graded~{\algebras{$\kf$}}~$\pi' \colon \Tensor(\glie) \to \Symm(\glie)$ that  is given by
  \[
    \pi'
    \colon
    \Tensor(\glie)
    \to
    \Symm(\glie) \,,
    \quad
    x_1 \tensor \dotsb \tensor x_n
    \mapsto
    x_1 \dotsm x_n
  \]
  for all~$x_1, \dotsc, x_n \in \glie$.
  Then both~$\pi$ and~$\pi'$ have the same kernel and thus induce an isomorphism of graded algebras~$\Symm(\glie) \to \gr(\Univ(\glie))$ given by
  \begin{equation}
    \label{definition of abstract pbw isomorphism}
    \varphi
    \colon
    \Symm(\glie)
    \to
    \gr(\Univ(\glie)) \,,
    \quad
    x_1 \dotsm x_n
    \mapsto
    [x_1 \dotsm x_n]_n \,.
  \end{equation}
  for all~$x_1, \dotsc, x_n \in \glie$.
\end{theorem}


\begin{proposition}
  The abstract versions of the PBW~theorem is equivalent to the concrete version.
\end{proposition}


\begin{proof}
  It follows from the definition of~$\gr(\pi)$ that
  \[
    \gr(\pi)(x \tensor y - y \tensor x)
    =
    [xy - yx]_2
    \in
    \gr(\Univ(\glie))_2
  \]
  for all~$x, y \in \glie$.
  We have for the occuring representative~$xy - yx \in \Univ(\glie)_{(2)}$ that
  \[
    xy - yx
    =
    [x,y]
    \in
    \Univ(\glie)_{(1)}
  \]
  and hence
  \[
    [xy - yx]_2
    =
    0 \,.
  \]
  This shows that~$\gr(\pi)(x \tensor y - y \tensor x) = 0$ for all~$x, y \in \glie$.
  The kernel of~$\pi'$ is generated by the elements~$x \tensor y - y \tensor x$ with~$x,y \in \glie$ so it follows that~$\pi'$ factors through a homomorphism of graded~\algebras{$\kf$}~$\varphi \colon \Symm(\glie) \to \gr(\Univ(\glie))$ that is given by~\eqref{definition of abstract pbw isomorphism}.
  
  \begin{implicationlist}
    \item[concrete~$\implies$~abstract:]
      It follows for every degree~$d \geq 0$ from \cref{pbw concrete basis part filtered part} that the graded component~$\gr[d](\Univ(\glie))$ has the monomials~$x_\alpha$ with~$\alpha \in I^d$ as a basis.
      The homogeneous component~$\Symm^d(\glie)$ has as a basis the simple symmetric tensors~$x_{i_1} \dotsm x_{i_d}$ with~$i_1, \dotsc, i_d \in I$ and~$i_1 \leq \dotsb \leq$.
      The homomorphism~$\varphi$ restricts to a bijection between these bases and is therefore an isomorphism (of vector spaces and hence of graded~{\algebras{$\kf$}}).
    \item[abstract~$\implies$~concrete:]
      We need to show that the monomials~$x_\alpha$ with~$\alpha \in I^*$ are linearly independent.
      Suppose otherwise.
      Then there exists some minimal~$n \geq 0$ such that the monomials~$x_\alpha$ with~$\alpha \in I^{(n)}$ are linearly dependent.
      Let
      \[
        0
        =
        \sum_{\alpha \in I^{(n)}}
        \lambda_\alpha x_\alpha
      \]
      be a non-trivial linear relation.
      Then
      \[
        0
        =
        \sum_{\alpha \in I^{(n)}}
        \lambda_\alpha x_\alpha
        \equiv
        \sum_{\alpha \in I^n}
        \lambda_\alpha x_\alpha
        \mod
        \Univ(\glie)_{(n-1)}
      \]
      and therefore
      \begin{equation}
        \label{nontrivial linear combination in graded}
        0
        =
        \sum_{\alpha \in I^n}
        \lambda_\alpha [x_\alpha]_n
      \end{equation}
      in~$\gr[n](\Univ(\glie))$.
      The minimality of~$n$ means that~\eqref{nontrivial linear combination in graded} is a non-trivial linear relation, i.e.\ that~$\lambda_\alpha \neq 0$ for some~$\alpha \in I^n$.
      By using the isomorphism~$\varphi$ we get in the corresponding graded component~$\Symm^n(\glie)$ of~$\Symm(\glie)$ a non-trivial linear relation between the simple symmetric tensors.
      But these are linear independent --- a contradiction.
    \qedhere
  \end{implicationlist}
\end{proof}


\begin{corollary}
  For every Lie~algebra~$\glie$ the universal enveloping algebra~$\Univ(\glie)$ contains no nonzero zero divisors.
\end{corollary}


\begin{proof}
  The statement holds for the associated graded algebra~$\gr(\Univ(\glie)) \cong \Symm(\glie)$ because it is an integral domain.
  It follows from \cref{associated graded algebra and zero divisors} that this also holds for~$\Univ(\glie)$.
\end{proof}


\begin{remark}
  One can think about the universal enveloping algebra~$\Univ(\glie)$ as a deformation of the symmetric algebra~$\Symm(\glie)$, in the sense that we have a family of algebras
  \[
    A_t
    \defined
    \Tensor(\glie)/(x \tensor y - y \tensor x - t[x,y] \suchthat x, y \in \glie)
  \]
  that is parametrized over a parameter~$t \in \kf$ with~$A_0 \cong \Symm(\glie)$ and~$A_1 \cong \Univ(\glie)$.
  One can then prove the abstract version of the PBW~theorem by examining this deformation.
  See~\cite{pbw_deformation} for more details on this.
\end{remark}



% 
% 
% 
% 
% %TODO: Hopf algebra structure
% 
% 
% 
% 
% 
% \section{Casimir elements}
% For this subsection we additionaly assume that $\glie$ is finite-dimensional. We also fix some bilinear form $\beta \colon \glie \times \glie \to k$ which is associative and non-degenerate.
% 
% 
% \begin{definition}\label{defi: definition of Casimir element}
%  Let $\varphi_1 \colon \glie \tensor \g^* \to \End_k(\g)$ and $\varphi_2 \colon \glie \to \g^*$ be the isomorphisms of vector spaces defined by
%  \[
%   \varphi_1(x \tensor \phi)(y) = \phi(y) x
%   \quad\text{and}\quad
%   \varphi_2(x) = \beta(x, \cdot)
%   \quad\text{for all $x,y \in \g$ and $\phi \in \g^*$}.
%  \]
%  Then the image of $1$ under the map
%  \begin{equation}\label{eqn: Casimir without coordinates}
%   k
%   \xrightarrow{\lambda \mapsto \lambda \id_\g}
%   \End_k(\g)
%   \xrightarrow{\varphi_1^{-1}}
%   \glie \tensor \g^*
%   \xrightarrow{\id_\g \tensor \varphi_2^{-1}}
%   \glie \tensor \g
%   \xrightarrow{x \tensor y \mapsto x y}
%   \Univ(\glie)
%  \end{equation}
%  is called the \emph{Casimir element of $\beta$} and denoted by $C_\beta$.
% \end{definition}
% 
% 
% \begin{lemma}
%  The Casimir element $C_\beta$ in central in $\Univ(\glie)$, i.e.\
%  \[
%   x C_\beta = C_\beta x \quad \text{for every $x \in \Univ(g)$}.
%  \]
% \end{lemma}
% \begin{proof}
%  Let $\varphi_1$ and $\varphi_2$ as in Definition \ref{defi: definition of Casimir element}.
%  
%  Because $\Univ(\glie)$ is generated by $\glie$ as a \algebra{$\kf$} it sufficies to show $C_\beta$ commutes with every $x \in \g$. Hence it is to show that
%  \[
%   [x,C_\beta] = 0 \quad \text{for every $x \in \g$},
%  \]
%  where $[\cdot,\cdot]$ denotes the Lie bracket in $\Univ(\glie)$. To see this notice that in \eqref{eqn: Casimir without coordinates} every map is a homomorphism of representations of $\glie$, where $\glie$ acts trivially on $k$, i.e. $x.\lambda = 0$ for every $x \in \g$ and $\lambda \in \g$.
%  
%  That the first map $k \to \End_k(\g)$ is a homomorphism of representations follows from the fact that $\glie$ acts trivially on $k$ and also trivially on the one-dimensional subspace $k \id_\g \subseteq \End_k(\g)$.
%  
%  That $\varphi_1$ is an isomorphism of representations is known from Propositon \ref{prop: list of homomorphism of representations}.
%  
%  That the third map $\glie \tensor \g^* \to \glie \tensor \g$ is a homomorphism of representations follows from Proposition \ref{prop: list of homomorphism of representations}, because the identity $\id_\g$ is a homomorphism of representations and and the isomorphism $\varphi_2$ is one by the associativity of $\beta$, as seen in Lemma \ref{lem: associative bilinear form induces homomorphism of representations}.
%  
%  That the fourth map $\psi \colon \glie \tensor \glie \to \Univ(\glie), x \tensor y \mapsto xy$ is a homomorphism of representations follows from direct calculation, because for all $x,y,z \in \g$
%  \begin{align*}
%   \psi(x.(y \tensor z))
%   &= \psi((x.y) \tensor z + y \tensor (x.z))
%   = (x.y)z + y(x.z) \\
%   &= [x,y]z + y[x,z]
%   = xyz - yxz + yxz - yzx
%   = xyz - yzx \\
%   &= [x,yz]
%   = x.(yz)
%   = x.\psi(y \tensor z).
%  \end{align*}
%  
%  Because every map in \eqref{eqn: Casimir without coordinates} is a homomorphism of representations it follows that their composition $\phi \colon k \to \Univ(\glie)$ is also a homomorphism of representations. Definition \ref{defi: definition of Casimir element} is then equivalent to $\phi(1) = C_\beta$. Because $\glie$ acts trivially on $k$ and $\phi$ is a homomorphism of representations it follows that $\glie$ also acts trivially on the span of $C_\beta$. In particular
%  \[
%   0 = x.C_\beta = [x,C_\beta] \quad \text{for every $x \in \g$}.
%   \qedhere
%  \]
% \end{proof}
% 
% 
% \begin{corollary}\label{cor: Casimir homomorphism of a representation}
%  Let $V$ be a representation of $\glie$ and $\Univ(\glie) \times V \to V, (x,v) \mapsto x \cdot v$ the corresponding $\Univ(\glie)$-module structure on $V$. Then the map
%  \[
%   C_\beta^V \colon V \to V, \quad v \mapsto C_\beta \cdot v = \sum_{i=1}^n x_i.x^i.v
%  \]
%  is an endomorphism of representations of $\glie$ (equivalently an endomorphism of $\Univ(\glie)$-modules).
% \end{corollary}
% \begin{proof}
%  Because $C_\beta \in Z(\Univ(\glie))$ it follows that for every $x \in \Univ(\glie)$ and $v \in V$
%  \[
%   x \cdot C_\beta^V(v)
%   = x \cdot C_\beta \cdot v
%   = C_\beta \cdot x \cdot v
%   = C_\beta^V(x \cdot v).
%   \qedhere
%  \]
% \end{proof}
% 
% 
% \begin{lemma}[Casimir in coordinates] \label{lem: casimir in coordinates}
%  Let $x_1, \dotsc, x_n$ be a basis of $\glie$ and $x^1, \dotsc, x^n$ the dual basis of $\glie$ with respect to $\beta$, i.e.\ $\beta(x_i, x^j) = \delta_{ij}$ for all $i,j = 1, \dotsc, n$. Then
%  \[
%   C_\beta = \sum_{i=1}^n x_i x^i.
%  \]
% \end{lemma}
% \begin{proof}
%  Let $\varphi_1$ and $\varphi_2$ as in Definition~\ref{defi: definition of Casimir element}. In \eqref{eqn: Casimir without coordinates} $1$ is mapped to $\id_\g$, which is then mapped to $\sum_{i=1}^n x_i \tensor x_i^*$, where $x_1^*, \dotsc, x_n^*$ denotes the dual basis of $\g^*$. As $\varphi_2(x^i) = x_i^*$ it follows that $\sum_{i=1}^n x_i \tensor x_i^*$ is then mapped to $\sum_{i=1}^n x_i \tensor x^i$, which is then further mapped to the element $\sum_{i=1}^n x_i x^i$ in $\Univ(\glie)$.
% \end{proof}
% 
% 
% \begin{remark}
%  Using Lemma \ref{lem: casimir in coordinates} it can be shown that $C_\beta$ is central in $\Univ(\glie)$ using coordinates: Let $x \in \g$ and $a_{ij}, b_{ij} \in k$ such that $[x,x_i] = \sum_{j=1}^n a_{ij} x_j$ and $[x,x^i] = \sum_{j=1}^n b_{ij} x^j$ for all $i = 1, \dotsc, n$. Then for all $i,j = 1, \dotsc, n$
%  \begin{align*}
%   a_{ij}
%   &= \sum_{k=1}^n a_{ik} \beta(x_k, x^j)
%   = \beta\left( \sum_{k=1}^n a_{ik} x_k, x^j \right)
%   = \beta([x, x_i], x^j)
%   = -\beta([x_i, x], x^j) \\
%   &= -\beta(x_i, [x, x^j])
%   = -\beta\left( x_i, \sum_{k=1}^n b_{jk} x^k \right)
%   = -\sum_{k=1}^n b_{jk} \beta(x_i, x^k)
%   = -b_{ji}.
%  \end{align*}
%  It follows that
%  \begin{align*}
%   x C_\beta - C_\beta x
%   &= \sum_{i=1}^n x x_i x^i - \sum_{i=1}^n x_i x^i x
%   = \sum_{i=1}^n [x, x_i] x^i - \sum_{i=1}^n x_i [x^i, x] \\
%   &= \sum_{i,j=1}^n a_{ij} x_j x^i + \sum_{i,j=1}^n b_{ij} x_i x^j
%   = \sum_{i,j=1}^n a_{ij} x_j x^i - \sum_{i,j=1}^n a_{ij} x_j x^i
%   = 0.
%  \end{align*}
% \end{remark}




